import{g as $u,c as ms,a as Up,R as Gr,r as si}from"./react-CHYZsP8B.js";var Gp={exports:{}},zi=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(zi||{}),zp=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(zp||{}),Kh=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Kh||{}),dt=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(dt||{}),ir=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(ir||{}),Y=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(Y||{}),wn=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(wn||{}),pt=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(pt||{}),Q=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(Q||{}),Dr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(Dr||{}),zr=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(zr||{}),hi=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(hi||{}),Ve=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Ve||{}),Ii=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(Ii||{}),ju=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(ju||{}),We=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(We||{}),re=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(re||{}),Jt=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(Jt||{}),Sr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Sr||{});const a0={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},lt={ADAPTER:a0,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var ah=/iPhone/i,Kd=/iPod/i,Zd=/iPad/i,Jd=/\biOS-universal(?:.+)Mac\b/i,oh=/\bAndroid(?:.+)Mobile\b/i,tf=/Android/i,an=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Aa=/Silk/i,kr=/Windows Phone/i,ef=/\bWindows(?:.+)ARM\b/i,rf=/BlackBerry/i,nf=/BB10/i,sf=/Opera Mini/i,af=/\b(CriOS|Chrome)(?:.+)Mobile/i,of=/Mobile(?:.+)Firefox\b/i,lf=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function o0(r){return function(t){return t.test(r)}}function hf(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var n=o0(e),s={apple:{phone:n(ah)&&!n(kr),ipod:n(Kd),tablet:!n(ah)&&(n(Zd)||lf(t))&&!n(kr),universal:n(Jd),device:(n(ah)||n(Kd)||n(Zd)||n(Jd)||lf(t))&&!n(kr)},amazon:{phone:n(an),tablet:!n(an)&&n(Aa),device:n(an)||n(Aa)},android:{phone:!n(kr)&&n(an)||!n(kr)&&n(oh),tablet:!n(kr)&&!n(an)&&!n(oh)&&(n(Aa)||n(tf)),device:!n(kr)&&(n(an)||n(Aa)||n(oh)||n(tf))||n(/\bokhttp\b/i)},windows:{phone:n(kr),tablet:n(ef),device:n(kr)||n(ef)},other:{blackberry:n(rf),blackberry10:n(nf),opera:n(sf),firefox:n(of),chrome:n(af),device:n(rf)||n(nf)||n(sf)||n(of)||n(af)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const l0=hf.default??hf,gn=l0(globalThis.navigator);lt.RETINA_PREFIX=/@([0-9\.]+)x/;lt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Hp={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(c,d,m){this.fn=c,this.context=d,this.once=m||!1}function s(c,d,m,y,g){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new n(m,y||c,g),x=e?e+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],_]:c._events[x].push(_):(c._events[x]=_,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new i:delete c._events[d]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var d=[],m,y;if(this._eventsCount===0)return d;for(y in m=this._events)t.call(m,y)&&d.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},h.prototype.listeners=function(d){var m=e?e+d:d,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var g=0,_=y.length,x=new Array(_);g<_;g++)x[g]=y[g].fn;return x},h.prototype.listenerCount=function(d){var m=e?e+d:d,y=this._events[m];return y?y.fn?1:y.length:0},h.prototype.emit=function(d,m,y,g,_,x){var b=e?e+d:d;if(!this._events[b])return!1;var T=this._events[b],S=arguments.length,C,A;if(T.fn){switch(T.once&&this.removeListener(d,T.fn,void 0,!0),S){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,m),!0;case 3:return T.fn.call(T.context,m,y),!0;case 4:return T.fn.call(T.context,m,y,g),!0;case 5:return T.fn.call(T.context,m,y,g,_),!0;case 6:return T.fn.call(T.context,m,y,g,_,x),!0}for(A=1,C=new Array(S-1);A<S;A++)C[A-1]=arguments[A];T.fn.apply(T.context,C)}else{var I=T.length,U;for(A=0;A<I;A++)switch(T[A].once&&this.removeListener(d,T[A].fn,void 0,!0),S){case 1:T[A].fn.call(T[A].context);break;case 2:T[A].fn.call(T[A].context,m);break;case 3:T[A].fn.call(T[A].context,m,y);break;case 4:T[A].fn.call(T[A].context,m,y,g);break;default:if(!C)for(U=1,C=new Array(S-1);U<S;U++)C[U-1]=arguments[U];T[A].fn.apply(T[A].context,C)}}return!0},h.prototype.on=function(d,m,y){return s(this,d,m,y,!1)},h.prototype.once=function(d,m,y){return s(this,d,m,y,!0)},h.prototype.removeListener=function(d,m,y,g){var _=e?e+d:d;if(!this._events[_])return this;if(!m)return l(this,_),this;var x=this._events[_];if(x.fn)x.fn===m&&(!g||x.once)&&(!y||x.context===y)&&l(this,_);else{for(var b=0,T=[],S=x.length;b<S;b++)(x[b].fn!==m||g&&!x[b].once||y&&x[b].context!==y)&&T.push(x[b]);T.length?this._events[_]=T.length===1?T[0]:T:l(this,_)}return this},h.prototype.removeAllListeners=function(d){var m;return d?(m=e?e+d:d,this._events[m]&&l(this,m)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,r.exports=h})(Hp);var h0=Hp.exports;const Eo=$u(h0);var Vu={exports:{}};Vu.exports=Io;Vu.exports.default=Io;function Io(r,t,e){e=e||2;var i=t&&t.length,n=i?t[0]*e:r.length,s=$p(r,0,n,e,!0),l=[];if(!s||s.next===s.prev)return l;var h,c,d,m,y,g,_;if(i&&(s=p0(r,t,s,e)),r.length>80*e){h=d=r[0],c=m=r[1];for(var x=e;x<n;x+=e)y=r[x],g=r[x+1],y<h&&(h=y),g<c&&(c=g),y>d&&(d=y),g>m&&(m=g);_=Math.max(d-h,m-c),_=_!==0?32767/_:0}return bs(s,l,e,h,c,_,0),l}function $p(r,t,e,i,n){var s,l;if(n===tu(r,t,e,i)>0)for(s=t;s<e;s+=i)l=uf(s,r[s],r[s+1],l);else for(s=e-i;s>=t;s-=i)l=uf(s,r[s],r[s+1],l);return l&&Co(l,l.next)&&(Ts(l),l=l.next),l}function Ui(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(Co(e,e.next)||Ht(e.prev,e,e.next)===0)){if(Ts(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function bs(r,t,e,i,n,s,l){if(r){!l&&s&&_0(r,i,n,s);for(var h=r,c,d;r.prev!==r.next;){if(c=r.prev,d=r.next,s?c0(r,i,n,s):u0(r)){t.push(c.i/e|0),t.push(r.i/e|0),t.push(d.i/e|0),Ts(r),r=d.next,h=d.next;continue}if(r=d,r===h){l?l===1?(r=d0(Ui(r),t,e),bs(r,t,e,i,n,s,2)):l===2&&f0(r,t,e,i,n,s):bs(Ui(r),t,e,i,n,s,1);break}}}}function u0(r){var t=r.prev,e=r,i=r.next;if(Ht(t,e,i)>=0)return!1;for(var n=t.x,s=e.x,l=i.x,h=t.y,c=e.y,d=i.y,m=n<s?n<l?n:l:s<l?s:l,y=h<c?h<d?h:d:c<d?c:d,g=n>s?n>l?n:l:s>l?s:l,_=h>c?h>d?h:d:c>d?c:d,x=i.next;x!==t;){if(x.x>=m&&x.x<=g&&x.y>=y&&x.y<=_&&yn(n,h,s,c,l,d,x.x,x.y)&&Ht(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function c0(r,t,e,i){var n=r.prev,s=r,l=r.next;if(Ht(n,s,l)>=0)return!1;for(var h=n.x,c=s.x,d=l.x,m=n.y,y=s.y,g=l.y,_=h<c?h<d?h:d:c<d?c:d,x=m<y?m<g?m:g:y<g?y:g,b=h>c?h>d?h:d:c>d?c:d,T=m>y?m>g?m:g:y>g?y:g,S=Zh(_,x,t,e,i),C=Zh(b,T,t,e,i),A=r.prevZ,I=r.nextZ;A&&A.z>=S&&I&&I.z<=C;){if(A.x>=_&&A.x<=b&&A.y>=x&&A.y<=T&&A!==n&&A!==l&&yn(h,m,c,y,d,g,A.x,A.y)&&Ht(A.prev,A,A.next)>=0||(A=A.prevZ,I.x>=_&&I.x<=b&&I.y>=x&&I.y<=T&&I!==n&&I!==l&&yn(h,m,c,y,d,g,I.x,I.y)&&Ht(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;A&&A.z>=S;){if(A.x>=_&&A.x<=b&&A.y>=x&&A.y<=T&&A!==n&&A!==l&&yn(h,m,c,y,d,g,A.x,A.y)&&Ht(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;I&&I.z<=C;){if(I.x>=_&&I.x<=b&&I.y>=x&&I.y<=T&&I!==n&&I!==l&&yn(h,m,c,y,d,g,I.x,I.y)&&Ht(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function d0(r,t,e){var i=r;do{var n=i.prev,s=i.next.next;!Co(n,s)&&jp(n,i,i.next,s)&&ws(n,s)&&ws(s,n)&&(t.push(n.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),Ts(i),Ts(i.next),i=r=s),i=i.next}while(i!==r);return Ui(i)}function f0(r,t,e,i,n,s){var l=r;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&w0(l,h)){var c=Vp(l,h);l=Ui(l,l.next),c=Ui(c,c.next),bs(l,t,e,i,n,s,0),bs(c,t,e,i,n,s,0);return}h=h.next}l=l.next}while(l!==r)}function p0(r,t,e,i){var n=[],s,l,h,c,d;for(s=0,l=t.length;s<l;s++)h=t[s]*i,c=s<l-1?t[s+1]*i:r.length,d=$p(r,h,c,i,!1),d===d.next&&(d.steiner=!0),n.push(b0(d));for(n.sort(m0),s=0;s<n.length;s++)e=g0(n[s],e);return e}function m0(r,t){return r.x-t.x}function g0(r,t){var e=y0(r,t);if(!e)return t;var i=Vp(e,r);return Ui(i,i.next),Ui(e,e.next)}function y0(r,t){var e=t,i=r.x,n=r.y,s=-1/0,l;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var h=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(h<=i&&h>s&&(s=h,l=e.x<e.next.x?e:e.next,h===i))return l}e=e.next}while(e!==t);if(!l)return null;var c=l,d=l.x,m=l.y,y=1/0,g;e=l;do i>=e.x&&e.x>=d&&i!==e.x&&yn(n<m?i:s,n,d,m,n<m?s:i,n,e.x,e.y)&&(g=Math.abs(n-e.y)/(i-e.x),ws(e,r)&&(g<y||g===y&&(e.x>l.x||e.x===l.x&&v0(l,e)))&&(l=e,y=g)),e=e.next;while(e!==c);return l}function v0(r,t){return Ht(r.prev,r,t.prev)<0&&Ht(t.next,r,r.next)<0}function _0(r,t,e,i){var n=r;do n.z===0&&(n.z=Zh(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,x0(n)}function x0(r){var t,e,i,n,s,l,h,c,d=1;do{for(e=r,r=null,s=null,l=0;e;){for(l++,i=e,h=0,t=0;t<d&&(h++,i=i.nextZ,!!i);t++);for(c=d;h>0||c>0&&i;)h!==0&&(c===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,h--):(n=i,i=i.nextZ,c--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;e=i}s.nextZ=null,d*=2}while(l>1);return r}function Zh(r,t,e,i,n){return r=(r-e)*n|0,t=(t-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function b0(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function yn(r,t,e,i,n,s,l,h){return(n-l)*(t-h)>=(r-l)*(s-h)&&(r-l)*(i-h)>=(e-l)*(t-h)&&(e-l)*(s-h)>=(n-l)*(i-h)}function w0(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!T0(r,t)&&(ws(r,t)&&ws(t,r)&&A0(r,t)&&(Ht(r.prev,r,t.prev)||Ht(r,t.prev,t))||Co(r,t)&&Ht(r.prev,r,r.next)>0&&Ht(t.prev,t,t.next)>0)}function Ht(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Co(r,t){return r.x===t.x&&r.y===t.y}function jp(r,t,e,i){var n=Ea(Ht(r,t,e)),s=Ea(Ht(r,t,i)),l=Ea(Ht(e,i,r)),h=Ea(Ht(e,i,t));return!!(n!==s&&l!==h||n===0&&Sa(r,e,t)||s===0&&Sa(r,i,t)||l===0&&Sa(e,r,i)||h===0&&Sa(e,t,i))}function Sa(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function Ea(r){return r>0?1:r<0?-1:0}function T0(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&jp(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function ws(r,t){return Ht(r.prev,r,r.next)<0?Ht(r,t,r.next)>=0&&Ht(r,r.prev,t)>=0:Ht(r,t,r.prev)<0||Ht(r,r.next,t)<0}function A0(r,t){var e=r,i=!1,n=(r.x+t.x)/2,s=(r.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&n<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function Vp(r,t){var e=new Jh(r.i,r.x,r.y),i=new Jh(t.i,t.x,t.y),n=r.next,s=t.prev;return r.next=t,t.prev=r,e.next=n,n.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function uf(r,t,e,i){var n=new Jh(r,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Ts(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Jh(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Io.deviation=function(r,t,e,i){var n=t&&t.length,s=n?t[0]*e:r.length,l=Math.abs(tu(r,0,s,e));if(n)for(var h=0,c=t.length;h<c;h++){var d=t[h]*e,m=h<c-1?t[h+1]*e:r.length;l-=Math.abs(tu(r,d,m,e))}var y=0;for(h=0;h<i.length;h+=3){var g=i[h]*e,_=i[h+1]*e,x=i[h+2]*e;y+=Math.abs((r[g]-r[x])*(r[_+1]-r[g+1])-(r[g]-r[_])*(r[x+1]-r[g+1]))}return l===0&&y===0?0:Math.abs((y-l)/l)};function tu(r,t,e,i){for(var n=0,s=t,l=e-i;s<e;s+=i)n+=(r[l]-r[s])*(r[s+1]+r[l+1]),l=s;return n}Io.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,n=0;n<r.length;n++){for(var s=0;s<r[n].length;s++)for(var l=0;l<t;l++)e.vertices.push(r[n][s][l]);n>0&&(i+=r[n-1].length,e.holes.push(i))}return e};var S0=Vu.exports;const E0=$u(S0);var no={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */no.exports;(function(r,t){(function(e){var i=t&&!t.nodeType&&t,n=!r.nodeType&&r,s=typeof ms=="object"&&ms;(s.global===s||s.window===s||s.self===s)&&(e=s);var l,h=2147483647,c=36,d=1,m=26,y=38,g=700,_=72,x=128,b="-",T=/^xn--/,S=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=c-d,U=Math.floor,W=String.fromCharCode,j;function G(k){throw new RangeError(A[k])}function q(k,z){for(var ht=k.length,_t=[];ht--;)_t[ht]=z(k[ht]);return _t}function it(k,z){var ht=k.split("@"),_t="";ht.length>1&&(_t=ht[0]+"@",k=ht[1]),k=k.replace(C,".");var yt=k.split("."),Nt=q(yt,z).join(".");return _t+Nt}function mt(k){for(var z=[],ht=0,_t=k.length,yt,Nt;ht<_t;)yt=k.charCodeAt(ht++),yt>=55296&&yt<=56319&&ht<_t?(Nt=k.charCodeAt(ht++),(Nt&64512)==56320?z.push(((yt&1023)<<10)+(Nt&1023)+65536):(z.push(yt),ht--)):z.push(yt);return z}function J(k){return q(k,function(z){var ht="";return z>65535&&(z-=65536,ht+=W(z>>>10&1023|55296),z=56320|z&1023),ht+=W(z),ht}).join("")}function F(k){return k-48<10?k-22:k-65<26?k-65:k-97<26?k-97:c}function V(k,z){return k+22+75*(k<26)-((z!=0)<<5)}function nt(k,z,ht){var _t=0;for(k=ht?U(k/g):k>>1,k+=U(k/z);k>I*m>>1;_t+=c)k=U(k/I);return U(_t+(I+1)*k/(k+y))}function ft(k){var z=[],ht=k.length,_t,yt=0,Nt=x,Ct=_,Mt,ie,ue,jt,vt,kt,At,ke,Oe;for(Mt=k.lastIndexOf(b),Mt<0&&(Mt=0),ie=0;ie<Mt;++ie)k.charCodeAt(ie)>=128&&G("not-basic"),z.push(k.charCodeAt(ie));for(ue=Mt>0?Mt+1:0;ue<ht;){for(jt=yt,vt=1,kt=c;ue>=ht&&G("invalid-input"),At=F(k.charCodeAt(ue++)),(At>=c||At>U((h-yt)/vt))&&G("overflow"),yt+=At*vt,ke=kt<=Ct?d:kt>=Ct+m?m:kt-Ct,!(At<ke);kt+=c)Oe=c-ke,vt>U(h/Oe)&&G("overflow"),vt*=Oe;_t=z.length+1,Ct=nt(yt-jt,_t,jt==0),U(yt/_t)>h-Nt&&G("overflow"),Nt+=U(yt/_t),yt%=_t,z.splice(yt++,0,Nt)}return J(z)}function ot(k){var z,ht,_t,yt,Nt,Ct,Mt,ie,ue,jt,vt,kt=[],At,ke,Oe,pi;for(k=mt(k),At=k.length,z=x,ht=0,Nt=_,Ct=0;Ct<At;++Ct)vt=k[Ct],vt<128&&kt.push(W(vt));for(_t=yt=kt.length,yt&&kt.push(b);_t<At;){for(Mt=h,Ct=0;Ct<At;++Ct)vt=k[Ct],vt>=z&&vt<Mt&&(Mt=vt);for(ke=_t+1,Mt-z>U((h-ht)/ke)&&G("overflow"),ht+=(Mt-z)*ke,z=Mt,Ct=0;Ct<At;++Ct)if(vt=k[Ct],vt<z&&++ht>h&&G("overflow"),vt==z){for(ie=ht,ue=c;jt=ue<=Nt?d:ue>=Nt+m?m:ue-Nt,!(ie<jt);ue+=c)pi=ie-jt,Oe=c-jt,kt.push(W(V(jt+pi%Oe,0))),ie=U(pi/Oe);kt.push(W(V(ie,0))),Nt=nt(ht,ke,_t==yt),ht=0,++_t}++ht,++z}return kt.join("")}function B(k){return it(k,function(z){return T.test(z)?ft(z.slice(4).toLowerCase()):z})}function K(k){return it(k,function(z){return S.test(z)?"xn--"+ot(z):z})}if(l={version:"1.4.1",ucs2:{decode:mt,encode:J},decode:ft,encode:ot,toASCII:K,toUnicode:B},i&&n)if(r.exports==i)n.exports=l;else for(j in l)l.hasOwnProperty(j)&&(i[j]=l[j]);else e.punycode=l})(ms)})(no,no.exports);var I0=no.exports,Fn=TypeError;const C0={},R0=Object.freeze(Object.defineProperty({__proto__:null,default:C0},Symbol.toStringTag,{value:"Module"})),P0=Up(R0);var Wu=typeof Map=="function"&&Map.prototype,lh=Object.getOwnPropertyDescriptor&&Wu?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,so=Wu&&lh&&typeof lh.get=="function"?lh.get:null,cf=Wu&&Map.prototype.forEach,Xu=typeof Set=="function"&&Set.prototype,hh=Object.getOwnPropertyDescriptor&&Xu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ao=Xu&&hh&&typeof hh.get=="function"?hh.get:null,df=Xu&&Set.prototype.forEach,N0=typeof WeakMap=="function"&&WeakMap.prototype,gs=N0?WeakMap.prototype.has:null,M0=typeof WeakSet=="function"&&WeakSet.prototype,ys=M0?WeakSet.prototype.has:null,F0=typeof WeakRef=="function"&&WeakRef.prototype,ff=F0?WeakRef.prototype.deref:null,k0=Boolean.prototype.valueOf,O0=Object.prototype.toString,B0=Function.prototype.toString,L0=String.prototype.match,Yu=String.prototype.slice,ai=String.prototype.replace,D0=String.prototype.toUpperCase,pf=String.prototype.toLowerCase,Wp=RegExp.prototype.test,mf=Array.prototype.concat,Tr=Array.prototype.join,U0=Array.prototype.slice,gf=Math.floor,eu=typeof BigInt=="function"?BigInt.prototype.valueOf:null,uh=Object.getOwnPropertySymbols,ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ve=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Cn||!0)?Symbol.toStringTag:null,Xp=Object.prototype.propertyIsEnumerable,yf=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function vf(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Wp.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-gf(-r):gf(r);if(i!==r){var n=String(i),s=Yu.call(t,n.length+1);return ai.call(n,e,"$&_")+"."+ai.call(ai.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ai.call(t,e,"$&_")}var iu=P0,_f=iu.custom,xf=Qp(_f)?_f:null,Yp={__proto__:null,double:'"',single:"'"},G0={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Ro=function r(t,e,i,n){var s=e||{};if(Lr(s,"quoteStyle")&&!Lr(Yp,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Lr(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=Lr(s,"customInspect")?s.customInspect:!0;if(typeof l!="boolean"&&l!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Lr(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Lr(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=s.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Zp(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return h?vf(t,c):c}if(typeof t=="bigint"){var d=String(t)+"n";return h?vf(t,d):d}var m=typeof s.depth>"u"?5:s.depth;if(typeof i>"u"&&(i=0),i>=m&&m>0&&typeof t=="object")return nu(t)?"[Array]":"[Object]";var y=nv(s,i);if(typeof n>"u")n=[];else if(Kp(n,t)>=0)return"[Circular]";function g(F,V,nt){if(V&&(n=U0.call(n),n.push(V)),nt){var ft={depth:s.depth};return Lr(s,"quoteStyle")&&(ft.quoteStyle=s.quoteStyle),r(F,ft,i+1,n)}return r(F,s,i+1,n)}if(typeof t=="function"&&!bf(t)){var _=q0(t),x=Ia(t,g);return"[Function"+(_?": "+_:" (anonymous)")+"]"+(x.length>0?" { "+Tr.call(x,", ")+" }":"")}if(Qp(t)){var b=Cn?ai.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):ru.call(t);return typeof t=="object"&&!Cn?is(b):b}if(ev(t)){for(var T="<"+pf.call(String(t.nodeName)),S=t.attributes||[],C=0;C<S.length;C++)T+=" "+S[C].name+"="+qp(z0(S[C].value),"double",s);return T+=">",t.childNodes&&t.childNodes.length&&(T+="..."),T+="</"+pf.call(String(t.nodeName))+">",T}if(nu(t)){if(t.length===0)return"[]";var A=Ia(t,g);return y&&!iv(A)?"["+su(A,y)+"]":"[ "+Tr.call(A,", ")+" ]"}if($0(t)){var I=Ia(t,g);return!("cause"in Error.prototype)&&"cause"in t&&!Xp.call(t,"cause")?"{ ["+String(t)+"] "+Tr.call(mf.call("[cause]: "+g(t.cause),I),", ")+" }":I.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Tr.call(I,", ")+" }"}if(typeof t=="object"&&l){if(xf&&typeof t[xf]=="function"&&iu)return iu(t,{depth:m-i});if(l!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Q0(t)){var U=[];return cf&&cf.call(t,function(F,V){U.push(g(V,t,!0)+" => "+g(F,t))}),wf("Map",so.call(t),U,y)}if(J0(t)){var W=[];return df&&df.call(t,function(F){W.push(g(F,t))}),wf("Set",ao.call(t),W,y)}if(K0(t))return ch("WeakMap");if(tv(t))return ch("WeakSet");if(Z0(t))return ch("WeakRef");if(V0(t))return is(g(Number(t)));if(X0(t))return is(g(eu.call(t)));if(W0(t))return is(k0.call(t));if(j0(t))return is(g(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof ms<"u"&&t===ms)return"{ [object globalThis] }";if(!H0(t)&&!bf(t)){var j=Ia(t,g),G=yf?yf(t)===Object.prototype:t instanceof Object||t.constructor===Object,q=t instanceof Object?"":"null prototype",it=!G&&ve&&Object(t)===t&&ve in t?Yu.call(ci(t),8,-1):q?"Object":"",mt=G||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",J=mt+(it||q?"["+Tr.call(mf.call([],it||[],q||[]),": ")+"] ":"");return j.length===0?J+"{}":y?J+"{"+su(j,y)+"}":J+"{ "+Tr.call(j,", ")+" }"}return String(t)};function qp(r,t,e){var i=e.quoteStyle||t,n=Yp[i];return n+r+n}function z0(r){return ai.call(String(r),/"/g,"&quot;")}function nu(r){return ci(r)==="[object Array]"&&(!ve||!(typeof r=="object"&&ve in r))}function H0(r){return ci(r)==="[object Date]"&&(!ve||!(typeof r=="object"&&ve in r))}function bf(r){return ci(r)==="[object RegExp]"&&(!ve||!(typeof r=="object"&&ve in r))}function $0(r){return ci(r)==="[object Error]"&&(!ve||!(typeof r=="object"&&ve in r))}function j0(r){return ci(r)==="[object String]"&&(!ve||!(typeof r=="object"&&ve in r))}function V0(r){return ci(r)==="[object Number]"&&(!ve||!(typeof r=="object"&&ve in r))}function W0(r){return ci(r)==="[object Boolean]"&&(!ve||!(typeof r=="object"&&ve in r))}function Qp(r){if(Cn)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!ru)return!1;try{return ru.call(r),!0}catch{}return!1}function X0(r){if(!r||typeof r!="object"||!eu)return!1;try{return eu.call(r),!0}catch{}return!1}var Y0=Object.prototype.hasOwnProperty||function(r){return r in this};function Lr(r,t){return Y0.call(r,t)}function ci(r){return O0.call(r)}function q0(r){if(r.name)return r.name;var t=L0.call(B0.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function Kp(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1}function Q0(r){if(!so||!r||typeof r!="object")return!1;try{so.call(r);try{ao.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function K0(r){if(!gs||!r||typeof r!="object")return!1;try{gs.call(r,gs);try{ys.call(r,ys)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function Z0(r){if(!ff||!r||typeof r!="object")return!1;try{return ff.call(r),!0}catch{}return!1}function J0(r){if(!ao||!r||typeof r!="object")return!1;try{ao.call(r);try{so.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function tv(r){if(!ys||!r||typeof r!="object")return!1;try{ys.call(r,ys);try{gs.call(r,gs)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function ev(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function Zp(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return Zp(Yu.call(r,0,t.maxStringLength),t)+i}var n=G0[t.quoteStyle||"single"];n.lastIndex=0;var s=ai.call(ai.call(r,n,"\\$1"),/[\x00-\x1f]/g,rv);return qp(s,"single",t)}function rv(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+D0.call(t.toString(16))}function is(r){return"Object("+r+")"}function ch(r){return r+" { ? }"}function wf(r,t,e,i){var n=i?su(e,i):Tr.call(e,", ");return r+" ("+t+") {"+n+"}"}function iv(r){for(var t=0;t<r.length;t++)if(Kp(r[t],`
`)>=0)return!1;return!0}function nv(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=Tr.call(Array(r.indent+1)," ");else return null;return{base:e,prev:Tr.call(Array(t+1),e)}}function su(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+Tr.call(r,","+e)+`
`+t.prev}function Ia(r,t){var e=nu(r),i=[];if(e){i.length=r.length;for(var n=0;n<r.length;n++)i[n]=Lr(r,n)?t(r[n],r):""}var s=typeof uh=="function"?uh(r):[],l;if(Cn){l={};for(var h=0;h<s.length;h++)l["$"+s[h]]=s[h]}for(var c in r)Lr(r,c)&&(e&&String(Number(c))===c&&c<r.length||Cn&&l["$"+c]instanceof Symbol||(Wp.call(/[^\w$]/,c)?i.push(t(c,r)+": "+t(r[c],r)):i.push(c+": "+t(r[c],r))));if(typeof uh=="function")for(var d=0;d<s.length;d++)Xp.call(r,s[d])&&i.push("["+t(s[d])+"]: "+t(r[s[d]],r));return i}var sv=Ro,av=Fn,Po=function(r,t,e){for(var i=r,n;(n=i.next)!=null;i=n)if(n.key===t)return i.next=n.next,e||(n.next=r.next,r.next=n),n},ov=function(r,t){if(r){var e=Po(r,t);return e&&e.value}},lv=function(r,t,e){var i=Po(r,t);i?i.value=e:r.next={key:t,next:r.next,value:e}},hv=function(r,t){return r?!!Po(r,t):!1},uv=function(r,t){if(r)return Po(r,t,!0)},cv=function(){var t,e={assert:function(i){if(!e.has(i))throw new av("Side channel does not contain "+sv(i))},delete:function(i){var n=t&&t.next,s=uv(t,i);return s&&n&&n===s&&(t=void 0),!!s},get:function(i){return ov(t,i)},has:function(i){return hv(t,i)},set:function(i,n){t||(t={next:void 0}),lv(t,i,n)}};return e},dv=Object,fv=Error,pv=EvalError,mv=RangeError,gv=ReferenceError,yv=SyntaxError,vv=URIError,_v=Math.abs,xv=Math.floor,bv=Math.max,wv=Math.min,Tv=Math.pow,Av=Object.getOwnPropertyDescriptor,Xa=Av;if(Xa)try{Xa([],"length")}catch{Xa=null}var Jp=Xa,Ya=Object.defineProperty||!1;if(Ya)try{Ya({},"a",{value:1})}catch{Ya=!1}var Sv=Ya,dh,Tf;function Ev(){return Tf||(Tf=1,dh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[e]=n;for(var s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var l=Object.getOwnPropertySymbols(t);if(l.length!==1||l[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(t,e);if(h.value!==n||h.enumerable!==!0)return!1}return!0}),dh}var fh,Af;function Iv(){if(Af)return fh;Af=1;var r=typeof Symbol<"u"&&Symbol,t=Ev();return fh=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},fh}var Cv="Function.prototype.bind called on incompatible ",Rv=Object.prototype.toString,Pv=Math.max,Nv="[object Function]",Sf=function(t,e){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var s=0;s<e.length;s+=1)i[s+t.length]=e[s];return i},Mv=function(t,e){for(var i=[],n=e,s=0;n<t.length;n+=1,s+=1)i[s]=t[n];return i},Fv=function(r,t){for(var e="",i=0;i<r.length;i+=1)e+=r[i],i+1<r.length&&(e+=t);return e},kv=function(t){var e=this;if(typeof e!="function"||Rv.apply(e)!==Nv)throw new TypeError(Cv+e);for(var i=Mv(arguments,1),n,s=function(){if(this instanceof n){var m=e.apply(this,Sf(i,arguments));return Object(m)===m?m:this}return e.apply(t,Sf(i,arguments))},l=Pv(0,e.length-i.length),h=[],c=0;c<l;c++)h[c]="$"+c;if(n=Function("binder","return function ("+Fv(h,",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var d=function(){};d.prototype=e.prototype,n.prototype=new d,d.prototype=null}return n},Ov=kv,No=Function.prototype.bind||Ov,qu=Function.prototype.call,ph,Ef;function tm(){return Ef||(Ef=1,ph=Function.prototype.apply),ph}var Bv=typeof Reflect<"u"&&Reflect&&Reflect.apply,Lv=No,Dv=tm(),Uv=qu,Gv=Bv,zv=Gv||Lv.call(Uv,Dv),Hv=No,$v=Fn,jv=qu,Vv=zv,em=function(t){if(t.length<1||typeof t[0]!="function")throw new $v("a function is required");return Vv(Hv,jv,t)},mh,If;function Wv(){if(If)return mh;If=1;var r=em,t=Jp,e;try{e=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var i=!!e&&t&&t(Object.prototype,"__proto__"),n=Object,s=n.getPrototypeOf;return mh=i&&typeof i.get=="function"?r([i.get]):typeof s=="function"?function(h){return s(h==null?h:n(h))}:!1,mh}var gh,Cf;function Xv(){if(Cf)return gh;Cf=1;var r=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=No;return gh=e.call(r,t),gh}var xt,rm=dv,Yv=fv,qv=pv,Qv=mv,Kv=gv,Rn=yv,Tn=Fn,Zv=vv,Jv=_v,t_=xv,e_=bv,r_=wv,i_=Tv,im=Function,yh=function(r){try{return im('"use strict"; return ('+r+").constructor;")()}catch{}},As=Jp,n_=Sv,vh=function(){throw new Tn},s_=As?function(){try{return arguments.callee,vh}catch{try{return As(arguments,"callee").get}catch{return vh}}}():vh,on=Iv()(),a_=Wv(),le=typeof Reflect=="function"&&Reflect.getPrototypeOf||rm.getPrototypeOf||a_,nm=tm(),Ms=qu,dn={},o_=typeof Uint8Array>"u"||!le?xt:le(Uint8Array),Li={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?xt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?xt:ArrayBuffer,"%ArrayIteratorPrototype%":on&&le?le([][Symbol.iterator]()):xt,"%AsyncFromSyncIteratorPrototype%":xt,"%AsyncFunction%":dn,"%AsyncGenerator%":dn,"%AsyncGeneratorFunction%":dn,"%AsyncIteratorPrototype%":dn,"%Atomics%":typeof Atomics>"u"?xt:Atomics,"%BigInt%":typeof BigInt>"u"?xt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?xt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?xt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?xt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Yv,"%eval%":eval,"%EvalError%":qv,"%Float32Array%":typeof Float32Array>"u"?xt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?xt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?xt:FinalizationRegistry,"%Function%":im,"%GeneratorFunction%":dn,"%Int8Array%":typeof Int8Array>"u"?xt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?xt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?xt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":on&&le?le(le([][Symbol.iterator]())):xt,"%JSON%":typeof JSON=="object"?JSON:xt,"%Map%":typeof Map>"u"?xt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!on||!le?xt:le(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":rm,"%Object.getOwnPropertyDescriptor%":As,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?xt:Promise,"%Proxy%":typeof Proxy>"u"?xt:Proxy,"%RangeError%":Qv,"%ReferenceError%":Kv,"%Reflect%":typeof Reflect>"u"?xt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?xt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!on||!le?xt:le(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?xt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":on&&le?le(""[Symbol.iterator]()):xt,"%Symbol%":on?Symbol:xt,"%SyntaxError%":Rn,"%ThrowTypeError%":s_,"%TypedArray%":o_,"%TypeError%":Tn,"%Uint8Array%":typeof Uint8Array>"u"?xt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?xt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?xt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?xt:Uint32Array,"%URIError%":Zv,"%WeakMap%":typeof WeakMap>"u"?xt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?xt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?xt:WeakSet,"%Function.prototype.call%":Ms,"%Function.prototype.apply%":nm,"%Object.defineProperty%":n_,"%Math.abs%":Jv,"%Math.floor%":t_,"%Math.max%":e_,"%Math.min%":r_,"%Math.pow%":i_};if(le)try{null.error}catch(r){var l_=le(le(r));Li["%Error.prototype%"]=l_}var h_=function r(t){var e;if(t==="%AsyncFunction%")e=yh("async function () {}");else if(t==="%GeneratorFunction%")e=yh("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=yh("async function* () {}");else if(t==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=r("%AsyncGenerator%");n&&le&&(e=le(n.prototype))}return Li[t]=e,e},Rf={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Fs=No,oo=Xv(),u_=Fs.call(Ms,Array.prototype.concat),c_=Fs.call(nm,Array.prototype.splice),Pf=Fs.call(Ms,String.prototype.replace),lo=Fs.call(Ms,String.prototype.slice),d_=Fs.call(Ms,RegExp.prototype.exec),f_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,p_=/\\(\\)?/g,m_=function(t){var e=lo(t,0,1),i=lo(t,-1);if(e==="%"&&i!=="%")throw new Rn("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new Rn("invalid intrinsic syntax, expected opening `%`");var n=[];return Pf(t,f_,function(s,l,h,c){n[n.length]=h?Pf(c,p_,"$1"):l||s}),n},g_=function(t,e){var i=t,n;if(oo(Rf,i)&&(n=Rf[i],i="%"+n[0]+"%"),oo(Li,i)){var s=Li[i];if(s===dn&&(s=h_(i)),typeof s>"u"&&!e)throw new Tn("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new Rn("intrinsic "+t+" does not exist!")},Qu=function(t,e){if(typeof t!="string"||t.length===0)throw new Tn("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Tn('"allowMissing" argument must be a boolean');if(d_(/^%?[^%]*%?$/,t)===null)throw new Rn("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=m_(t),n=i.length>0?i[0]:"",s=g_("%"+n+"%",e),l=s.name,h=s.value,c=!1,d=s.alias;d&&(n=d[0],c_(i,u_([0,1],d)));for(var m=1,y=!0;m<i.length;m+=1){var g=i[m],_=lo(g,0,1),x=lo(g,-1);if((_==='"'||_==="'"||_==="`"||x==='"'||x==="'"||x==="`")&&_!==x)throw new Rn("property names with quotes must have matching quotes");if((g==="constructor"||!y)&&(c=!0),n+="."+g,l="%"+n+"%",oo(Li,l))h=Li[l];else if(h!=null){if(!(g in h)){if(!e)throw new Tn("base intrinsic for "+t+" exists, but the property is not available.");return}if(As&&m+1>=i.length){var b=As(h,g);y=!!b,y&&"get"in b&&!("originalValue"in b.get)?h=b.get:h=h[g]}else y=oo(h,g),h=h[g];y&&!c&&(Li[l]=h)}}return h},sm=Qu,am=em,y_=am([sm("%String.prototype.indexOf%")]),om=function(t,e){var i=sm(t,!!e);return typeof i=="function"&&y_(t,".prototype.")>-1?am([i]):i},v_=Qu,ks=om,__=Ro,x_=Fn,Nf=v_("%Map%",!0),b_=ks("Map.prototype.get",!0),w_=ks("Map.prototype.set",!0),T_=ks("Map.prototype.has",!0),A_=ks("Map.prototype.delete",!0),S_=ks("Map.prototype.size",!0),lm=!!Nf&&function(){var t,e={assert:function(i){if(!e.has(i))throw new x_("Side channel does not contain "+__(i))},delete:function(i){if(t){var n=A_(t,i);return S_(t)===0&&(t=void 0),n}return!1},get:function(i){if(t)return b_(t,i)},has:function(i){return t?T_(t,i):!1},set:function(i,n){t||(t=new Nf),w_(t,i,n)}};return e},E_=Qu,Mo=om,I_=Ro,Ca=lm,C_=Fn,ln=E_("%WeakMap%",!0),R_=Mo("WeakMap.prototype.get",!0),P_=Mo("WeakMap.prototype.set",!0),N_=Mo("WeakMap.prototype.has",!0),M_=Mo("WeakMap.prototype.delete",!0),F_=ln?function(){var t,e,i={assert:function(n){if(!i.has(n))throw new C_("Side channel does not contain "+I_(n))},delete:function(n){if(ln&&n&&(typeof n=="object"||typeof n=="function")){if(t)return M_(t,n)}else if(Ca&&e)return e.delete(n);return!1},get:function(n){return ln&&n&&(typeof n=="object"||typeof n=="function")&&t?R_(t,n):e&&e.get(n)},has:function(n){return ln&&n&&(typeof n=="object"||typeof n=="function")&&t?N_(t,n):!!e&&e.has(n)},set:function(n,s){ln&&n&&(typeof n=="object"||typeof n=="function")?(t||(t=new ln),P_(t,n,s)):Ca&&(e||(e=Ca()),e.set(n,s))}};return i}:Ca,k_=Fn,O_=Ro,B_=cv,L_=lm,D_=F_,U_=D_||L_||B_,G_=function(){var t,e={assert:function(i){if(!e.has(i))throw new k_("Side channel does not contain "+O_(i))},delete:function(i){return!!t&&t.delete(i)},get:function(i){return t&&t.get(i)},has:function(i){return!!t&&t.has(i)},set:function(i,n){t||(t=U_()),t.set(i,n)}};return e},z_=String.prototype.replace,H_=/%20/g,_h={RFC1738:"RFC1738",RFC3986:"RFC3986"},Ku={default:_h.RFC3986,formatters:{RFC1738:function(r){return z_.call(r,H_,"+")},RFC3986:function(r){return String(r)}},RFC1738:_h.RFC1738,RFC3986:_h.RFC3986},$_=Ku,xh=Object.prototype.hasOwnProperty,Oi=Array.isArray,yr=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),j_=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(Oi(i)){for(var n=[],s=0;s<i.length;++s)typeof i[s]<"u"&&n.push(i[s]);e.obj[e.prop]=n}}},hm=function(t,e){for(var i=e&&e.plainObjects?{__proto__:null}:{},n=0;n<t.length;++n)typeof t[n]<"u"&&(i[n]=t[n]);return i},V_=function r(t,e,i){if(!e)return t;if(typeof e!="object"&&typeof e!="function"){if(Oi(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!xh.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var n=t;return Oi(t)&&!Oi(e)&&(n=hm(t,i)),Oi(t)&&Oi(e)?(e.forEach(function(s,l){if(xh.call(t,l)){var h=t[l];h&&typeof h=="object"&&s&&typeof s=="object"?t[l]=r(h,s,i):t.push(s)}else t[l]=s}),t):Object.keys(e).reduce(function(s,l){var h=e[l];return xh.call(s,l)?s[l]=r(s[l],h,i):s[l]=h,s},n)},W_=function(t,e){return Object.keys(e).reduce(function(i,n){return i[n]=e[n],i},t)},X_=function(r,t,e){var i=r.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},bh=1024,Y_=function(t,e,i,n,s){if(t.length===0)return t;var l=t;if(typeof t=="symbol"?l=Symbol.prototype.toString.call(t):typeof t!="string"&&(l=String(t)),i==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(_){return"%26%23"+parseInt(_.slice(2),16)+"%3B"});for(var h="",c=0;c<l.length;c+=bh){for(var d=l.length>=bh?l.slice(c,c+bh):l,m=[],y=0;y<d.length;++y){var g=d.charCodeAt(y);if(g===45||g===46||g===95||g===126||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||s===$_.RFC1738&&(g===40||g===41)){m[m.length]=d.charAt(y);continue}if(g<128){m[m.length]=yr[g];continue}if(g<2048){m[m.length]=yr[192|g>>6]+yr[128|g&63];continue}if(g<55296||g>=57344){m[m.length]=yr[224|g>>12]+yr[128|g>>6&63]+yr[128|g&63];continue}y+=1,g=65536+((g&1023)<<10|d.charCodeAt(y)&1023),m[m.length]=yr[240|g>>18]+yr[128|g>>12&63]+yr[128|g>>6&63]+yr[128|g&63]}h+=m.join("")}return h},q_=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],n=0;n<e.length;++n)for(var s=e[n],l=s.obj[s.prop],h=Object.keys(l),c=0;c<h.length;++c){var d=h[c],m=l[d];typeof m=="object"&&m!==null&&i.indexOf(m)===-1&&(e.push({obj:l,prop:d}),i.push(m))}return j_(e),t},Q_=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},K_=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},Z_=function(t,e){return[].concat(t,e)},J_=function(t,e){if(Oi(t)){for(var i=[],n=0;n<t.length;n+=1)i.push(e(t[n]));return i}return e(t)},um={arrayToObject:hm,assign:W_,combine:Z_,compact:q_,decode:X_,encode:Y_,isBuffer:K_,isRegExp:Q_,maybeMap:J_,merge:V_},cm=G_,qa=um,vs=Ku,tx=Object.prototype.hasOwnProperty,dm={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},wr=Array.isArray,ex=Array.prototype.push,fm=function(r,t){ex.apply(r,wr(t)?t:[t])},rx=Date.prototype.toISOString,Mf=vs.default,ee={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:qa.encode,encodeValuesOnly:!1,filter:void 0,format:Mf,formatter:vs.formatters[Mf],indices:!1,serializeDate:function(t){return rx.call(t)},skipNulls:!1,strictNullHandling:!1},ix=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},wh={},nx=function r(t,e,i,n,s,l,h,c,d,m,y,g,_,x,b,T,S,C){for(var A=t,I=C,U=0,W=!1;(I=I.get(wh))!==void 0&&!W;){var j=I.get(t);if(U+=1,typeof j<"u"){if(j===U)throw new RangeError("Cyclic object value");W=!0}typeof I.get(wh)>"u"&&(U=0)}if(typeof m=="function"?A=m(e,A):A instanceof Date?A=_(A):i==="comma"&&wr(A)&&(A=qa.maybeMap(A,function(k){return k instanceof Date?_(k):k})),A===null){if(l)return d&&!T?d(e,ee.encoder,S,"key",x):e;A=""}if(ix(A)||qa.isBuffer(A)){if(d){var G=T?e:d(e,ee.encoder,S,"key",x);return[b(G)+"="+b(d(A,ee.encoder,S,"value",x))]}return[b(e)+"="+b(String(A))]}var q=[];if(typeof A>"u")return q;var it;if(i==="comma"&&wr(A))T&&d&&(A=qa.maybeMap(A,d)),it=[{value:A.length>0?A.join(",")||null:void 0}];else if(wr(m))it=m;else{var mt=Object.keys(A);it=y?mt.sort(y):mt}var J=c?String(e).replace(/\./g,"%2E"):String(e),F=n&&wr(A)&&A.length===1?J+"[]":J;if(s&&wr(A)&&A.length===0)return F+"[]";for(var V=0;V<it.length;++V){var nt=it[V],ft=typeof nt=="object"&&nt&&typeof nt.value<"u"?nt.value:A[nt];if(!(h&&ft===null)){var ot=g&&c?String(nt).replace(/\./g,"%2E"):String(nt),B=wr(A)?typeof i=="function"?i(F,ot):F:F+(g?"."+ot:"["+ot+"]");C.set(t,U);var K=cm();K.set(wh,C),fm(q,r(ft,B,i,n,s,l,h,c,i==="comma"&&T&&wr(A)?null:d,m,y,g,_,x,b,T,S,K))}}return q},sx=function(t){if(!t)return ee;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||ee.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=vs.default;if(typeof t.format<"u"){if(!tx.call(vs.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var n=vs.formatters[i],s=ee.filter;(typeof t.filter=="function"||wr(t.filter))&&(s=t.filter);var l;if(t.arrayFormat in dm?l=t.arrayFormat:"indices"in t?l=t.indices?"indices":"repeat":l=ee.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:ee.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ee.addQueryPrefix,allowDots:h,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ee.allowEmptyArrays,arrayFormat:l,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ee.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?ee.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ee.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:ee.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:ee.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ee.encodeValuesOnly,filter:s,format:i,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ee.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ee.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ee.strictNullHandling}},ax=function(r,t){var e=r,i=sx(t),n,s;typeof i.filter=="function"?(s=i.filter,e=s("",e)):wr(i.filter)&&(s=i.filter,n=s);var l=[];if(typeof e!="object"||e===null)return"";var h=dm[i.arrayFormat],c=h==="comma"&&i.commaRoundTrip;n||(n=Object.keys(e)),i.sort&&n.sort(i.sort);for(var d=cm(),m=0;m<n.length;++m){var y=n[m],g=e[y];i.skipNulls&&g===null||fm(l,nx(g,y,h,c,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}var _=l.join(i.delimiter),x=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),_.length>0?x+_:""},Pn=um,au=Object.prototype.hasOwnProperty,ox=Array.isArray,Wt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Pn.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},lx=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},pm=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},hx="utf8=%26%2310003%3B",ux="utf8=%E2%9C%93",cx=function(t,e){var i={__proto__:null},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=e.parameterLimit===1/0?void 0:e.parameterLimit,l=n.split(e.delimiter,s),h=-1,c,d=e.charset;if(e.charsetSentinel)for(c=0;c<l.length;++c)l[c].indexOf("utf8=")===0&&(l[c]===ux?d="utf-8":l[c]===hx&&(d="iso-8859-1"),h=c,c=l.length);for(c=0;c<l.length;++c)if(c!==h){var m=l[c],y=m.indexOf("]="),g=y===-1?m.indexOf("="):y+1,_,x;g===-1?(_=e.decoder(m,Wt.decoder,d,"key"),x=e.strictNullHandling?null:""):(_=e.decoder(m.slice(0,g),Wt.decoder,d,"key"),x=Pn.maybeMap(pm(m.slice(g+1),e),function(T){return e.decoder(T,Wt.decoder,d,"value")})),x&&e.interpretNumericEntities&&d==="iso-8859-1"&&(x=lx(String(x))),m.indexOf("[]=")>-1&&(x=ox(x)?[x]:x);var b=au.call(i,_);b&&e.duplicates==="combine"?i[_]=Pn.combine(i[_],x):(!b||e.duplicates==="last")&&(i[_]=x)}return i},dx=function(r,t,e,i){for(var n=i?t:pm(t,e),s=r.length-1;s>=0;--s){var l,h=r[s];if(h==="[]"&&e.parseArrays)l=e.allowEmptyArrays&&(n===""||e.strictNullHandling&&n===null)?[]:[].concat(n);else{l=e.plainObjects?{__proto__:null}:{};var c=h.charAt(0)==="["&&h.charAt(h.length-1)==="]"?h.slice(1,-1):h,d=e.decodeDotInKeys?c.replace(/%2E/g,"."):c,m=parseInt(d,10);!e.parseArrays&&d===""?l={0:n}:!isNaN(m)&&h!==d&&String(m)===d&&m>=0&&e.parseArrays&&m<=e.arrayLimit?(l=[],l[m]=n):d!=="__proto__"&&(l[d]=n)}n=l}return n},fx=function(t,e,i,n){if(t){var s=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,l=/(\[[^[\]]*])/,h=/(\[[^[\]]*])/g,c=i.depth>0&&l.exec(s),d=c?s.slice(0,c.index):s,m=[];if(d){if(!i.plainObjects&&au.call(Object.prototype,d)&&!i.allowPrototypes)return;m.push(d)}for(var y=0;i.depth>0&&(c=h.exec(s))!==null&&y<i.depth;){if(y+=1,!i.plainObjects&&au.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;m.push(c[1])}if(c){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");m.push("["+s.slice(c.index)+"]")}return dx(m,e,i,n)}},px=function(t){if(!t)return Wt;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Wt.charset:t.charset,i=typeof t.duplicates>"u"?Wt.duplicates:t.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Wt.allowDots:!!t.allowDots;return{allowDots:n,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Wt.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Wt.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Wt.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Wt.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Wt.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Wt.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Wt.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Wt.decoder,delimiter:typeof t.delimiter=="string"||Pn.isRegExp(t.delimiter)?t.delimiter:Wt.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Wt.depth,duplicates:i,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Wt.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Wt.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Wt.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:Wt.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Wt.strictNullHandling}},mx=function(r,t){var e=px(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?{__proto__:null}:{};for(var i=typeof r=="string"?cx(r,e):r,n=e.plainObjects?{__proto__:null}:{},s=Object.keys(i),l=0;l<s.length;++l){var h=s[l],c=fx(h,i[h],e,typeof r=="string");n=Pn.merge(n,c,e)}return e.allowSparse===!0?n:Pn.compact(n)},gx=ax,yx=mx,vx=Ku,_x={formats:vx,parse:yx,stringify:gx},xx=I0;function Hr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var bx=/^([a-z0-9.+-]+:)/i,wx=/:[0-9]*$/,Tx=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Ax=["<",">",'"',"`"," ","\r",`
`,"	"],Sx=["{","}","|","\\","^","`"].concat(Ax),ou=["'"].concat(Sx),Ff=["%","/","?",";","#"].concat(ou),kf=["/","?","#"],Ex=255,Of=/^[+a-z0-9A-Z_-]{0,63}$/,Ix=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Cx={javascript:!0,"javascript:":!0},lu={javascript:!0,"javascript:":!0},An={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},hu=_x;function Rx(r,t,e){if(r&&typeof r=="object"&&r instanceof Hr)return r;var i=new Hr;return i.parse(r,t,e),i}Hr.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",s=r.split(n),l=/\\/g;s[0]=s[0].replace(l,"/"),r=s.join(n);var h=r;if(h=h.trim(),!e&&r.split("#").length===1){var c=Tx.exec(h);if(c)return this.path=h,this.href=h,this.pathname=c[1],c[2]?(this.search=c[2],t?this.query=hu.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=bx.exec(h);if(d){d=d[0];var m=d.toLowerCase();this.protocol=m,h=h.substr(d.length)}if(e||d||h.match(/^\/\/[^@/]+@[^@/]+/)){var y=h.substr(0,2)==="//";y&&!(d&&lu[d])&&(h=h.substr(2),this.slashes=!0)}if(!lu[d]&&(y||d&&!An[d])){for(var g=-1,_=0;_<kf.length;_++){var x=h.indexOf(kf[_]);x!==-1&&(g===-1||x<g)&&(g=x)}var b,T;g===-1?T=h.lastIndexOf("@"):T=h.lastIndexOf("@",g),T!==-1&&(b=h.slice(0,T),h=h.slice(T+1),this.auth=decodeURIComponent(b)),g=-1;for(var _=0;_<Ff.length;_++){var x=h.indexOf(Ff[_]);x!==-1&&(g===-1||x<g)&&(g=x)}g===-1&&(g=h.length),this.host=h.slice(0,g),h=h.slice(g),this.parseHost(),this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S)for(var C=this.hostname.split(/\./),_=0,A=C.length;_<A;_++){var I=C[_];if(I&&!I.match(Of)){for(var U="",W=0,j=I.length;W<j;W++)I.charCodeAt(W)>127?U+="x":U+=I[W];if(!U.match(Of)){var G=C.slice(0,_),q=C.slice(_+1),it=I.match(Ix);it&&(G.push(it[1]),q.unshift(it[2])),q.length&&(h="/"+q.join(".")+h),this.hostname=G.join(".");break}}}this.hostname.length>Ex?this.hostname="":this.hostname=this.hostname.toLowerCase(),S||(this.hostname=xx.toASCII(this.hostname));var mt=this.port?":"+this.port:"",J=this.hostname||"";this.host=J+mt,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),h[0]!=="/"&&(h="/"+h))}if(!Cx[m])for(var _=0,A=ou.length;_<A;_++){var F=ou[_];if(h.indexOf(F)!==-1){var V=encodeURIComponent(F);V===F&&(V=escape(F)),h=h.split(F).join(V)}}var nt=h.indexOf("#");nt!==-1&&(this.hash=h.substr(nt),h=h.slice(0,nt));var ft=h.indexOf("?");if(ft!==-1?(this.search=h.substr(ft),this.query=h.substr(ft+1),t&&(this.query=hu.parse(this.query)),h=h.slice(0,ft)):t&&(this.search="",this.query={}),h&&(this.pathname=h),An[m]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var mt=this.pathname||"",ot=this.search||"";this.path=mt+ot}return this.href=this.format(),this};Hr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=hu.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var l=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||An[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),l&&l.charAt(0)!=="?"&&(l="?"+l),e=e.replace(/[?#]/g,function(h){return encodeURIComponent(h)}),l=l.replace("#","%23"),t+n+e+l+i};Hr.prototype.resolve=function(r){return this.resolveObject(Rx(r,!1,!0)).format()};Hr.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new Hr;t.parse(r,!1,!0),r=t}for(var e=new Hr,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];e[s]=this[s]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var l=Object.keys(r),h=0;h<l.length;h++){var c=l[h];c!=="protocol"&&(e[c]=r[c])}return An[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!An[r.protocol]){for(var d=Object.keys(r),m=0;m<d.length;m++){var y=d[m];e[y]=r[y]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!lu[r.protocol]){for(var A=(r.pathname||"").split("/");A.length&&!(r.host=A.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),A[0]!==""&&A.unshift(""),A.length<2&&A.unshift(""),e.pathname=A.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var g=e.pathname||"",_=e.search||"";e.path=g+_}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var x=e.pathname&&e.pathname.charAt(0)==="/",b=r.host||r.pathname&&r.pathname.charAt(0)==="/",T=b||x||e.host&&r.pathname,S=T,C=e.pathname&&e.pathname.split("/")||[],A=r.pathname&&r.pathname.split("/")||[],I=e.protocol&&!An[e.protocol];if(I&&(e.hostname="",e.port=null,e.host&&(C[0]===""?C[0]=e.host:C.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(A[0]===""?A[0]=r.host:A.unshift(r.host)),r.host=null),T=T&&(A[0]===""||C[0]==="")),b)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,C=A;else if(A.length)C||(C=[]),C.pop(),C=C.concat(A),e.search=r.search,e.query=r.query;else if(r.search!=null){if(I){e.host=C.shift(),e.hostname=e.host;var U=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;U&&(e.auth=U.shift(),e.hostname=U.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!C.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var W=C.slice(-1)[0],j=(e.host||r.host||C.length>1)&&(W==="."||W==="..")||W==="",G=0,q=C.length;q>=0;q--)W=C[q],W==="."?C.splice(q,1):W===".."?(C.splice(q,1),G++):G&&(C.splice(q,1),G--);if(!T&&!S)for(;G--;G)C.unshift("..");T&&C[0]!==""&&(!C[0]||C[0].charAt(0)!=="/")&&C.unshift(""),j&&C.join("/").substr(-1)!=="/"&&C.push("");var it=C[0]===""||C[0]&&C[0].charAt(0)==="/";if(I){e.hostname=it?"":C.length?C.shift():"",e.host=e.hostname;var U=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;U&&(e.auth=U.shift(),e.hostname=U.shift(),e.host=e.hostname)}return T=T||e.host&&C.length,T&&!it&&C.unshift(""),C.length>0?e.pathname=C.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};Hr.prototype.parseHost=function(){var r=this.host,t=wx.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};const Bf={};function It(r,t,e=3){if(Bf[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),Bf[t]=!0}function tr(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function ns(r){return r.split("?")[0].split("#")[0]}function Px(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Nx(r,t,e){return r.replace(new RegExp(Px(t),"g"),e)}function Mx(r,t){let e="",i=0,n=-1,s=0,l=-1;for(let h=0;h<=r.length;++h){if(h<r.length)l=r.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(n===h-1||s===1))if(n!==h-1&&s===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const c=e.lastIndexOf("/");if(c!==e.length-1){c===-1?(e="",i=0):(e=e.slice(0,c),i=e.length-1-e.lastIndexOf("/")),n=h,s=0;continue}}else if(e.length===2||e.length===1){e="",i=0,n=h,s=0;continue}}}else e.length>0?e+=`/${r.slice(n+1,h)}`:e=r.slice(n+1,h),i=h-n-1;n=h,s=0}else l===46&&s!==-1?++s:s=-1}return e}const Ye={toPosix(r){return Nx(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){tr(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(tr(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=ns(this.toPosix(t??lt.ADAPTER.getBaseUrl())),n=ns(this.toPosix(e??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?Ye.join(n,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(tr(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=Mx(r),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return tr(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(tr(i),i.length>0)if(t===void 0)t=i;else{const n=r[e-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(tr(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,n=!0;const s=this.getProtocol(r),l=r;r=r.slice(s.length);for(let h=r.length-1;h>=1;--h)if(t=r.charCodeAt(h),t===47){if(!n){i=h;break}}else n=!1;return i===-1?e?"/":this.isUrl(l)?s+r:s:e&&i===1?"//":s+r.slice(0,i)},rootname(r){tr(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){tr(r),t&&tr(t),r=ns(this.toPosix(r));let e=0,i=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let l=t.length-1,h=-1;for(s=r.length-1;s>=0;--s){const c=r.charCodeAt(s);if(c===47){if(!n){e=s+1;break}}else h===-1&&(n=!1,h=s+1),l>=0&&(c===t.charCodeAt(l)?--l===-1&&(i=s):(l=-1,i=h))}return e===i?i=h:i===-1&&(i=r.length),r.slice(e,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!n){e=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(e,i)},extname(r){tr(r),r=ns(this.toPosix(r));let t=-1,e=0,i=-1,n=!0,s=0;for(let l=r.length-1;l>=0;--l){const h=r.charCodeAt(l);if(h===47){if(!n){e=l+1;break}continue}i===-1&&(n=!1,i=l+1),h===46?t===-1?t=l:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){tr(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=ns(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let n;t.root=this.rootname(r),i||this.hasProtocol(r)?n=1:n=0;let s=-1,l=0,h=-1,c=!0,d=r.length-1,m=0;for(;d>=n;--d){if(e=r.charCodeAt(d),e===47){if(!c){l=d+1;break}continue}h===-1&&(c=!1,h=d+1),e===46?s===-1?s=d:m!==1&&(m=1):s!==-1&&(m=-1)}return s===-1||h===-1||m===0||m===1&&s===h-1&&s===l+1?h!==-1&&(l===0&&i?t.base=t.name=r.slice(1,h):t.base=t.name=r.slice(l,h)):(l===0&&i?(t.name=r.slice(1,s),t.base=r.slice(1,h)):(t.name=r.slice(l,s),t.base=r.slice(l,h)),t.ext=r.slice(s,h)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let Th;async function Fx(){return Th??(Th=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return Ve.UNPACK;const t=await new Promise(l=>{const h=document.createElement("video");h.onloadeddata=()=>l(h),h.onerror=()=>l(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!t)return Ve.UNPACK;const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t);const n=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,n),r.deleteFramebuffer(i),r.deleteTexture(e),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),n[0]<=n[3]?Ve.PMA:Ve.UNPACK})()),Th}let Ah;function kx(){return typeof Ah>"u"&&(Ah=function(){var t;const r={stencil:!0,failIfMajorPerformanceCaveat:lt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!lt.ADAPTER.getWebGLRenderingContext())return!1;const e=lt.ADAPTER.createCanvas();let i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);const n=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),Ah}var Ox={grad:.9,turn:360,rad:360/(2*Math.PI)},Or=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},he=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},Xe=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},mm=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Lf=function(r){return{r:Xe(r.r,0,255),g:Xe(r.g,0,255),b:Xe(r.b,0,255),a:Xe(r.a)}},Sh=function(r){return{r:he(r.r),g:he(r.g),b:he(r.b),a:he(r.a,3)}},Bx=/^#([0-9a-f]{3,8})$/i,Ra=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},gm=function(r){var t=r.r,e=r.g,i=r.b,n=r.a,s=Math.max(t,e,i),l=s-Math.min(t,e,i),h=l?s===t?(e-i)/l:s===e?2+(i-t)/l:4+(t-e)/l:0;return{h:60*(h<0?h+6:h),s:s?l/s*100:0,v:s/255*100,a:n}},ym=function(r){var t=r.h,e=r.s,i=r.v,n=r.a;t=t/360*6,e/=100,i/=100;var s=Math.floor(t),l=i*(1-e),h=i*(1-(t-s)*e),c=i*(1-(1-t+s)*e),d=s%6;return{r:255*[i,h,l,l,c,i][d],g:255*[c,i,i,h,l,l][d],b:255*[l,l,c,i,i,h][d],a:n}},Df=function(r){return{h:mm(r.h),s:Xe(r.s,0,100),l:Xe(r.l,0,100),a:Xe(r.a)}},Uf=function(r){return{h:he(r.h),s:he(r.s),l:he(r.l),a:he(r.a,3)}},Gf=function(r){return ym((e=(t=r).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},_s=function(r){return{h:(t=gm(r)).h,s:(n=(200-(e=t.s))*(i=t.v)/100)>0&&n<200?e*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,e,i,n},Lx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Dx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ux=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Gx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uu={string:[[function(r){var t=Bx.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?he(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?he(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=Ux.exec(r)||Gx.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:Lf({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=Lx.exec(r)||Dx.exec(r);if(!t)return null;var e,i,n=Df({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(Ox[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Gf(n)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,i=r.b,n=r.a,s=n===void 0?1:n;return Or(t)&&Or(e)&&Or(i)?Lf({r:Number(t),g:Number(e),b:Number(i),a:Number(s)}):null},"rgb"],[function(r){var t=r.h,e=r.s,i=r.l,n=r.a,s=n===void 0?1:n;if(!Or(t)||!Or(e)||!Or(i))return null;var l=Df({h:Number(t),s:Number(e),l:Number(i),a:Number(s)});return Gf(l)},"hsl"],[function(r){var t=r.h,e=r.s,i=r.v,n=r.a,s=n===void 0?1:n;if(!Or(t)||!Or(e)||!Or(i))return null;var l=function(h){return{h:mm(h.h),s:Xe(h.s,0,100),v:Xe(h.v,0,100),a:Xe(h.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(s)});return ym(l)},"hsv"]]},zf=function(r,t){for(var e=0;e<t.length;e++){var i=t[e][0](r);if(i)return[i,t[e][1]]}return[null,void 0]},zx=function(r){return typeof r=="string"?zf(r.trim(),uu.string):typeof r=="object"&&r!==null?zf(r,uu.object):[null,void 0]},Eh=function(r,t){var e=_s(r);return{h:e.h,s:Xe(e.s+100*t,0,100),l:e.l,a:e.a}},Ih=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Hf=function(r,t){var e=_s(r);return{h:e.h,s:e.s,l:Xe(e.l+100*t,0,100),a:e.a}},cu=function(){function r(t){this.parsed=zx(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return he(Ih(this.rgba),2)},r.prototype.isDark=function(){return Ih(this.rgba)<.5},r.prototype.isLight=function(){return Ih(this.rgba)>=.5},r.prototype.toHex=function(){return t=Sh(this.rgba),e=t.r,i=t.g,n=t.b,l=(s=t.a)<1?Ra(he(255*s)):"","#"+Ra(e)+Ra(i)+Ra(n)+l;var t,e,i,n,s,l},r.prototype.toRgb=function(){return Sh(this.rgba)},r.prototype.toRgbString=function(){return t=Sh(this.rgba),e=t.r,i=t.g,n=t.b,(s=t.a)<1?"rgba("+e+", "+i+", "+n+", "+s+")":"rgb("+e+", "+i+", "+n+")";var t,e,i,n,s},r.prototype.toHsl=function(){return Uf(_s(this.rgba))},r.prototype.toHslString=function(){return t=Uf(_s(this.rgba)),e=t.h,i=t.s,n=t.l,(s=t.a)<1?"hsla("+e+", "+i+"%, "+n+"%, "+s+")":"hsl("+e+", "+i+"%, "+n+"%)";var t,e,i,n,s},r.prototype.toHsv=function(){return t=gm(this.rgba),{h:he(t.h),s:he(t.s),v:he(t.v),a:he(t.a,3)};var t},r.prototype.invert=function(){return vr({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),vr(Eh(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),vr(Eh(this.rgba,-t))},r.prototype.grayscale=function(){return vr(Eh(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),vr(Hf(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),vr(Hf(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?vr({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):he(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=_s(this.rgba);return typeof t=="number"?vr({h:t,s:e.s,l:e.l,a:e.a}):he(e.h)},r.prototype.isEqual=function(t){return this.toHex()===vr(t).toHex()},r}(),vr=function(r){return r instanceof cu?r:new cu(r)},$f=[],Hx=function(r){r.forEach(function(t){$f.indexOf(t)<0&&(t(cu,uu),$f.push(t))})};function $x(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var n in e)i[e[n]]=n;var s={};r.prototype.toName=function(l){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,c,d=i[this.toHex()];if(d)return d;if(l!=null&&l.closest){var m=this.toRgb(),y=1/0,g="black";if(!s.length)for(var _ in e)s[_]=new r(e[_]).toRgb();for(var x in e){var b=(h=m,c=s[x],Math.pow(h.r-c.r,2)+Math.pow(h.g-c.g,2)+Math.pow(h.b-c.b,2));b<y&&(y=b,g=x)}return g}},t.string.push([function(l){var h=l.toLowerCase(),c=h==="transparent"?"#0000":e[h];return c?new r(c).toRgb():null},"name"])}Hx([$x]);const fn=class Qa{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Qa)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((n,s)=>n===e[s]);if(t!==null&&e!==null){const n=Object.keys(t),s=Object.keys(e);return n.length!==s.length?!1:n.every(l=>t[l]===e[l])}return t===e}toRgba(){const[t,e,i,n]=this._components;return{r:t,g:e,b:i,a:n}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,n]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(n*255),t}toRgbArray(t){t=t??[];const[e,i,n]=this._components;return t[0]=e,t[1]=i,t[2]=n,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,n,s]=Qa.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return e&&(i=i*t+.5|0,n=n*t+.5|0,s=s*t+.5|0),(t*255<<24)+(i<<16)+(n<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,i,n]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(n*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,i,n,s]=this._components;return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t}normalize(t){let e,i,n,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const l=t;e=(l>>16&255)/255,i=(l>>8&255)/255,n=(l&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,n,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,n,s=255]=t,e/=255,i/=255,n/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=Qa.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const l=vr(t);l.isValid()&&({r:e,g:i,b:n,a:s}=l.rgba,e/=255,i/=255,n/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((n,s)=>{t[s]=Math.min(Math.max(n,e),i)}),t)}};fn.shared=new fn,fn.temp=new fn,fn.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Xt=fn;function jx(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[dt.NORMAL_NPM]=dt.NORMAL,r[dt.ADD_NPM]=dt.ADD,r[dt.SCREEN_NPM]=dt.SCREEN,t[dt.NORMAL]=dt.NORMAL_NPM,t[dt.ADD]=dt.ADD_NPM,t[dt.SCREEN]=dt.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}const vm=jx();function _m(r,t){return vm[t?1:0][r]}function Vx(r,t=null){const e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,n=0;i<e;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function xm(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function ho(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function jf(r){return!(r&r-1)&&!!r}function Vf(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function xs(r,t,e){const i=r.length;let n;if(t>=i||e===0)return;e=t+e>i?i-t:e;const s=i-e;for(n=t;n<s;++n)r[n]=r[n+e];r.length=s}function vn(r){return r===0?0:r<0?-1:1}let Wx=0;function Ss(){return++Wx}const du=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};du.EMPTY=new du(0,0,0,0);let Wf=du;const Xf={},_r=Object.create(null),ri=Object.create(null);function Yf(r,t,e){for(let i=0,n=4*e*t;i<t;++i,n+=4)if(r[n+3]!==0)return!1;return!0}function qf(r,t,e,i,n){const s=4*t;for(let l=i,h=i*s+4*e;l<=n;++l,h+=s)if(r[h+3]!==0)return!1;return!0}function Xx(r){const{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const n=i.getImageData(0,0,t,e).data;let s=0,l=0,h=t-1,c=e-1;for(;l<e&&Yf(n,t,l);)++l;if(l===e)return Wf.EMPTY;for(;Yf(n,t,c);)--c;for(;qf(n,t,s,l,c);)++s;for(;qf(n,t,h,l,c);)--h;return++h,++c,new Wf(s,l,h,c)}function Yx(r){const t=Xx(r),{width:e,height:i}=t;let n=null;if(!t.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:n}}function qx(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(r,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function Nn(r,t=1){var i;const e=(i=lt.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var et=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(et||{});const fu=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Qf=(r,t)=>fu(r).priority??t,ct={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(fu).forEach(t=>{t.type.forEach(e=>{var i,n;return(n=(i=this._removeHandlers)[e])==null?void 0:n.call(i,t)})}),this},add(...r){return r.map(fu).forEach(t=>{t.type.forEach(e=>{var s,l;const i=this._addHandlers,n=this._queue;i[e]?(s=i[e])==null||s.call(i,t):(n[e]=n[e]||[],(l=n[e])==null||l.push(t))})}),this},handle(r,t,e){var l;const i=this._addHandlers,n=this._removeHandlers;if(i[r]||n[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,n[r]=e;const s=this._queue;return s[r]&&((l=s[r])==null||l.forEach(h=>t(h)),delete s[r]),this},handleByMap(r,t){return this.handle(r,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((n,s)=>Qf(s,e)-Qf(n,e)))},i=>{const n=t.indexOf(i.ref);n!==-1&&t.splice(n,1)})}};class Qx{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Kx=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Zx(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function Jx(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=Kx.replace(/%forloop%/gi,Zx(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}const Ch=0,Rh=1,Ph=2,Nh=3,Mh=4,Fh=5;class Rr{constructor(){this.data=0,this.blendMode=dt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Ch)}set blend(t){!!(this.data&1<<Ch)!==t&&(this.data^=1<<Ch)}get offsets(){return!!(this.data&1<<Rh)}set offsets(t){!!(this.data&1<<Rh)!==t&&(this.data^=1<<Rh)}get culling(){return!!(this.data&1<<Ph)}set culling(t){!!(this.data&1<<Ph)!==t&&(this.data^=1<<Ph)}get depthTest(){return!!(this.data&1<<Nh)}set depthTest(t){!!(this.data&1<<Nh)!==t&&(this.data^=1<<Nh)}get depthMask(){return!!(this.data&1<<Fh)}set depthMask(t){!!(this.data&1<<Fh)!==t&&(this.data^=1<<Fh)}get clockwiseFrontFace(){return!!(this.data&1<<Mh)}set clockwiseFrontFace(t){!!(this.data&1<<Mh)!==t&&(this.data^=1<<Mh)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==dt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new Rr;return t.depthTest=!1,t.blend=!0,t}}Rr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const pu=[];function bm(r,t){if(!r)return null;let e="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=pu.length-1;i>=0;--i){const n=pu[i];if(n.test&&n.test(r,e))return new n(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class sr{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,n,s,l,h,c){if(arguments.length>8)throw new Error("max arguments reached");const{name:d,items:m}=this;this._aliasCount++;for(let y=0,g=m.length;y<g;y++)m[y][d](t,e,i,n,s,l,h,c);return m===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(sr.prototype,{dispatch:{value:sr.prototype.emit},run:{value:sr.prototype.emit}});class Es{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new sr("setRealSize"),this.onUpdate=new sr("update"),this.onError=new sr("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class wm extends Es{constructor(t,e){const{width:i,height:n}=e||{};if(!i||!n)throw new Error("BufferResource width or height invalid");super(i,n),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,i){const n=t.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Ve.UNPACK);const s=e.realWidth,l=e.realHeight;return i.width===s&&i.height===l?n.texSubImage2D(e.target,0,0,0,s,l,e.format,i.type,this.data):(i.width=s,i.height=l,n.texImage2D(e.target,0,i.internalFormat,s,l,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const tb={scaleMode:Dr.NEAREST,alphaMode:Ve.NPM},mu=class pn extends Eo{constructor(t=null,e=null){super(),e=Object.assign({},pn.defaultOptions,e);const{alphaMode:i,mipmap:n,anisotropicLevel:s,scaleMode:l,width:h,height:c,wrapMode:d,format:m,type:y,target:g,resolution:_,resourceOptions:x}=e;t&&!(t instanceof Es)&&(t=bm(t,x),t.internal=!0),this.resolution=_||lt.RESOLUTION,this.width=Math.round((h||0)*this.resolution)/this.resolution,this.height=Math.round((c||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=d,this._scaleMode=l,this.format=m,this.type=y,this.target=g,this.alphaMode=i,this.uid=Ss(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=h>0&&c>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=jf(this.realWidth)&&jf(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ri[this.cacheId],delete _r[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),pn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=lt.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else{if(!t._pixiId){const h=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${h}_${Ss()}`}s=t._pixiId}let l=ri[s];if(n&&i&&!l)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return l||(l=new pn(t,e),l.cacheId=s,pn.addToCache(l,s)),l}static fromBuffer(t,e,i,n){t=t||new Float32Array(e*i*4);const s=new wm(t,{width:e,height:i,...n==null?void 0:n.resourceOptions});let l,h;return t instanceof Float32Array?(l=Y.RGBA,h=pt.FLOAT):t instanceof Int32Array?(l=Y.RGBA_INTEGER,h=pt.INT):t instanceof Uint32Array?(l=Y.RGBA_INTEGER,h=pt.UNSIGNED_INT):t instanceof Int16Array?(l=Y.RGBA_INTEGER,h=pt.SHORT):t instanceof Uint16Array?(l=Y.RGBA_INTEGER,h=pt.UNSIGNED_SHORT):t instanceof Int8Array?(l=Y.RGBA,h=pt.BYTE):(l=Y.RGBA,h=pt.UNSIGNED_BYTE),s.internal=!0,new pn(s,Object.assign({},tb,{type:h,format:l},n))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),ri[e]&&ri[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),ri[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=ri[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete ri[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete ri[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};mu.defaultOptions={mipmap:hi.POW2,anisotropicLevel:0,scaleMode:Dr.LINEAR,wrapMode:zr.CLAMP,alphaMode:Ve.UNPACK,target:wn.TEXTURE_2D,format:Y.RGBA,type:pt.UNSIGNED_BYTE},mu._globalBatch=0;let wt=mu;class gu{constructor(){this.texArray=null,this.blend=0,this.type=ir.TRIANGLES,this.start=0,this.size=0,this.data=null}}let eb=0;class Kt{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=eb++,this.disposeRunner=new sr("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Sr.ELEMENT_ARRAY_BUFFER:Sr.ARRAY_BUFFER}get index(){return this.type===Sr.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Kt(t)}}class uo{constructor(t,e=0,i=!1,n=pt.FLOAT,s,l,h,c=1){this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=l,this.instance=h,this.divisor=c}destroy(){this.buffer=null}static from(t,e,i,n,s){return new uo(t,e,i,n,s)}}const rb={Float32Array,Uint32Array,Int32Array,Uint8Array};function ib(r,t){let e=0,i=0;const n={};for(let c=0;c<r.length;c++)i+=t[c],e+=r[c].length;const s=new ArrayBuffer(e*4);let l=null,h=0;for(let c=0;c<r.length;c++){const d=t[c],m=r[c],y=xm(m);n[y]||(n[y]=new rb[y](s)),l=n[y];for(let g=0;g<m.length;g++){const _=(g/d|0)*i+h,x=g%d;l[_+x]=m[g]}h+=d}return new Float32Array(s)}const Kf={5126:4,5123:2,5121:1};let nb=0;const sb={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ui{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=nb++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new sr("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,n=!1,s,l,h,c=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Kt||(e instanceof Array&&(e=new Float32Array(e)),e=new Kt(e));const d=t.split("|");if(d.length>1){for(let y=0;y<d.length;y++)this.addAttribute(d[y],e,i,n,s);return this}let m=this.buffers.indexOf(e);return m===-1&&(this.buffers.push(e),m=this.buffers.length-1),this.attributes[t]=new uo(m,i,n,s,l,h,c),this.instanced=this.instanced||c,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Kt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Kt(t)),t.type=Sr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new Kt;let n;for(n in this.attributes){const s=this.attributes[n],l=this.buffers[s.buffer];t.push(l.data),e.push(s.size*Kf[s.type]/4),s.buffer=0}for(i.data=ib(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new ui;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new Kt(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new uo(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Sr.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new ui,i=[],n=[],s=[];let l;for(let h=0;h<t.length;h++){l=t[h];for(let c=0;c<l.buffers.length;c++)n[c]=n[c]||0,n[c]+=l.buffers[c].data.length,s[c]=0}for(let h=0;h<l.buffers.length;h++)i[h]=new sb[xm(l.buffers[h].data)](n[h]),e.buffers[h]=new Kt(i[h]);for(let h=0;h<t.length;h++){l=t[h];for(let c=0;c<l.buffers.length;c++)i[c].set(l.buffers[c].data,s[c]),s[c]+=l.buffers[c].data.length}if(e.attributes=l.attributes,l.indexBuffer){e.indexBuffer=e.buffers[l.buffers.indexOf(l.indexBuffer)],e.indexBuffer.type=Sr.ELEMENT_ARRAY_BUFFER;let h=0,c=0,d=0,m=0;for(let y=0;y<l.buffers.length;y++)if(l.buffers[y]!==l.indexBuffer){m=y;break}for(const y in l.attributes){const g=l.attributes[y];(g.buffer|0)===m&&(c+=g.size*Kf[g.type]/4)}for(let y=0;y<t.length;y++){const g=t[y].indexBuffer.data;for(let _=0;_<g.length;_++)e.indexBuffer.data[_+d]+=h;h+=t[y].buffers[m].data.length/c,d+=g.length}}return e}}class Tm extends ui{constructor(t=!1){super(),this._buffer=new Kt(null,t,!1),this._indexBuffer=new Kt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,pt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,pt.FLOAT).addAttribute("aColor",this._buffer,4,!0,pt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,pt.FLOAT).addIndex(this._indexBuffer)}}const co=Math.PI*2,ab=180/Math.PI,ob=Math.PI/180;var fe=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(fe||{});class Bt{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Bt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}Bt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Pa=[new Bt,new Bt,new Bt,new Bt];class Tt{constructor(t=0,e=0,i=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=fe.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Tt(0,0,0,0)}clone(){return new Tt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const G=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=G)return!1;const q=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>q}const i=this.left,n=this.right,s=this.top,l=this.bottom;if(n<=i||l<=s)return!1;const h=Pa[0].set(t.left,t.top),c=Pa[1].set(t.left,t.bottom),d=Pa[2].set(t.right,t.top),m=Pa[3].set(t.right,t.bottom);if(d.x<=h.x||c.y<=h.y)return!1;const y=Math.sign(e.a*e.d-e.b*e.c);if(y===0||(e.apply(h,h),e.apply(c,c),e.apply(d,d),e.apply(m,m),Math.max(h.x,c.x,d.x,m.x)<=i||Math.min(h.x,c.x,d.x,m.x)>=n||Math.max(h.y,c.y,d.y,m.y)<=s||Math.min(h.y,c.y,d.y,m.y)>=l))return!1;const g=y*(c.y-h.y),_=y*(h.x-c.x),x=g*i+_*s,b=g*n+_*s,T=g*i+_*l,S=g*n+_*l;if(Math.max(x,b,T,S)<=g*h.x+_*h.y||Math.min(x,b,T,S)>=g*m.x+_*m.y)return!1;const C=y*(h.y-d.y),A=y*(d.x-h.x),I=C*i+A*s,U=C*n+A*s,W=C*i+A*l,j=C*n+A*l;return!(Math.max(I,U,W,j)<=C*h.x+A*h.y||Math.min(I,U,W,j)>=C*m.x+A*m.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this}}Tt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Fo{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=fe.CIRC}clone(){return new Fo(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=i}getBounds(){return new Tt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Fo.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class ko{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.width=i,this.height=n,this.type=fe.ELIP}clone(){return new ko(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1}getBounds(){return new Tt(this.x-this.width,this.y-this.height,this.width,this.height)}}ko.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Di{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let n=0,s=e.length;n<s;n++)i.push(e[n].x,e[n].y);e=i}this.points=e,this.type=fe.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Di(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const n=this.points.length/2;for(let s=0,l=n-1;s<n;l=s++){const h=this.points[s*2],c=this.points[s*2+1],d=this.points[l*2],m=this.points[l*2+1];c>e!=m>e&&t<(d-h)*((e-c)/(m-c))+h&&(i=!i)}return i}}Di.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,t)=>`${r}, ${t}`,"")}]`};class Oo{constructor(t=0,e=0,i=0,n=0,s=20){this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=fe.RREC}clone(){return new Oo(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let n=t-(this.x+i),s=e-(this.y+i);const l=i*i;if(n*n+s*s<=l||(n=t-(this.x+this.width-i),n*n+s*s<=l)||(s=e-(this.y+this.height-i),n*n+s*s<=l)||(n=t-(this.x+i),n*n+s*s<=l))return!0}return!1}}Oo.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class $t{constructor(t=1,e=0,i=0,n=1,s=0,l=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=l}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,n,s,l){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=l,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Bt;const i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e}applyInverse(t,e){e=e||new Bt;const i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,l=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=l*e-this.ty*i,this.ty=l*i+this.ty*e,this}append(t){const e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this}setTransform(t,e,i,n,s,l,h,c,d){return this.a=Math.cos(h+d)*s,this.b=Math.sin(h+d)*s,this.c=-Math.sin(h-c)*l,this.d=Math.cos(h-c)*l,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,n=this.c,s=this.d,l=t.pivot,h=-Math.atan2(-n,s),c=Math.atan2(i,e),d=Math.abs(h+c);return d<1e-5||Math.abs(co-d)<1e-5?(t.rotation=c,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=c),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(l.x*e+l.y*n),t.position.y=this.ty+(l.x*i+l.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,l=t*n-e*i;return this.a=n/l,this.b=-e/l,this.c=-i/l,this.d=t/l,this.tx=(i*this.ty-n*s)/l,this.ty=-(t*this.ty-e*s)/l,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new $t;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new $t}static get TEMP_MATRIX(){return new $t}}$t.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Ci=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ri=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Pi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ni=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],yu=[],Am=[],Na=Math.sign;function lb(){for(let r=0;r<16;r++){const t=[];yu.push(t);for(let e=0;e<16;e++){const i=Na(Ci[r]*Ci[e]+Pi[r]*Ri[e]),n=Na(Ri[r]*Ci[e]+Ni[r]*Ri[e]),s=Na(Ci[r]*Pi[e]+Pi[r]*Ni[e]),l=Na(Ri[r]*Pi[e]+Ni[r]*Ni[e]);for(let h=0;h<16;h++)if(Ci[h]===i&&Ri[h]===n&&Pi[h]===s&&Ni[h]===l){t.push(h);break}}}for(let r=0;r<16;r++){const t=new $t;t.set(Ci[r],Ri[r],Pi[r],Ni[r],0,0),Am.push(t)}}lb();const zt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Ci[r],uY:r=>Ri[r],vX:r=>Pi[r],vY:r=>Ni[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>yu[r][t],sub:(r,t)=>yu[r][zt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?zt.S:zt.N:Math.abs(t)*2<=Math.abs(r)?r>0?zt.E:zt.W:t>0?r>0?zt.SE:zt.SW:r>0?zt.NE:zt.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const n=Am[zt.inv(t)];n.tx=e,n.ty=i,r.append(n)}};class Ar{constructor(t,e,i=0,n=0){this._x=i,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Ar(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}Ar.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const vu=class{constructor(){this.worldTransform=new $t,this.localTransform=new $t,this.position=new Ar(this.onChange,this,0,0),this.scale=new Ar(this.onChange,this,1,1),this.pivot=new Ar(this.onChange,this,0,0),this.skew=new Ar(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};vu.IDENTITY=new vu;let Bo=vu;Bo.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var hb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,ub=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Zf(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function kh(r){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Sm(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return kh(2*t);case"bvec3":return kh(3*t);case"bvec4":return kh(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Sn=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,t)=>r.type==="vec3"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],cb={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},db={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function fb(r,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in r.uniforms){const s=t[n];if(!s){((i=r.uniforms[n])==null?void 0:i.group)===!0&&(r.uniforms[n].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const l=r.uniforms[n];let h=!1;for(let c=0;c<Sn.length;c++)if(Sn[c].test(s,l)){e.push(Sn[c].code(n,l)),h=!0;break}if(!h){const c=(s.size===1&&!s.isArray?cb:db)[s.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${c};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const Em={};let hn=Em;function pb(){if(hn===Em||hn!=null&&hn.isContextLost()){const r=lt.ADAPTER.createCanvas();let t;lt.PREFER_ENV>=zi.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),hn=t}return hn}let Ma;function mb(){if(!Ma){Ma=We.MEDIUM;const r=pb();if(r&&r.getShaderPrecisionFormat){const t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);t&&(Ma=t.precision?We.HIGH:We.MEDIUM)}}return Ma}function Jf(r,t){const e=r.getShaderSource(t).split(`
`).map((d,m)=>`${m}: ${d}`),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},l=n.map(d=>parseFloat(d.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(d=>d&&!s[d]?(s[d]=!0,!0):!1),h=[""];l.forEach(d=>{e[d-1]=`%c${e[d-1]}%c`,h.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const c=e.join(`
`);h[0]=c,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...h),console.groupEnd()}function gb(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||Jf(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||Jf(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}const yb={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Im(r){return yb[r]}let Fa=null;const tp={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Cm(r,t){if(!Fa){const e=Object.keys(tp);Fa={};for(let i=0;i<e.length;++i){const n=e[i];Fa[r[n]]=tp[n]}}return Fa[t]}function ep(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===We.HIGH&&e!==We.HIGH&&(i=We.MEDIUM),`precision ${i} float;
${r}`}else if(e!==We.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let ss;function vb(){if(typeof ss=="boolean")return ss;try{ss=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ss=!1}return ss}let _b=0;const ka={},_u=class mn{constructor(t,e,i="pixi-shader",n={}){this.extra={},this.id=_b++,this.vertexSrc=t||mn.defaultVertexSrc,this.fragmentSrc=e||mn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),ka[i]?(ka[i]++,i+=`-${ka[i]}`):ka[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=ep(this.vertexSrc,mn.defaultVertexPrecision,We.HIGH),this.fragmentSrc=ep(this.fragmentSrc,mn.defaultFragmentPrecision,mb())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return ub}static get defaultFragmentSrc(){return hb}static from(t,e,i){const n=t+e;let s=Xf[n];return s||(Xf[n]=s=new mn(t,e,i)),s}};_u.defaultVertexPrecision=We.HIGH,_u.defaultFragmentPrecision=gn.apple.device?We.HIGH:We.MEDIUM;let Ur=_u,xb=0;class ar{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=xb++,this.static=!!e,this.ubo=!!i,t instanceof Kt?(this.buffer=t,this.buffer.type=Sr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Kt(new Float32Array(1)),this.buffer.type=Sr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new ar(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new ar(t,e,i)}static uboFrom(t,e){return new ar(t,e??!0,!0)}}class Er{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof ar?this.uniformGroup=e:this.uniformGroup=new ar(e):this.uniformGroup=new ar({}),this.disposeRunner=new sr("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const n=e.uniforms[i];if(n.group===!0&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const n=Ur.from(t,e);return new Er(n,i)}}class bb{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let s=0;s<t;s++)i[s]=s;this.defaultGroupCache[t]=ar.from({uSamplers:i},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ur(this.vertexSrc,n)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new $t,default:this.defaultGroupCache[t]};return new Er(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class xu{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function wb(){return!gn.apple.device}function Tb(r){let t=!0;const e=lt.ADAPTER.getNavigator();if(gn.tablet||gn.phone){if(gn.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(gn.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}class Lo{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var Ab=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Sb=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const hs=class er extends Lo{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=Tm,this.vertexSize=6,this.state=Rr.for2d(),this.size=er.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??Tb(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??wb(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return It("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return Sb}static get defaultFragmentTemplate(){return Ab}setShaderGenerator({vertex:t=er.defaultVertexSrc,fragment:e=er.defaultFragmentTemplate}={}){this.shaderGenerator=new bb(t,e)}contextChange(){const t=this.renderer.gl;lt.PREFER_ENV===zi.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),er.defaultMaxTextures),this.maxTextures=Jx(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=er,i=this.size/4,n=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new gu);for(;e.length<n;)e.push(new xu);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,i=er._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,l=this.renderer.textureGC.count;let h=++wt._globalBatch,c=0,d=i[0],m=0;n.copyBoundTextures(s,e);for(let y=0;y<this._bufferSize;++y){const g=t[y];t[y]=null,g._batchEnabled!==h&&(d.count>=e&&(n.boundArray(d,s,h,e),this.buildDrawCalls(d,m,y),m=y,d=i[++c],++h),g._batchEnabled=h,g.touched=l,d.elements[d.count++]=g)}d.count>0&&(n.boundArray(d,s,h,e),this.buildDrawCalls(d,m,this._bufferSize),++c,++h);for(let y=0;y<s.length;y++)s[y]=null;wt._globalBatch=h}buildDrawCalls(t,e,i){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:l,vertexSize:h}=this,c=er._drawCallPool;let d=this._dcIndex,m=this._aIndex,y=this._iIndex,g=c[d];g.start=this._iIndex,g.texArray=t;for(let _=e;_<i;++_){const x=n[_],b=x._texture.baseTexture,T=vm[b.alphaMode?1:0][x.blendMode];n[_]=null,e<_&&g.blend!==T&&(g.size=y-g.start,e=_,g=c[++d],g.texArray=t,g.start=y),this.packInterleavedGeometry(x,s,l,m,y),m+=x.vertexData.length/2*h,y+=x.indices.length,g.blend=T}e<i&&(g.size=y-g.start,++d),this._dcIndex=d,this._aIndex=m,this._iIndex=y}bindAndClearTexArray(t){const e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;er.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:i}=this.renderer,n=er._drawCallPool;let s=null;for(let l=0;l<t;l++){const{texArray:h,type:c,size:d,start:m,blend:y}=n[l];s!==h&&(s=h,this.bindAndClearTexArray(h)),this.state.blendMode=y,i.set(this.state),e.drawElements(c,d,e.UNSIGNED_SHORT,m*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),er.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=ho(Math.ceil(t/8)),i=Vf(e),n=e*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new Qx(n*this.vertexSize*4)),s}getIndexBuffer(t){const e=ho(Math.ceil(t/12)),i=Vf(e),n=e*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(n)),s}packInterleavedGeometry(t,e,i,n,s){const{uint32View:l,float32View:h}=e,c=n/this.vertexSize,d=t.uvs,m=t.indices,y=t.vertexData,g=t._texture.baseTexture._batchLocation,_=Math.min(t.worldAlpha,1),x=Xt.shared.setValue(t._tintRGB).toPremultiplied(_,t._texture.baseTexture.alphaMode>0);for(let b=0;b<y.length;b+=2)h[n++]=y[b],h[n++]=y[b+1],h[n++]=d[b],h[n++]=d[b+1],l[n++]=x,h[n++]=g;for(let b=0;b<m.length;b++)i[s++]=c+m[b]}};hs.defaultBatchSize=4096,hs.extension={name:"batch",type:et.RendererPlugin},hs._drawCallPool=[],hs._textureArrayPool=[];let Mi=hs;ct.add(Mi);var Eb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Ib=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const bu=class us extends Er{constructor(t,e,i){const n=Ur.from(t||us.defaultVertexSrc,e||us.defaultFragmentSrc);super(n,i),this.padding=0,this.resolution=us.defaultResolution,this.multisample=us.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Rr}apply(t,e,i,n,s){t.applyFilter(this,e,i,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return Ib}static get defaultFragmentSrc(){return Eb}};bu.defaultResolution=1,bu.defaultMultisample=Jt.NONE;let _n=bu;class fo{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Xt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:i,backgroundAlpha:n}=t,s=i??e;s!==void 0&&(this.color=s),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}fo.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},fo.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"background"};ct.add(fo);class Rm{constructor(t){this.renderer=t,this.emptyRenderer=new Lo(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,i,n){const{elements:s,ids:l,count:h}=t;let c=0;for(let d=0;d<h;d++){const m=s[d],y=m._batchLocation;if(y>=0&&y<n&&e[y]===m){l[d]=y;continue}for(;c<n;){const g=e[c];if(g&&g._batchEnabled===i&&g._batchLocation===c){c++;continue}l[d]=c,m._batchLocation=c,e[c]=m;break}}}destroy(){this.renderer=null}}Rm.extension={type:et.RendererSystem,name:"batch"};ct.add(Rm);let rp=0;class po{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=rp++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=rp++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(lt.PREFER_ENV>=zi.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}po.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},po.extension={type:et.RendererSystem,name:"context"};ct.add(po);class wu{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new sr("disposeFramebuffer"),this.multisample=Jt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new wt(null,{scaleMode:Dr.NEAREST,resolution:1,mipmap:hi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new wt(null,{scaleMode:Dr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:hi.OFF,format:Y.DEPTH_COMPONENT,type:pt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Pm extends wt{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];t={width:e,height:i,scaleMode:n,resolution:s}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=Jt.NONE),super(null,t),this.mipmap=hi.OFF,this.valid=!0,this._clear=new Xt([0,0,0,0]),this.framebuffer=new wu(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class $r extends Es{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,n=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(i,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=qx(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,n){const s=t.gl,l=e.realWidth,h=e.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Ve.UNPACK),!this.noSubImage&&e.target===s.TEXTURE_2D&&i.width===l&&i.height===h?s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,n):(i.width=l,i.height=h,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}class Nm extends $r{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;$r.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??lt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=l=>{i(l),this.onError.emit(l)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(n=>n.blob()).then(n=>e(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Ve.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let n=!0;const s=e._glTextures;for(const l in s){const h=s[l];if(h!==i&&h.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Zu{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const n=e.width,s=e.height;if(i){const l=t.width/2/n,h=t.height/2/s,c=t.x/n+l,d=t.y/s+h;i=zt.add(i,zt.NW),this.x0=c+l*zt.uX(i),this.y0=d+h*zt.uY(i),i=zt.add(i,2),this.x1=c+l*zt.uX(i),this.y1=d+h*zt.uY(i),i=zt.add(i,2),this.x2=c+l*zt.uX(i),this.y2=d+h*zt.uY(i),i=zt.add(i,2),this.x3=c+l*zt.uX(i),this.y3=d+h*zt.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Zu.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const ip=new Zu;function Oa(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class tt extends Eo{constructor(t,e,i,n,s,l,h){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Tt(0,0,1,1)),t instanceof tt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=ip,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=l?new Bt(l.x,l.y):new Bt(0,0),this.defaultBorders=h,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&_r[e.url]&&tt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,tt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var n;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new tt(this.baseTexture,!this.noFrame&&t,e,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===ip&&(this._uvs=new Zu),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=lt.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else if(t instanceof wt){if(!t.cacheId){const h=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${h}-${Ss()}`,wt.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const h=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${h}_${Ss()}`}s=t._pixiId}let l=_r[s];if(n&&i&&!l)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!l&&!(t instanceof wt)?(e.resolution||(e.resolution=Nn(t)),l=new tt(new wt(t,e)),l.baseTexture.cacheId=s,wt.addToCache(l.baseTexture,s),tt.addToCache(l,s)):!l&&t instanceof wt&&(l=new tt(t),tt.addToCache(l,s)),l}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),n=tt.from(t,Object.assign({resourceOptions:i},e),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,i,n){return new tt(wt.fromBuffer(t,e,i,n))}static fromLoader(t,e,i,n){const s=new wt(t,Object.assign({scaleMode:wt.defaultOptions.scaleMode,resolution:Nn(e)},n)),{resource:l}=s;l instanceof Nm&&(l.url=e);const h=new tt(s);return i||(i=e),wt.addToCache(h.baseTexture,i),tt.addToCache(h,i),i!==e&&(wt.addToCache(h.baseTexture,e),tt.addToCache(h,e)),h.baseTexture.valid?Promise.resolve(h):new Promise(c=>{h.baseTexture.once("loaded",()=>c(h))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),_r[e]&&_r[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),_r[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=_r[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete _r[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)_r[t.textureCacheIds[e]]===t&&delete _r[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:n,height:s}=t,l=e+n>this.baseTexture.width,h=i+s>this.baseTexture.height;if(l||h){const c=l&&h?"and":"or",d=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,m=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${d} ${c} ${m}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return tt._EMPTY||(tt._EMPTY=new tt(new wt),Oa(tt._EMPTY),Oa(tt._EMPTY.baseTexture)),tt._EMPTY}static get WHITE(){if(!tt._WHITE){const t=lt.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),tt._WHITE=new tt(wt.from(t)),Oa(tt._WHITE),Oa(tt._WHITE.baseTexture)}return tt._WHITE}}class Do extends tt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const n=this.baseTexture.resolution,s=Math.round(t*n)/n,l=Math.round(e*n)/n;this.valid=s>0&&l>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=l,i&&this.baseTexture.resize(s,l),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Do(new Pm(t))}}class Mm{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=Jt.NONE){const n=new Pm(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new Do(n)}getOptimalTexture(t,e,i=1,n=Jt.NONE){let s;t=Math.max(Math.ceil(t*i-1e-6),1),e=Math.max(Math.ceil(e*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ho(t),e=ho(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let l=this.texturePool[s].pop();return l||(l=this.createTexture(t,e,n)),l.filterPoolKey=s,l.setResolution(i),l}getFilterTexture(t,e,i){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||Jt.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Mm.SCREEN_KEY=-1;class Cb extends ui{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Fm extends ui{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Kt(this.vertices),this.uvBuffer=new Kt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Rb{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Jt.NONE,this.sourceFrame=new Tt,this.destinationFrame=new Tt,this.bindingSourceFrame=new Tt,this.bindingDestinationFrame=new Tt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ba=[new Bt,new Bt,new Bt,new Bt],Oh=new $t;class km{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Mm,this.statePool=[],this.quad=new Cb,this.quadUv=new Fm,this.tempRect=new Tt,this.activeState={},this.globalUniforms=new ar({outputFrame:new Tt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new Rb,l=i.renderTexture;let h,c;if(l.current){const T=l.current;h=T.resolution,c=T.multisample}else h=i.resolution,c=i.multisample;let d=e[0].resolution||h,m=e[0].multisample??c,y=e[0].padding,g=e[0].autoFit,_=e[0].legacy??!0;for(let T=1;T<e.length;T++){const S=e[T];d=Math.min(d,S.resolution||h),m=Math.min(m,S.multisample??c),y=this.useMaxPadding?Math.max(y,S.padding):y+S.padding,g=g&&S.autoFit,_=_||(S.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=l.current),n.push(s),s.resolution=d,s.multisample=m,s.legacy=_,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(y);const x=this.tempRect.copyFrom(l.sourceFrame);i.projection.transform&&this.transformAABB(Oh.copyFrom(i.projection.transform).invert(),x),g?(s.sourceFrame.fit(x),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(x)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,l.current?l.current.resolution:i.resolution,l.sourceFrame,l.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,d,m),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const b=this.tempRect;b.x=0,b.y=0,b.width=s.sourceFrame.width,b.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(l.sourceFrame),s.bindingDestinationFrame.copyFrom(l.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,l.bind(s.renderTexture,s.sourceFrame,b),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const s=n.inputSize,l=n.inputPixel,h=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],l[0]=Math.round(s[0]*e.resolution),l[1]=Math.round(s[1]*e.resolution),l[2]=1/l[0],l[3]=1/l[1],h[0]=.5*l[2],h[1]=.5*l[3],h[2]=e.sourceFrame.width*s[2]-.5*l[2],h[3]=e.sourceFrame.height*s[3]-.5*l[3],e.legacy){const d=n.filterArea;d[0]=e.destinationFrame.width,d[1]=e.destinationFrame.height,d[2]=e.sourceFrame.x,d[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const c=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,c.renderTexture,Ii.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let d=e.renderTexture,m=this.getOptimalFilterTexture(d.width,d.height,e.resolution);m.filterFrame=d.filterFrame;let y=0;for(y=0;y<i.length-1;++y){y===1&&e.multisample>1&&(m=this.getOptimalFilterTexture(d.width,d.height,e.resolution),m.filterFrame=d.filterFrame),i[y].apply(this,d,m,Ii.CLEAR,e);const g=d;d=m,m=g}i[y].apply(this,d,c.renderTexture,Ii.BLEND,e),y>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(d),this.returnFilterTexture(m)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=Ii.CLEAR){const{renderTexture:i,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const l=this.tempRect;l.x=0,l.y=0,l.width=t.filterFrame.width,l.height=t.filterFrame.height,i.bind(t,t.filterFrame,l)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(e===Ii.CLEAR||e===Ii.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,n){const s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(ir.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(ir.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:n}=this.activeState,{orig:s}=e._texture,l=t.set(n.width,0,0,n.height,i.x,i.y),h=e.worldTransform.copyTo($t.TEMP_MATRIX);return h.invert(),l.prepend(h),l.scale(1/s.width,1/s.height),l.translate(e.anchor.x,e.anchor.y),l}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,n=Jt.NONE){return this.texturePool.getOptimalTexture(t,e,i,n)}getFilterTexture(t,e,i){if(typeof t=="number"){const s=t;t=e,e=s}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||Jt.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=Ba[0],n=Ba[1],s=Ba[2],l=Ba[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),l.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(l,l);const h=Math.min(i.x,n.x,s.x,l.x),c=Math.min(i.y,n.y,s.y,l.y),d=Math.max(i.x,n.x,s.x,l.x),m=Math.max(i.y,n.y,s.y,l.y);e.x=h,e.y=c,e.width=d-h,e.height=m-c}roundFrame(t,e,i,n,s){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(s){const{a:l,b:h,c,d}=s;if((Math.abs(h)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(l)>1e-4||Math.abs(d)>1e-4))return}s=s?Oh.copyFrom(s):Oh.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)}}}km.extension={type:et.RendererSystem,name:"filter"};ct.add(km);class Pb{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Jt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Nb=new Tt;class Om{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new wu(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Tt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;lt.PREFER_ENV===zi.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=n=>e.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:n}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let l=0;l<t.colorTextures.length;l++){const h=t.colorTextures[l];this.renderer.texture.unbind(h.parentTextureArray||h)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const l=e.width>>i,h=e.height>>i,c=l/e.width;this.setViewport(e.x*c,e.y*c,l,h)}else{const l=t.width>>i,h=t.height>>i;this.setViewport(0,0,l,h)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,n){const s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,n,s=Kh.COLOR|Kh.DEPTH){const{gl:l}=this;l.clearColor(t,e,i,n),l.clear(s)}initFramebuffer(t){const{gl:e}=this,i=new Pb(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];if(i.stencil){e.bindRenderbuffer(e.RENDERBUFFER,i.stencil);let l;this.renderer.context.webGLVersion===1?l=e.DEPTH_STENCIL:t.depth&&t.stencil?l=e.DEPTH24_STENCIL8:t.depth?l=e.DEPTH_COMPONENT24:l=e.STENCIL_INDEX8,i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,l,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,l,t.width,t.height)}const n=t.colorTextures;let s=n.length;e.drawBuffers||(s=Math.min(s,1));for(let l=0;l<s;l++){const h=n[l],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),l===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let l=s.length;i.drawBuffers||(l=Math.min(l,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer():n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const h=[];for(let c=0;c<l;c++){const d=s[c],m=d.parentTextureArray||d;this.renderer.texture.bind(m,0),c===0&&n.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,m._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+c,d.target,m._glTextures[this.CONTEXT_UID].texture,e),h.push(i.COLOR_ATTACHMENT0+c))}if(h.length>1&&i.drawBuffers(h),t.depthTexture&&this.writeDepthTexture){const c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){n.stencil=n.stencil||i.createRenderbuffer();let c,d;this.renderer.context.webGLVersion===1?(c=i.DEPTH_STENCIL_ATTACHMENT,d=i.DEPTH_STENCIL):t.depth&&t.stencil?(c=i.DEPTH_STENCIL_ATTACHMENT,d=i.DEPTH24_STENCIL8):t.depth?(c=i.DEPTH_ATTACHMENT,d=i.DEPTH_COMPONENT24):(c=i.STENCIL_ATTACHMENT,d=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,d,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,d,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,c,i.RENDERBUFFER,n.stencil)}else n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=Jt.NONE;if(t<=1||e===null)return i;for(let n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=Jt.NONE),i}blit(t,e,i){const{current:n,renderer:s,gl:l,CONTEXT_UID:h}=this;if(s.context.webGLVersion!==2||!n)return;const c=n.glFramebuffers[h];if(!c)return;if(!t){if(!c.msaaBuffer)return;const m=n.colorTextures[0];if(!m)return;c.blitFramebuffer||(c.blitFramebuffer=new wu(n.width,n.height),c.blitFramebuffer.addColorTexture(0,m)),t=c.blitFramebuffer,t.colorTextures[0]!==m&&(t.colorTextures[0]=m,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=Nb,e.width=n.width,e.height=n.height),i||(i=e);const d=e.width===i.width&&e.height===i.height;this.bind(t),l.bindFramebuffer(l.READ_FRAMEBUFFER,c.framebuffer),l.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,l.COLOR_BUFFER_BIT,d?l.NEAREST:l.LINEAR),l.bindFramebuffer(l.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const i=t.width,n=t.height,s=this.gl,l=e.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,l);let h,c;this.renderer.context.webGLVersion===1?(h=s.DEPTH_STENCIL_ATTACHMENT,c=s.DEPTH_STENCIL):t.depth?(h=s.DEPTH_STENCIL_ATTACHMENT,c=s.DEPTH24_STENCIL8):(h=s.STENCIL_ATTACHMENT,c=s.STENCIL_INDEX8),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,c,i,n):s.renderbufferStorage(s.RENDERBUFFER,c,i,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,h,s.RENDERBUFFER,l)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Tt}destroy(){this.renderer=null}}Om.extension={type:et.RendererSystem,name:"framebuffer"};ct.add(Om);const Bh={5126:4,5123:2,5121:1};class Bm{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;lt.PREFER_ENV===zi.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=n=>i.bindVertexArrayOES(n),t.deleteVertexArray=n=>i.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(n,s)=>i.vertexAttribDivisorANGLE(n,s),t.drawElementsInstanced=(n,s,l,h,c)=>i.drawElementsInstancedANGLE(n,s,l,h,c),t.drawArraysInstanced=(n,s,l,h)=>i.drawArraysInstancedANGLE(n,s,l,h)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const l=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==l&&(this._activeVao=l,this.hasVao?i.bindVertexArray(l):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const n=t.buffers[i];e.update(n)}}checkCompatibility(t,e){const i=t.attributes,n=e.attributeData;for(const s in n)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,e){const i=t.attributes,n=e.attributeData,s=["g",t.id];for(const l in i)n[l]&&s.push(l,n[l].location);return s.join("-")}initGeometryVao(t,e,i=!0){const n=this.gl,s=this.CONTEXT_UID,l=this.renderer.buffer,h=e.program;h.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,h);const c=this.getSignature(t,h),d=t.glVertexArrayObjects[this.CONTEXT_UID];let m=d[c];if(m)return d[h.id]=m,m;const y=t.buffers,g=t.attributes,_={},x={};for(const b in y)_[b]=0,x[b]=0;for(const b in g)!g[b].size&&h.attributeData[b]?g[b].size=h.attributeData[b].size:g[b].size||console.warn(`PIXI Geometry attribute '${b}' size cannot be determined (likely the bound shader does not have the attribute)`),_[g[b].buffer]+=g[b].size*Bh[g[b].type];for(const b in g){const T=g[b],S=T.size;T.stride===void 0&&(_[T.buffer]===S*Bh[T.type]?T.stride=0:T.stride=_[T.buffer]),T.start===void 0&&(T.start=x[T.buffer],x[T.buffer]+=S*Bh[T.type])}m=n.createVertexArray(),n.bindVertexArray(m);for(let b=0;b<y.length;b++){const T=y[b];l.bind(T),i&&T._glBuffers[s].refCount++}return this.activateVao(t,h),d[h.id]=m,d[c]=m,n.bindVertexArray(null),l.unbind(Sr.ARRAY_BUFFER),m}disposeGeometry(t,e){var h;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,l=(h=this.renderer)==null?void 0:h.buffer;if(t.disposeRunner.remove(this),!!i){if(l)for(let c=0;c<s.length;c++){const d=s[c]._glBuffers[this.CONTEXT_UID];d&&(d.refCount--,d.refCount===0&&!e&&l.dispose(s[c],e))}if(!e){for(const c in i)if(c[0]==="g"){const d=i[c];this._activeVao===d&&this.unbind(),n.deleteVertexArray(d)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,l=t.buffers,h=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let c=null;for(const d in h){const m=h[d],y=l[m.buffer],g=y._glBuffers[n];if(e.attributeData[d]){c!==g&&(s.bind(y),c=g);const _=e.attributeData[d].location;if(i.enableVertexAttribArray(_),i.vertexAttribPointer(_,m.size,m.type||i.FLOAT,m.normalized,m.stride,m.start),m.instance)if(this.hasInstance)i.vertexAttribDivisor(_,m.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,n){const{gl:s}=this,l=this._activeGeometry;if(l.indexBuffer){const h=l.indexBuffer.data.BYTES_PER_ELEMENT,c=h===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;h===2||h===4&&this.canUseUInt32ElementIndex?l.instanced?s.drawElementsInstanced(t,e||l.indexBuffer.data.length,c,(i||0)*h,n||1):s.drawElements(t,e||l.indexBuffer.data.length,c,(i||0)*h):console.warn("unsupported index buffer type: uint32")}else l.instanced?s.drawArraysInstanced(t,i,e||l.getSize(),n||1):s.drawArrays(t,i,e||l.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Bm.extension={type:et.RendererSystem,name:"geometry"};ct.add(Bm);const np=new $t;class Ju{constructor(t,e){this._texture=t,this.mapCoord=new $t,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let n=0;n<t.length;n+=2){const s=t[n],l=t[n+1];e[n]=s*i.a+l*i.c+i.tx,e[n+1]=s*i.b+l*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=e.orig,s=e.trim;s&&(np.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(np));const l=e.baseTexture,h=this.uClampFrame,c=this.clampMargin/l.resolution,d=this.clampOffset;return h[0]=(e._frame.x+c+d)/l.width,h[1]=(e._frame.y+c+d)/l.height,h[2]=(e._frame.x+e._frame.width-c+d)/l.width,h[3]=(e._frame.y+e._frame.height-c+d)/l.height,this.uClampOffset[0]=d/l.realWidth,this.uClampOffset[1]=d/l.realHeight,this.isSimple=e._frame.width===l.width&&e._frame.height===l.height&&e.rotate===0,!0}}var Mb=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Fb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class kb extends _n{constructor(t,e,i){let n=null;typeof t!="string"&&e===void 0&&i===void 0&&(n=t,t=void 0,e=void 0,i=void 0),super(t||Fb,e||Mb,i),this.maskSprite=n,this.maskMatrix=new $t}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,n){const s=this._maskSprite,l=s._texture;l.valid&&(l.uvMatrix||(l.uvMatrix=new Ju(l,0)),l.uvMatrix.update(),this.uniforms.npmAlpha=l.baseTexture.alphaMode?0:1,this.uniforms.mask=l,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(l.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=l.uvMatrix.uClampFrame,t.applyFilter(this,e,i,n))}}class Ob{constructor(t=null){this.type=re.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=_n.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=re.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Lm{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const s=this.maskDataPool.pop()||new Ob;s.pooled=!0,s.maskObject=e,i=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==re.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case re.SCISSOR:this.renderer.scissor.push(i);break;case re.STENCIL:this.renderer.stencil.push(i);break;case re.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case re.COLOR:this.pushColorMask(i);break}i.type===re.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case re.SCISSOR:this.renderer.scissor.pop(e);break;case re.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case re.SPRITE:this.popSpriteMask(e);break;case re.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===re.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=re.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=re.SCISSOR:t.type=re.STENCIL:t.type=re.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new kb])),n[0].resolution=t.resolution,n[0].multisample=t.multisample,n[0].maskSprite=e;const s=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=s,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}Lm.extension={type:et.RendererSystem,name:"mask"};ct.add(Lm);class Dm{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const sp=new $t,ap=[],Um=class Ka extends Dm{constructor(t){super(t),this.glConst=lt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:i}=t,{renderer:n}=this,s=n.renderTexture,l=i.getBounds(!0,ap.pop()??new Tt);this.roundFrameToPixels(l,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),e&&l.fit(e),t._scissorRectLocal=l}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:i,c:n,d:s}=t;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(s)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Ka.isMatrixRotated(e.worldTransform)||Ka.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,n,s){Ka.isMatrixRotated(s)||(s=s?sp.copyFrom(s):sp.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&ap.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};Um.extension={type:et.RendererSystem,name:"scissor"};let Bb=Um;ct.add(Bb);class Gm extends Dm{constructor(t){super(t),this.glConst=lt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(t._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;n!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(i._colorMask=n,e.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Gm.extension={type:et.RendererSystem,name:"stencil"};ct.add(Gm);class zm{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return It("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return It("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return It("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}zm.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"_plugin"};ct.add(zm);class Hm{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new $t,this.transform=null}update(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,e,i,n){const s=this.projectionMatrix,l=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=l*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-l-e.y*s.d}setTransform(t){}destroy(){this.renderer=null}}Hm.extension={type:et.RendererSystem,name:"projection"};ct.add(Hm);const Lb=new Bo,op=new Tt;class $m{constructor(t){this.renderer=t,this._tempMatrix=new $t}generateTexture(t,e){const{region:i,...n}=e||{},s=(i==null?void 0:i.copyTo(op))||t.getLocalBounds(op,!0),l=n.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/l),s.height=Math.max(s.height,1/l),n.width=s.width,n.height=s.height,n.resolution=l,n.multisample??(n.multisample=this.renderer.multisample);const h=Do.create(n);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const c=t.transform;return t.transform=Lb,this.renderer.render(t,{renderTexture:h,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=c,h}destroy(){}}$m.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"textureGenerator"};ct.add($m);const Ai=new Tt,as=new Tt;class jm{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Tt,this.destinationFrame=new Tt,this.viewportFrame=new Tt}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,i){const n=this.renderer;this.current=t;let s,l,h;t?(s=t.baseTexture,h=s.resolution,e||(Ai.width=t.frame.width,Ai.height=t.frame.height,e=Ai),i||(as.x=t.frame.x,as.y=t.frame.y,as.width=e.width,as.height=e.height,i=as),l=s.framebuffer):(h=n.resolution,e||(Ai.width=n._view.screen.width,Ai.height=n._view.screen.height,e=Ai),i||(i=Ai,i.width=e.width,i.height=e.height));const c=this.viewportFrame;c.x=i.x*h,c.y=i.y*h,c.width=i.width*h,c.height=i.height*h,t||(c.y=n.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(l,c),this.renderer.projection.update(i,e,h,!l),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=Xt.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const s=this.destinationFrame,l=this.current?this.current.baseTexture:this.renderer._view.screen,h=s.width!==l.width||s.height!==l.height;if(h){let{x:c,y:d,width:m,height:y}=this.viewportFrame;c=Math.round(c),d=Math.round(d),m=Math.round(m),y=Math.round(y),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(c,d,m,y)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,e),h&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}jm.extension={type:et.RendererSystem,name:"renderTexture"};ct.add(jm);class Db{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Ub(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=t.getActiveAttrib(r,n);if(s.name.startsWith("gl_"))continue;const l=Cm(t,s.type),h={type:l,name:s.name,size:Im(l),location:t.getAttribLocation(r,s.name)};e[s.name]=h}return e}function Gb(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const s=t.getActiveUniform(r,n),l=s.name.replace(/\[.*?\]$/,""),h=!!s.name.match(/\[.*?\]$/),c=Cm(t,s.type);e[l]={name:l,index:n,type:c,size:s.size,isArray:h,value:Sm(c,s.size)}}return e}function zb(r,t){var h;const e=Zf(r,r.VERTEX_SHADER,t.vertexSrc),i=Zf(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i);const s=(h=t.extra)==null?void 0:h.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||gb(r,n,e,i),t.attributeData=Ub(n,r),t.uniformData=Gb(n,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const c=Object.keys(t.attributeData);c.sort((d,m)=>d>m?1:-1);for(let d=0;d<c.length;d++)t.attributeData[c[d]].location=d,r.bindAttribLocation(n,d,c[d]);r.linkProgram(n)}r.deleteShader(e),r.deleteShader(i);const l={};for(const c in t.uniformData){const d=t.uniformData[c];l[c]={location:r.getUniformLocation(n,c),value:Sm(d.type,d.size)}}return new Db(n,l)}function Hb(r,t,e,i,n){e.buffer.update(n)}const $b={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Vm={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function jb(r){const t=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let e=0,i=0,n=0;for(let s=0;s<t.length;s++){const l=t[s];if(e=Vm[l.data.type],l.data.size>1&&(e=Math.max(e,16)*l.data.size),l.dataLen=e,i%e!==0&&i<16){const h=i%e%16;i+=h,n+=h}i+e>16?(n=Math.ceil(n/16)*16,l.offset=n,n+=e,i=e):(l.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function Vb(r,t){const e=[];for(const i in r)t[i]&&e.push(t[i]);return e.sort((i,n)=>i.index-n.index),e}function Wb(r,t){if(!r.autoManage)return{size:0,syncFunc:Hb};const e=Vb(r.uniforms,t),{uboElements:i,size:n}=jb(e),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let l=0;l<i.length;l++){const h=i[l],c=r.uniforms[h.data.name],d=h.data.name;let m=!1;for(let y=0;y<Sn.length;y++){const g=Sn[y];if(g.codeUbo&&g.test(h.data,c)){s.push(`offset = ${h.offset/4};`,Sn[y].codeUbo(h.data.name,c)),m=!0;break}}if(!m)if(h.data.size>1){const y=Im(h.data.type),g=Math.max(Vm[h.data.type]/16,1),_=y/g,x=(4-_%4)%4;s.push(`
                cv = ud.${d}.value;
                v = uv.${d};
                offset = ${h.offset/4};

                t = 0;

                for(var i=0; i < ${h.data.size*g}; i++)
                {
                    for(var j = 0; j < ${_}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${x};
                }

                `)}else{const y=$b[h.data.type];s.push(`
                cv = ud.${d}.value;
                v = uv.${d};
                offset = ${h.offset/4};
                ${y};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let Xb=0;const La={textureCount:0,uboCount:0};class Wm{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Xb++}systemCheck(){if(!vb())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(La.textureCount=0,La.uboCount=0,this.syncUniformGroup(t.uniformGroup,La)),n}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=fb(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,La,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const l=this.getSignature(t,this.shader.program.uniformData,"ubo");let h=this._uboCache[l];if(h||(h=this._uboCache[l]=Wb(t,this.shader.program.uniformData)),t.autoManage){const c=new Float32Array(h.size/4);t.buffer.update(c)}return e.uniformGroups[t.id]=h.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const n=t.uniforms,s=[`${i}-`];for(const l in n)s.push(l),e[l]&&s.push(e[l].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,n=zb(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Wm.extension={type:et.RendererSystem,name:"shader"};ct.add(Wm);class mo{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.2 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}mo.defaultOptions={hello:!1},mo.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"startup"};ct.add(mo);function Yb(r,t=[]){return t[dt.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.ADD]=[r.ONE,r.ONE],t[dt.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.NONE]=[0,0],t[dt.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[dt.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[dt.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[dt.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[dt.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[dt.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[dt.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[dt.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[dt.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[dt.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[dt.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}const qb=0,Qb=1,Kb=2,Zb=3,Jb=4,t1=5,Xm=class Tu{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=dt.NONE,this._blendEq=!1,this.map=[],this.map[qb]=this.setBlend,this.map[Qb]=this.setOffset,this.map[Kb]=this.setCullFace,this.map[Zb]=this.setDepthTest,this.map[Jb]=this.setFrontFace,this.map[t1]=this.setDepthMask,this.checks=[],this.defaultState=new Rr,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=Yb(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Tu.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Tu.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};Xm.extension={type:et.RendererSystem,name:"state"};let e1=Xm;ct.add(e1);class r1 extends Eo{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(n=>t.systems[n]),i=[...e,...Object.keys(t.systems).filter(n=>!e.includes(n))];for(const n of i)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(e=>{this.runners[e]=new sr(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const n in this.runners)this.runners[n].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(n=>{const s=i.find(l=>this._systemsHash[l]===n);n[t.name](e[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const cs=class Za{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Za.defaultMaxIdle,this.checkCountMax=Za.defaultCheckCountMax,this.mode=Za.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==ju.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let i=!1;for(let n=0;n<e.length;n++){const s=e[n];s.resource&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){let n=0;for(let s=0;s<e.length;s++)e[s]!==null&&(e[n++]=e[s]);e.length=n}}unload(t){const e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};cs.defaultMode=ju.AUTO,cs.defaultMaxIdle=60*60,cs.defaultCheckCountMax=60*10,cs.extension={type:et.RendererSystem,name:"textureGC"};let Fi=cs;ct.add(Fi);class Lh{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=pt.UNSIGNED_BYTE,this.internalFormat=Y.RGBA,this.samplerType=0}}function i1(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[r.RGB]:Q.FLOAT,[r.RGBA]:Q.FLOAT,[r.ALPHA]:Q.FLOAT,[r.LUMINANCE]:Q.FLOAT,[r.LUMINANCE_ALPHA]:Q.FLOAT,[r.R8]:Q.FLOAT,[r.R8_SNORM]:Q.FLOAT,[r.RG8]:Q.FLOAT,[r.RG8_SNORM]:Q.FLOAT,[r.RGB8]:Q.FLOAT,[r.RGB8_SNORM]:Q.FLOAT,[r.RGB565]:Q.FLOAT,[r.RGBA4]:Q.FLOAT,[r.RGB5_A1]:Q.FLOAT,[r.RGBA8]:Q.FLOAT,[r.RGBA8_SNORM]:Q.FLOAT,[r.RGB10_A2]:Q.FLOAT,[r.RGB10_A2UI]:Q.FLOAT,[r.SRGB8]:Q.FLOAT,[r.SRGB8_ALPHA8]:Q.FLOAT,[r.R16F]:Q.FLOAT,[r.RG16F]:Q.FLOAT,[r.RGB16F]:Q.FLOAT,[r.RGBA16F]:Q.FLOAT,[r.R32F]:Q.FLOAT,[r.RG32F]:Q.FLOAT,[r.RGB32F]:Q.FLOAT,[r.RGBA32F]:Q.FLOAT,[r.R11F_G11F_B10F]:Q.FLOAT,[r.RGB9_E5]:Q.FLOAT,[r.R8I]:Q.INT,[r.R8UI]:Q.UINT,[r.R16I]:Q.INT,[r.R16UI]:Q.UINT,[r.R32I]:Q.INT,[r.R32UI]:Q.UINT,[r.RG8I]:Q.INT,[r.RG8UI]:Q.UINT,[r.RG16I]:Q.INT,[r.RG16UI]:Q.UINT,[r.RG32I]:Q.INT,[r.RG32UI]:Q.UINT,[r.RGB8I]:Q.INT,[r.RGB8UI]:Q.UINT,[r.RGB16I]:Q.INT,[r.RGB16UI]:Q.UINT,[r.RGB32I]:Q.INT,[r.RGB32UI]:Q.UINT,[r.RGBA8I]:Q.INT,[r.RGBA8UI]:Q.UINT,[r.RGBA16I]:Q.INT,[r.RGBA16UI]:Q.UINT,[r.RGBA32I]:Q.INT,[r.RGBA32UI]:Q.UINT,[r.DEPTH_COMPONENT16]:Q.FLOAT,[r.DEPTH_COMPONENT24]:Q.FLOAT,[r.DEPTH_COMPONENT32F]:Q.FLOAT,[r.DEPTH_STENCIL]:Q.FLOAT,[r.DEPTH24_STENCIL8]:Q.FLOAT,[r.DEPTH32F_STENCIL8]:Q.FLOAT}:t={[r.RGB]:Q.FLOAT,[r.RGBA]:Q.FLOAT,[r.ALPHA]:Q.FLOAT,[r.LUMINANCE]:Q.FLOAT,[r.LUMINANCE_ALPHA]:Q.FLOAT,[r.DEPTH_STENCIL]:Q.FLOAT},t}function n1(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[pt.UNSIGNED_BYTE]:{[Y.RGBA]:r.RGBA8,[Y.RGB]:r.RGB8,[Y.RG]:r.RG8,[Y.RED]:r.R8,[Y.RGBA_INTEGER]:r.RGBA8UI,[Y.RGB_INTEGER]:r.RGB8UI,[Y.RG_INTEGER]:r.RG8UI,[Y.RED_INTEGER]:r.R8UI,[Y.ALPHA]:r.ALPHA,[Y.LUMINANCE]:r.LUMINANCE,[Y.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[pt.BYTE]:{[Y.RGBA]:r.RGBA8_SNORM,[Y.RGB]:r.RGB8_SNORM,[Y.RG]:r.RG8_SNORM,[Y.RED]:r.R8_SNORM,[Y.RGBA_INTEGER]:r.RGBA8I,[Y.RGB_INTEGER]:r.RGB8I,[Y.RG_INTEGER]:r.RG8I,[Y.RED_INTEGER]:r.R8I},[pt.UNSIGNED_SHORT]:{[Y.RGBA_INTEGER]:r.RGBA16UI,[Y.RGB_INTEGER]:r.RGB16UI,[Y.RG_INTEGER]:r.RG16UI,[Y.RED_INTEGER]:r.R16UI,[Y.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[pt.SHORT]:{[Y.RGBA_INTEGER]:r.RGBA16I,[Y.RGB_INTEGER]:r.RGB16I,[Y.RG_INTEGER]:r.RG16I,[Y.RED_INTEGER]:r.R16I},[pt.UNSIGNED_INT]:{[Y.RGBA_INTEGER]:r.RGBA32UI,[Y.RGB_INTEGER]:r.RGB32UI,[Y.RG_INTEGER]:r.RG32UI,[Y.RED_INTEGER]:r.R32UI,[Y.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[pt.INT]:{[Y.RGBA_INTEGER]:r.RGBA32I,[Y.RGB_INTEGER]:r.RGB32I,[Y.RG_INTEGER]:r.RG32I,[Y.RED_INTEGER]:r.R32I},[pt.FLOAT]:{[Y.RGBA]:r.RGBA32F,[Y.RGB]:r.RGB32F,[Y.RG]:r.RG32F,[Y.RED]:r.R32F,[Y.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[pt.HALF_FLOAT]:{[Y.RGBA]:r.RGBA16F,[Y.RGB]:r.RGB16F,[Y.RG]:r.RG16F,[Y.RED]:r.R16F},[pt.UNSIGNED_SHORT_5_6_5]:{[Y.RGB]:r.RGB565},[pt.UNSIGNED_SHORT_4_4_4_4]:{[Y.RGBA]:r.RGBA4},[pt.UNSIGNED_SHORT_5_5_5_1]:{[Y.RGBA]:r.RGB5_A1},[pt.UNSIGNED_INT_2_10_10_10_REV]:{[Y.RGBA]:r.RGB10_A2,[Y.RGBA_INTEGER]:r.RGB10_A2UI},[pt.UNSIGNED_INT_10F_11F_11F_REV]:{[Y.RGB]:r.R11F_G11F_B10F},[pt.UNSIGNED_INT_5_9_9_9_REV]:{[Y.RGB]:r.RGB9_E5},[pt.UNSIGNED_INT_24_8]:{[Y.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[pt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Y.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[pt.UNSIGNED_BYTE]:{[Y.RGBA]:r.RGBA,[Y.RGB]:r.RGB,[Y.ALPHA]:r.ALPHA,[Y.LUMINANCE]:r.LUMINANCE,[Y.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[pt.UNSIGNED_SHORT_5_6_5]:{[Y.RGB]:r.RGB},[pt.UNSIGNED_SHORT_4_4_4_4]:{[Y.RGBA]:r.RGBA},[pt.UNSIGNED_SHORT_5_5_5_1]:{[Y.RGBA]:r.RGBA}},t}class Ym{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new wt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=n1(t),this.samplerTypes=i1(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const i=new Lh(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Lh(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:n}=this;if(i)for(let s=t-1;s>=0;--s){const l=e[s];l&&l._glTextures[n].samplerType!==Q.FLOAT&&this.renderer.texture.unbind(l)}}initTexture(t){const e=new Lh(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??Q.FLOAT,this.webGLVersion===2&&t.type===pt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var n;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(n=t.resource)==null?void 0:n.upload(i,t,e))e.samplerType!==Q.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,l=t.realHeight,h=i.gl;(e.width!==s||e.height!==l||e.dirtyId<0)&&(e.width=s,e.height=l,h.texImage2D(t.target,0,e.internalFormat,s,l,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const n=this.managedTextures.indexOf(t);n!==-1&&xs(this.managedTextures,n,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===hi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=zr.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==hi.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Dr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===Dr.LINEAR){const s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Dr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Dr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}Ym.extension={type:et.RendererSystem,name:"texture"};ct.add(Ym);class qm{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:n}=this;e&&n.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:n}=this,s=e.createTransformFeedback();t._glTransformFeedbacks[n]=s,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s);for(let l=0;l<t.buffers.length;l++){const h=t.buffers[l];h&&(i.buffer.update(h),h._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,l,h._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let l=0;l<t.buffers.length;l++){const h=t.buffers[l];if(!h)continue;const c=h._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!e&&s.dispose(h,e))}i&&(e||n.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}qm.extension={type:et.RendererSystem,name:"transformFeedback"};ct.add(qm);class go{constructor(t){this.renderer=t}init(t){this.screen=new Tt(0,0,t.width,t.height),this.element=t.view||lt.ADAPTER.createCanvas(),this.resolution=t.resolution||lt.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",i,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}go.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},go.extension={type:[et.RendererSystem,et.CanvasRendererSystem],name:"_view"};ct.add(go);lt.PREFER_ENV=zi.WEBGL2;lt.STRICT_TEXTURE_CACHE=!1;lt.RENDER_OPTIONS={...po.defaultOptions,...fo.defaultOptions,...go.defaultOptions,...mo.defaultOptions};Object.defineProperties(lt,{WRAP_MODE:{get(){return wt.defaultOptions.wrapMode},set(r){It("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),wt.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return wt.defaultOptions.scaleMode},set(r){It("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),wt.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return wt.defaultOptions.mipmap},set(r){It("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),wt.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return wt.defaultOptions.anisotropicLevel},set(r){It("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),wt.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return It("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),_n.defaultResolution},set(r){_n.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return It("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),_n.defaultMultisample},set(r){_n.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Mi.defaultMaxTextures},set(r){It("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Mi.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Mi.defaultBatchSize},set(r){It("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Mi.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Mi.canUploadSameBuffer},set(r){It("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Mi.canUploadSameBuffer=r}},GC_MODE:{get(){return Fi.defaultMode},set(r){It("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Fi.defaultMode=r}},GC_MAX_IDLE:{get(){return Fi.defaultMaxIdle},set(r){It("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Fi.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Fi.defaultCheckCountMax},set(r){It("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Fi.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return Ur.defaultVertexPrecision},set(r){It("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ur.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return Ur.defaultFragmentPrecision},set(r){It("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ur.defaultFragmentPrecision=r}}});var Is=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Is||{});class Dh{constructor(t,e=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Qm=class Pe{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Dh(null,null,1/0),this.deltaMS=1/Pe.targetFPMS,this.elapsedMS=1/Pe.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Is.NORMAL){return this._addListener(new Dh(t,e,i))}addOnce(t,e,i=Is.NORMAL){return this._addListener(new Dh(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Pe.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Pe.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Pe._shared){const t=Pe._shared=new Pe;t.autoStart=!0,t._protected=!0}return Pe._shared}static get system(){if(!Pe._system){const t=Pe._system=new Pe;t.autoStart=!0,t._protected=!0}return Pe._system}};Qm.targetFPMS=.06;let Ne=Qm;Object.defineProperties(lt,{TARGET_FPMS:{get(){return Ne.targetFPMS},set(r){It("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ne.targetFPMS=r}}});class Km{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Is.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Ne.shared:new Ne,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}Km.extension=et.Application;ct.add(Km);const Zm=[];ct.handleByList(et.Renderer,Zm);function s1(r){for(const t of Zm)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}class Jm{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=Jt.HIGH?this.multisample=Jt.HIGH:e>=Jt.MEDIUM?this.multisample=Jt.MEDIUM:e>=Jt.LOW?this.multisample=Jt.LOW:this.multisample=Jt.NONE}destroy(){}}Jm.extension={type:et.RendererSystem,name:"_multisample"};ct.add(Jm);class a1{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class tg{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const s=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,s.buffer)}}bindBufferRange(t,e,i){const{gl:n,CONTEXT_UID:s}=this;i=i||0;const l=t._glBuffers[s]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,l.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const s=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,s)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new a1(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}tg.extension={type:et.RendererSystem,name:"buffer"};ct.add(tg);class eg{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let n,s,l,h;if(e&&(n=e.renderTexture,s=e.clear,l=e.transform,h=e.skipUpdateTransform),this.renderingToScreen=!n,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=l,!i.context.isLost){if(n||(this.lastObjectRendered=t),!h){const c=t.enableTempParent();t.updateTransform(),t.disableTempParent(c)}i.renderTexture.bind(n),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),n&&(e.blit&&i.framebuffer.blit(),n.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}eg.extension={type:et.RendererSystem,name:"objectRenderer"};ct.add(eg);const Ja=class Au extends r1{constructor(t){super(),this.type=zp.WEBGL,t=Object.assign({},lt.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ar({projectionMatrix:new $t},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Au.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(It("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=Au.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:kx()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return It("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return It("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return It("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return It("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){It("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return It("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){It("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return It("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};Ja.extension={type:et.Renderer,priority:1},Ja.__plugins={},Ja.__systems={};let tc=Ja;ct.handleByMap(et.RendererPlugin,tc.__plugins);ct.handleByMap(et.RendererSystem,tc.__systems);ct.add(tc);class rg extends Es{constructor(t,e){const{width:i,height:n}=e||{};super(i,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const l=new wt;this.items.push(l),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Es?this.addResourceAt(t[i],i):this.addResourceAt(bm(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:i}=this.items[0];return this.resize(e,i),this.update(),Promise.resolve(this)}),this._load}}class o1 extends rg{constructor(t,e){const{width:i,height:n}=e||{};let s,l;Array.isArray(t)?(s=t,l=t.length):l=t,super(l,{width:i,height:n}),s&&this.initFromArray(s,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=wn.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:n,itemDirtyIds:s,items:l}=this,{gl:h}=t;i.dirtyId<0&&h.texImage3D(h.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,e.format,i.type,null);for(let c=0;c<n;c++){const d=l[c];s[c]<d.dirtyId&&(s[c]=d.dirtyId,d.valid&&h.texSubImage3D(h.TEXTURE_2D_ARRAY,0,0,0,c,d.resource.width,d.resource.height,1,e.format,i.type,d.resource.source))}return!0}}class l1 extends $r{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const ig=class ds extends rg{constructor(t,e){const{width:i,height:n,autoLoad:s,linkBaseTexture:l}=e||{};if(t&&t.length!==ds.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:n});for(let h=0;h<ds.SIDES;h++)this.items[h].target=wn.TEXTURE_CUBE_MAP_POSITIVE_X+h;this.linkBaseTexture=l!==!1,t&&this.initFromArray(t,e),s!==!1&&this.load()}bind(t){super.bind(t),t.target=wn.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=wn.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){const n=this.itemDirtyIds;for(let s=0;s<ds.SIDES;s++){const l=this.items[s];(n[s]<l.dirtyId||i.dirtyId<e.dirtyId)&&(l.valid&&l.resource?(l.resource.upload(t,l,i),n[s]=l.dirtyId):n[s]<-1&&(t.gl.texImage2D(l.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),n[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===ds.SIDES}};ig.SIDES=6;let h1=ig;class xn extends $r{constructor(t,e){e=e||{};let i,n,s;typeof t=="string"?(i=xn.EMPTY,n=t,s=!0):(i=t,n=null,s=!1),super(i),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??s,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await lt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Ve.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return xn._EMPTY=xn._EMPTY??lt.ADAPTER.createCanvas(0,0),xn._EMPTY}}const Su=class to extends $r{constructor(t,e){e=e||{},super(lt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},to.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;$r.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/i*e,s=this._overrideHeight||this._overrideWidth/e*i),n=Math.round(n),s=Math.round(s);const l=this.source;l.width=n,l.height=s,l._pixiId=`canvas_${Ss()}`,l.getContext("2d").drawImage(t,0,0,e,i,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(t){const e=to.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&to.SVG_XML.test(t)}};Su.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Su.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Eu=Su;class u1 extends $r{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const Iu=class Cu extends $r{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const i=document.createElement("video");e.autoLoad!==!1&&i.setAttribute("preload","auto"),e.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),e.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),e.loop===!0&&i.setAttribute("loop",""),e.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const n=t[0].src||t[0];$r.crossOrigin(i,n,e.crossorigin);for(let s=0;s<t.length;++s){const l=document.createElement("source");let{src:h,mime:c}=t[s];if(h=h||t[s],h.startsWith("data:"))c=h.slice(5,h.indexOf(";"));else if(!h.startsWith("blob:")){const d=h.split("?").shift().toLowerCase(),m=d.slice(d.lastIndexOf(".")+1);c=c||Cu.MIME_TYPES[m]||`video/${m}`}l.src=h,c&&(l.type=c),i.appendChild(l)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=Ne.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,i)=>{this.valid?e(this):(this._resolve=e,this._reject=i,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ne.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ne.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ne.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||Cu.TYPES.includes(e)}};Iu.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Iu.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let ng=Iu;pu.push(xn,Nm,l1,ng,u1,Eu,wm,h1,o1);class yo{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Tt.EMPTY:(t=t||new Tt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:n,c:s,d:l,tx:h,ty:c}=t,d=i*e.x+s*e.y+h,m=n*e.x+l*e.y+c;this.minX=Math.min(this.minX,d),this.maxX=Math.max(this.maxX,d),this.minY=Math.min(this.minY,m),this.maxY=Math.max(this.maxY,m)}addQuad(t){let e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,l=t[0],h=t[1];e=l<e?l:e,i=h<i?h:i,n=l>n?l:n,s=h>s?h:s,l=t[2],h=t[3],e=l<e?l:e,i=h<i?h:i,n=l>n?l:n,s=h>s?h:s,l=t[4],h=t[5],e=l<e?l:e,i=h<i?h:i,n=l>n?l:n,s=h>s?h:s,l=t[6],h=t[7],e=l<e?l:e,i=h<i?h:i,n=l>n?l:n,s=h>s?h:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s}addFrame(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)}addFrameMatrix(t,e,i,n,s){const l=t.a,h=t.b,c=t.c,d=t.d,m=t.tx,y=t.ty;let g=this.minX,_=this.minY,x=this.maxX,b=this.maxY,T=l*e+c*i+m,S=h*e+d*i+y;g=T<g?T:g,_=S<_?S:_,x=T>x?T:x,b=S>b?S:b,T=l*n+c*i+m,S=h*n+d*i+y,g=T<g?T:g,_=S<_?S:_,x=T>x?T:x,b=S>b?S:b,T=l*e+c*s+m,S=h*e+d*s+y,g=T<g?T:g,_=S<_?S:_,x=T>x?T:x,b=S>b?S:b,T=l*n+c*s+m,S=h*n+d*s+y,g=T<g?T:g,_=S<_?S:_,x=T>x?T:x,b=S>b?S:b,this.minX=g,this.minY=_,this.maxX=x,this.maxY=b}addVertexData(t,e,i){let n=this.minX,s=this.minY,l=this.maxX,h=this.maxY;for(let c=e;c<i;c+=2){const d=t[c],m=t[c+1];n=d<n?d:n,s=m<s?m:s,l=d>l?d:l,h=m>h?m:h}this.minX=n,this.minY=s,this.maxX=l,this.maxY=h}addVertices(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)}addVerticesMatrix(t,e,i,n,s=0,l=s){const h=t.a,c=t.b,d=t.c,m=t.d,y=t.tx,g=t.ty;let _=this.minX,x=this.minY,b=this.maxX,T=this.maxY;for(let S=i;S<n;S+=2){const C=e[S],A=e[S+1],I=h*C+d*A+y,U=m*A+c*C+g;_=Math.min(_,I-s),b=Math.max(b,I+s),x=Math.min(x,U-l),T=Math.max(T,U+l)}this.minX=_,this.minY=x,this.maxX=b,this.maxY=T}addBounds(t){const e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,l=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=l){const h=this.minX,c=this.minY,d=this.maxX,m=this.maxY;this.minX=i<h?i:h,this.minY=n<c?n:c,this.maxX=s>d?s:d,this.maxY=l>m?l:m}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,l=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=l){const h=this.minX,c=this.minY,d=this.maxX,m=this.maxY;this.minX=i<h?i:h,this.minY=n<c?n:c,this.maxX=s>d?s:d,this.maxY=l>m?l:m}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,n,s,l){t-=s,e-=l,i+=s,n+=l,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class Gi extends Eo{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Bo,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new yo,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const n=e[i];Object.defineProperty(Gi.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Tt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Tt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new yo);const e=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const l=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-s,l}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,n=1,s=0,l=0,h=0,c=0,d=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=l,this.skew.y=h,this.pivot.x=c,this.pivot.y=d,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new c1),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*ab}set angle(t){this.transform.rotation=t*ob}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class c1 extends Gi{constructor(){super(...arguments),this.sortDirty=null}}Gi.prototype.displayObjectUpdateTransform=Gi.prototype.updateTransform;const d1=new $t;function f1(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}const sg=class Ru extends Gi{constructor(){super(),this.children=[],this.sortableChildren=Ru.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(t);xs(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],i=this.children.indexOf(e);if(i===-1)return null;e.parent=null,e.transform._parentID=-1,xs(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,xs(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=t,n=e,s=n-i;let l;if(s>0&&s<=n){l=this.children.splice(i,s);for(let h=0;h<l.length;++h)l[h].parent=null,l[h].transform&&(l[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let h=0;h<l.length;++h)l[h].emit("removed",this),this.emit("childRemoved",l[h],this,h);return l}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){const n=this.children[e];n._lastSortedIndex=e,!t&&n.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(f1),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=super.getLocalBounds(t);if(!e)for(let n=0,s=this.children.length;n<s;++n){const l=this.children[n];l.visible&&l.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,n;this.cullArea?(i=this.cullArea,n=this.worldTransform):this._render!==Ru.prototype._render&&(i=this.getBounds(!0));const s=t.projection.transform;if(s&&(n?(n=d1.copyFrom(n),n.prepend(s)):n=s),i&&e.intersects(i,n))this._render(t);else if(this.cullArea)return;for(let l=0,h=this.children.length;l<h;++l){const c=this.children[l],d=c.cullable;c.cullable=d||!this.cullArea,c.render(t),c.cullable=d}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(t)}}renderAdvanced(t){var s,l,h;const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let c=0;c<e.length;c++)e[c].enabled&&this._enabledFilters.push(e[c])}const n=e&&((s=this._enabledFilters)==null?void 0:s.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==re.NONE));if(n&&t.batch.flush(),e&&((l=this._enabledFilters)!=null&&l.length)&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let c=0,d=this.children.length;c<d;++c)this.children[c].render(t)}n&&t.batch.flush(),i&&t.mask.pop(this),e&&((h=this._enabledFilters)!=null&&h.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<i.length;++n)i[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};sg.defaultSortableChildren=!1;let Fe=sg;Fe.prototype.containerUpdateTransform=Fe.prototype.updateTransform;Object.defineProperties(lt,{SORTABLE_CHILDREN:{get(){return Fe.defaultSortableChildren},set(r){It("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Fe.defaultSortableChildren=r}}});var Uo=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Uo||{});const os=new Bt,p1=new Uint16Array([0,1,2,0,2,3]);class Hi extends Fe{constructor(t){super(),this._anchor=new Ar(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Xt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=dt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||tt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=p1,this.pluginName="batch",this.isSprite=!0,this._roundPixels=lt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=vn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=vn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,n=e.b,s=e.c,l=e.d,h=e.tx,c=e.ty,d=this.vertexData,m=t.trim,y=t.orig,g=this._anchor;let _=0,x=0,b=0,T=0;if(m?(x=m.x-g._x*y.width,_=x+m.width,T=m.y-g._y*y.height,b=T+m.height):(x=-g._x*y.width,_=x+y.width,T=-g._y*y.height,b=T+y.height),d[0]=i*x+s*T+h,d[1]=l*T+n*x+c,d[2]=i*_+s*T+h,d[3]=l*T+n*_+c,d[4]=i*_+s*b+h,d[5]=l*b+n*_+c,d[6]=i*x+s*b+h,d[7]=l*b+n*x+c,this._roundPixels){const S=lt.RESOLUTION;for(let C=0;C<d.length;++C)d[C]=Math.round(d[C]*S)/S}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,s=this.transform.worldTransform,l=s.a,h=s.b,c=s.c,d=s.d,m=s.tx,y=s.ty,g=-n._x*i.width,_=g+i.width,x=-n._y*i.height,b=x+i.height;if(e[0]=l*g+c*x+m,e[1]=d*x+h*g+y,e[2]=l*_+c*x+m,e[3]=d*x+h*_+y,e[4]=l*_+c*b+m,e[5]=d*b+h*_+y,e[6]=l*g+c*b+m,e[7]=d*b+h*g+y,this._roundPixels){const T=lt.RESOLUTION;for(let S=0;S<e.length;++S)e[S]=Math.round(e[S]*T)/T}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new yo),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Tt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,os);const e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x;let s=0;return os.x>=n&&os.x<n+e&&(s=-i*this.anchor.y,os.y>=s&&os.y<s+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const i=t instanceof tt?t:tt.from(t,e);return new Hi(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=vn(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=vn(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||tt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Da={willReadFrequently:!0},xr=class at{static get experimentalLetterSpacingSupported(){let t=at._experimentalLetterSpacingSupported;if(t!==void 0){const e=lt.ADAPTER.getCanvasRenderingContext2D().prototype;t=at._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,n,s,l,h,c,d){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=s,this.lineWidths=l,this.lineHeight=h,this.maxLineWidth=c,this.fontProperties=d}static measureText(t,e,i,n=at._canvas){i=i??e.wordWrap;const s=e.toFontString(),l=at.measureFont(s);l.fontSize===0&&(l.fontSize=e.fontSize,l.ascent=e.fontSize);const h=n.getContext("2d",Da);h.font=s;const c=(i?at.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),d=new Array(c.length);let m=0;for(let x=0;x<c.length;x++){const b=at._measureText(c[x],e.letterSpacing,h);d[x]=b,m=Math.max(m,b)}let y=m+e.strokeThickness;e.dropShadow&&(y+=e.dropShadowDistance);const g=e.lineHeight||l.fontSize+e.strokeThickness;let _=Math.max(g,l.fontSize+e.strokeThickness*2)+e.leading+(c.length-1)*(g+e.leading);return e.dropShadow&&(_+=e.dropShadowDistance),new at(t,e,y,_,c,d,g+e.leading,m,l)}static _measureText(t,e,i){let n=!1;at.experimentalLetterSpacingSupported&&(at.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(t).width;return s>0&&(n?s-=e:s+=(at.graphemeSegmenter(t).length-1)*e),s}static wordWrap(t,e,i=at._canvas){const n=i.getContext("2d",Da);let s=0,l="",h="";const c=Object.create(null),{letterSpacing:d,whiteSpace:m}=e,y=at.collapseSpaces(m),g=at.collapseNewlines(m);let _=!y;const x=e.wordWrapWidth+d,b=at.tokenize(t);for(let T=0;T<b.length;T++){let S=b[T];if(at.isNewline(S)){if(!g){h+=at.addLine(l),_=!y,l="",s=0;continue}S=" "}if(y){const A=at.isBreakingSpace(S),I=at.isBreakingSpace(l[l.length-1]);if(A&&I)continue}const C=at.getFromCache(S,d,c,n);if(C>x)if(l!==""&&(h+=at.addLine(l),l="",s=0),at.canBreakWords(S,e.breakWords)){const A=at.wordWrapSplit(S);for(let I=0;I<A.length;I++){let U=A[I],W=U,j=1;for(;A[I+j];){const q=A[I+j];if(!at.canBreakChars(W,q,S,I,e.breakWords))U+=q;else break;W=q,j++}I+=j-1;const G=at.getFromCache(U,d,c,n);G+s>x&&(h+=at.addLine(l),_=!1,l="",s=0),l+=U,s+=G}}else{l.length>0&&(h+=at.addLine(l),l="",s=0);const A=T===b.length-1;h+=at.addLine(S,!A),_=!1,l="",s=0}else C+s>x&&(_=!1,h+=at.addLine(l),l="",s=0),(l.length>0||!at.isBreakingSpace(S)||_)&&(l+=S,s+=C)}return h+=at.addLine(l,!1),h}static addLine(t,e=!0){return t=at.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,i,n){let s=i[t];return typeof s!="number"&&(s=at._measureText(t,e,n)+e,i[t]=s),s}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!at.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:at._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:at._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let n=0;n<t.length;n++){const s=t[n],l=t[n+1];if(at.isBreakingSpace(s,l)||at.isNewline(s)){i!==""&&(e.push(i),i=""),e.push(s);continue}i+=s}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,n,s){return!0}static wordWrapSplit(t){return at.graphemeSegmenter(t)}static measureFont(t){if(at._fonts[t])return at._fonts[t];const e={ascent:0,descent:0,fontSize:0},i=at._canvas,n=at._context;n.font=t;const s=at.METRICS_STRING+at.BASELINE_SYMBOL,l=Math.ceil(n.measureText(s).width);let h=Math.ceil(n.measureText(at.BASELINE_SYMBOL).width);const c=Math.ceil(at.HEIGHT_MULTIPLIER*h);if(h=h*at.BASELINE_MULTIPLIER|0,l===0||c===0)return at._fonts[t]=e,e;i.width=l,i.height=c,n.fillStyle="#f00",n.fillRect(0,0,l,c),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,h);const d=n.getImageData(0,0,l,c).data,m=d.length,y=l*4;let g=0,_=0,x=!1;for(g=0;g<h;++g){for(let b=0;b<y;b+=4)if(d[_+b]!==255){x=!0;break}if(!x)_+=y;else break}for(e.ascent=h-g,_=m-y,x=!1,g=c;g>h;--g){for(let b=0;b<y;b+=4)if(d[_+b]!==255){x=!0;break}if(!x)_-=y;else break}return e.descent=g-h,e.fontSize=e.ascent+e.descent,at._fonts[t]=e,e}static clearMetrics(t=""){t?delete at._fonts[t]:at._fonts={}}static get _canvas(){var t;if(!at.__canvas){let e;try{const i=new OffscreenCanvas(0,0);if((t=i.getContext("2d",Da))!=null&&t.measureText)return at.__canvas=i,i;e=lt.ADAPTER.createCanvas()}catch{e=lt.ADAPTER.createCanvas()}e.width=e.height=10,at.__canvas=e}return at.__canvas}static get _context(){return at.__context||(at.__context=at._canvas.getContext("2d",Da)),at.__context}};xr.METRICS_STRING="|ÉqÅ",xr.BASELINE_SYMBOL="M",xr.BASELINE_MULTIPLIER=1.4,xr.HEIGHT_MULTIPLIER=2,xr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})(),xr.experimentalLetterSpacing=!1,xr._fonts={},xr._newlines=[10,13],xr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let ki=xr;const m1=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ag=class fs{constructor(t){this.styleID=0,this.reset(),Gh(this,t,t)}clone(){const t={};return Gh(t,this,fs.defaultStyle),new fs(t)}reset(){Gh(this,fs.defaultStyle,fs.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Uh(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Uh(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){g1(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Uh(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!m1.includes(n)&&(n=`"${n}"`),e[i]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};ag.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Uo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let vo=ag;function Uh(r){const t=Xt.shared,e=i=>{const n=t.setValue(i);return n.alpha===1?n.toHex():n.toRgbaString()};return Array.isArray(r)?r.map(e):e(r)}function g1(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function Gh(r,t,e){for(const i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}const y1={texture:!0,children:!1,baseTexture:!0},og=class Pu extends Hi{constructor(t,e,i){let n=!1;i||(i=lt.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;const s=tt.from(i);s.orig=new Tt,s.trim=new Tt,super(s),this._ownCanvas=n,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Pu.defaultResolution??lt.RESOLUTION,this._autoResolution=Pu.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return ki.experimentalLetterSpacing}static set experimentalLetterSpacing(t){It("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),ki.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const i=this.context,n=ki.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,l=n.height,h=n.lines,c=n.lineHeight,d=n.lineWidths,m=n.maxLineWidth,y=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,l)+e.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;let g,_;const x=e.dropShadow?2:1;for(let b=0;b<x;++b){const T=e.dropShadow&&b===0,S=T?Math.ceil(Math.max(1,l)+e.padding*2):0,C=S*this._resolution;if(T){i.fillStyle="black",i.strokeStyle="black";const I=e.dropShadowColor,U=e.dropShadowBlur*this._resolution,W=e.dropShadowDistance*this._resolution;i.shadowColor=Xt.shared.setValue(I).setAlpha(e.dropShadowAlpha).toRgbaString(),i.shadowBlur=U,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*W,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*W+C}else i.fillStyle=this._generateFillStyle(e,h,n),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let A=(c-y.fontSize)/2;c-y.fontSize<0&&(A=0);for(let I=0;I<h.length;I++)g=e.strokeThickness/2,_=e.strokeThickness/2+I*c+y.ascent+A,e.align==="right"?g+=m-d[I]:e.align==="center"&&(g+=(m-d[I])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[I],g+e.padding,_+e.padding-S,!0),e.fill&&this.drawLetterSpacing(h[I],g+e.padding,_+e.padding-S)}this.updateTexture()}drawLetterSpacing(t,e,i,n=!1){const s=this._style.letterSpacing;let l=!1;if(ki.experimentalLetterSpacingSupported&&(ki.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,l=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||l){n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i);return}let h=e;const c=ki.graphemeSegmenter(t);let d=this.context.measureText(t).width,m=0;for(let y=0;y<c.length;++y){const g=c[y];n?this.context.strokeText(g,h,i):this.context.fillText(g,h,i);let _="";for(let x=y+1;x<c.length;++x)_+=c[x];m=this.context.measureText(_).width,h+=d-m+s,d=m}}updateTexture(){const t=this.canvas;if(this._style.trim){const l=Yx(t);l.data&&(t.width=l.width,t.height=l.height,this.context.putImageData(l.data,0,0))}const e=this._texture,i=this._style,n=i.trim?0:i.padding,s=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){const n=t.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const l=t.dropShadow?t.dropShadowDistance:0,h=t.padding||0,c=this.canvas.width/this._resolution-l-h*2,d=this.canvas.height/this._resolution-l-h*2,m=n.slice(),y=t.fillGradientStops.slice();if(!y.length){const g=m.length+1;for(let _=1;_<g;++_)y.push(_/g)}if(m.unshift(n[0]),y.unshift(0),m.push(n[n.length-1]),y.push(1),t.fillGradientType===Uo.LINEAR_VERTICAL){s=this.context.createLinearGradient(c/2,h,c/2,d+h);const g=i.fontProperties.fontSize+t.strokeThickness;for(let _=0;_<e.length;_++){const x=i.lineHeight*(_-1)+g,b=i.lineHeight*_;let T=b;_>0&&x>b&&(T=(b+x)/2);const S=b+g,C=i.lineHeight*(_+1);let A=S;_+1<e.length&&C<S&&(A=(S+C)/2);const I=(A-T)/d;for(let U=0;U<m.length;U++){let W=0;typeof y[U]=="number"?W=y[U]:W=U/m.length;let j=Math.min(1,Math.max(0,T/d+W*I));j=Number(j.toFixed(5)),s.addColorStop(j,m[U])}}}else{s=this.context.createLinearGradient(h,d/2,c+h,d/2);const g=m.length+1;let _=1;for(let x=0;x<m.length;x++){let b;typeof y[x]=="number"?b=y[x]:b=_/g,s.addColorStop(b,m[x]),_++}}return s}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},y1,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=vn(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=vn(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof vo?this._style=t:this._style=new vo(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};og.defaultAutoResolution=!0;let v1=og;class _o{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class eo{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in e){const l=e[s].match(/^[a-z]+/gm)[0],h=e[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),c={};for(const d in h){const m=h[d].split("="),y=m[0],g=m[1].replace(/"/gm,""),_=parseFloat(g),x=isNaN(_)?g:_;c[y]=x}i[l].push(c)}const n=new _o;return i.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class Nu{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new _o,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),l=t.getElementsByTagName("char"),h=t.getElementsByTagName("kerning"),c=t.getElementsByTagName("distanceField");for(let d=0;d<i.length;d++)e.info.push({face:i[d].getAttribute("face"),size:parseInt(i[d].getAttribute("size"),10)});for(let d=0;d<n.length;d++)e.common.push({lineHeight:parseInt(n[d].getAttribute("lineHeight"),10)});for(let d=0;d<s.length;d++)e.page.push({id:parseInt(s[d].getAttribute("id"),10)||0,file:s[d].getAttribute("file")});for(let d=0;d<l.length;d++){const m=l[d];e.char.push({id:parseInt(m.getAttribute("id"),10),page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xoffset:parseInt(m.getAttribute("xoffset"),10),yoffset:parseInt(m.getAttribute("yoffset"),10),xadvance:parseInt(m.getAttribute("xadvance"),10)})}for(let d=0;d<h.length;d++)e.kerning.push({first:parseInt(h[d].getAttribute("first"),10),second:parseInt(h[d].getAttribute("second"),10),amount:parseInt(h[d].getAttribute("amount"),10)});for(let d=0;d<c.length;d++)e.distanceField.push({fieldType:c[d].getAttribute("fieldType"),distanceRange:parseInt(c[d].getAttribute("distanceRange"),10)});return e}}class Mu{static test(t){return typeof t=="string"&&t.includes("<font>")?Nu.test(lt.ADAPTER.parseXML(t)):!1}static parse(t){return Nu.parse(lt.ADAPTER.parseXML(t))}}const zh=[eo,Nu,Mu];function _1(r){for(let t=0;t<zh.length;t++)if(zh[t].test(r))return zh[t];return null}function x1(r,t,e,i,n,s){const l=e.fill;if(Array.isArray(l)){if(l.length===1)return l[0]}else return l;let h;const c=e.dropShadow?e.dropShadowDistance:0,d=e.padding||0,m=r.width/i-c-d*2,y=r.height/i-c-d*2,g=l.slice(),_=e.fillGradientStops.slice();if(!_.length){const x=g.length+1;for(let b=1;b<x;++b)_.push(b/x)}if(g.unshift(l[0]),_.unshift(0),g.push(l[l.length-1]),_.push(1),e.fillGradientType===Uo.LINEAR_VERTICAL){h=t.createLinearGradient(m/2,d,m/2,y+d);let x=0;const b=(s.fontProperties.fontSize+e.strokeThickness)/y;for(let T=0;T<n.length;T++){const S=s.lineHeight*T;for(let C=0;C<g.length;C++){let A=0;typeof _[C]=="number"?A=_[C]:A=C/g.length;const I=S/y+A*b;let U=Math.max(x,I);U=Math.min(U,1),h.addColorStop(U,g[C]),x=U}}}else{h=t.createLinearGradient(d,y/2,m+d,y/2);const x=g.length+1;let b=1;for(let T=0;T<g.length;T++){let S;typeof _[T]=="number"?S=_[T]:S=b/x,h.addColorStop(S,g[T]),b++}}return h}function b1(r,t,e,i,n,s,l){const h=e.text,c=e.fontProperties;t.translate(i,n),t.scale(s,s);const d=l.strokeThickness/2,m=-(l.strokeThickness/2);if(t.font=l.toFontString(),t.lineWidth=l.strokeThickness,t.textBaseline=l.textBaseline,t.lineJoin=l.lineJoin,t.miterLimit=l.miterLimit,t.fillStyle=x1(r,t,l,s,[h],e),t.strokeStyle=l.stroke,l.dropShadow){const y=l.dropShadowColor,g=l.dropShadowBlur*s,_=l.dropShadowDistance*s;t.shadowColor=Xt.shared.setValue(y).setAlpha(l.dropShadowAlpha).toRgbaString(),t.shadowBlur=g,t.shadowOffsetX=Math.cos(l.dropShadowAngle)*_,t.shadowOffsetY=Math.sin(l.dropShadowAngle)*_}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;l.stroke&&l.strokeThickness&&t.strokeText(h,d,m+e.lineHeight-c.descent),l.fill&&t.fillText(h,d,m+e.lineHeight-c.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function ro(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function lg(r){return Array.from?Array.from(r):r.split("")}function w1(r){typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const n=r[e];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),l=n[1].charCodeAt(0);if(l<s)throw new Error("[BitmapFont]: Invalid character range.");for(let h=s,c=l;h<=c;h++)t.push(String.fromCharCode(h))}else t.push(...lg(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const ii=class br{constructor(t,e,i){var m;const[n]=t.info,[s]=t.common,[l]=t.page,[h]=t.distanceField,c=Nn(l.file),d={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/c,this.chars={},this.pageTextures=d;for(let y=0;y<t.page.length;y++){const{id:g,file:_}=t.page[y];d[g]=e instanceof Array?e[y]:e[_],h!=null&&h.fieldType&&h.fieldType!=="none"&&(d[g].baseTexture.alphaMode=Ve.NO_PREMULTIPLIED_ALPHA,d[g].baseTexture.mipmap=hi.OFF)}for(let y=0;y<t.char.length;y++){const{id:g,page:_}=t.char[y];let{x,y:b,width:T,height:S,xoffset:C,yoffset:A,xadvance:I}=t.char[y];x/=c,b/=c,T/=c,S/=c,C/=c,A/=c,I/=c;const U=new Tt(x+d[_].frame.x/c,b+d[_].frame.y/c,T,S);this.chars[g]={xOffset:C,yOffset:A,xAdvance:I,kerning:{},texture:new tt(d[_].baseTexture,U),page:_}}for(let y=0;y<t.kerning.length;y++){let{first:g,second:_,amount:x}=t.kerning[y];g/=c,_/=c,x/=c,this.chars[_]&&(this.chars[_].kerning[g]=x)}this.distanceFieldRange=h==null?void 0:h.distanceRange,this.distanceFieldType=((m=h==null?void 0:h.fieldType)==null?void 0:m.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let n;if(t instanceof _o)n=t;else{const l=_1(t);if(!l)throw new Error("Unrecognized data format for font.");n=l.parse(t)}e instanceof tt&&(e=[e]);const s=new br(n,e,i);return br.available[s.font]=s,s}static uninstall(t){const e=br.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete br.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:l,textureWidth:h,textureHeight:c,...d}=Object.assign({},br.defaultOptions,i),m=w1(n),y=e instanceof vo?e:new vo(e),g=h,_=new _o;_.info[0]={face:y.fontFamily,size:y.fontSize},_.common[0]={lineHeight:y.fontSize};let x=0,b=0,T,S,C,A=0;const I=[];for(let W=0;W<m.length;W++){T||(T=lt.ADAPTER.createCanvas(),T.width=h,T.height=c,S=T.getContext("2d"),C=new wt(T,{resolution:l,...d}),I.push(new tt(C)),_.page.push({id:I.length-1,file:""}));const j=m[W],G=ki.measureText(j,y,!1,T),q=G.width,it=Math.ceil(G.height),mt=Math.ceil((y.fontStyle==="italic"?2:1)*q);if(b>=c-it*l){if(b===0)throw new Error(`[BitmapFont] textureHeight ${c}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${j}')`);--W,T=null,S=null,C=null,b=0,x=0,A=0;continue}if(A=Math.max(it+G.fontProperties.descent,A),mt*l+x>=g){if(x===0)throw new Error(`[BitmapFont] textureWidth ${h}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${j}')`);--W,b+=A*l,b=Math.ceil(b),x=0,A=0;continue}b1(T,S,G,x,b,l,y);const J=ro(G.text);_.char.push({id:J,page:I.length-1,x:x/l,y:b/l,width:mt,height:it,xoffset:0,yoffset:0,xadvance:q-(y.dropShadow?y.dropShadowDistance:0)-(y.stroke?y.strokeThickness:0)}),x+=(mt+2*s)*l,x=Math.ceil(x)}if(!(i!=null&&i.skipKerning))for(let W=0,j=m.length;W<j;W++){const G=m[W];for(let q=0;q<j;q++){const it=m[q],mt=S.measureText(G).width,J=S.measureText(it).width,F=S.measureText(G+it).width-(mt+J);F&&_.kerning.push({first:ro(G),second:ro(it),amount:F})}}const U=new br(_,I,!0);return br.available[t]!==void 0&&br.uninstall(t),br.available[t]=U,U}};ii.ALPHA=[["a","z"],["A","Z"]," "],ii.NUMERIC=[["0","9"]],ii.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ii.ASCII=[[" ","~"]],ii.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ii.ALPHANUMERIC},ii.available={};let ni=ii;class T1{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const Hh=new Bt,lp=new Di,hg=class ug extends Fe{constructor(t,e,i,n=ir.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||Rr.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=lt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ir.TRIANGLES&&e.length<ug.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,s=n.a,l=n.b,h=n.c,c=n.d,d=n.tx,m=n.ty,y=this.vertexData;for(let g=0;g<y.length/2;g++){const _=e[g*2],x=e[g*2+1];y[g*2]=s*_+h*x+d,y[g*2+1]=l*_+c*x+m}if(this._roundPixels){const g=lt.RESOLUTION;for(let _=0;_<y.length;++_)y[_]=Math.round(y[_]*g)/g}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new T1(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Hh);const e=this.geometry.getBuffer("aVertexPosition").data,i=lp.points,n=this.geometry.getIndex().data,s=n.length,l=this.drawMode===4?3:1;for(let h=0;h+2<s;h+=l){const c=n[h]*2,d=n[h+1]*2,m=n[h+2]*2;if(i[0]=e[c],i[1]=e[c+1],i[2]=e[d],i[3]=e[d+1],i[4]=e[m],i[5]=e[m+1],lp.contains(Hh.x,Hh.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};hg.BATCHABLE_SIZE=100;let Cs=hg;class Go extends ui{constructor(t,e,i){super();const n=new Kt(t),s=new Kt(e,!0),l=new Kt(i,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,pt.FLOAT).addAttribute("aTextureCoord",s,2,!1,pt.FLOAT).addIndex(l),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var A1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,S1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Rs extends Er{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:$t.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||Ur.from(S1,A1),i),this._colorDirty=!1,this.uvMatrix=new Ju(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Xt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Xt.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var E1=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,I1=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const hp=[],up=[],cp=[],cg=class dg extends Fe{constructor(t,e={}){super();const{align:i,tint:n,maxWidth:s,letterSpacing:l,fontName:h,fontSize:c}=Object.assign({},dg.styleDefaults,e);if(!ni.available[h])throw new Error(`Missing BitmapFont "${h}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Xt(n),this._font=void 0,this._fontName=h,this._fontSize=c,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=l,this._anchor=new Ar(()=>{this.dirty=!0},this,0,0),this._roundPixels=lt.ROUND_PIXELS,this.dirty=!0,this._resolution=lt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var mt;const t=ni.available[this._fontName],e=this.fontSize,i=e/t.size,n=new Bt,s=[],l=[],h=[],c=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",d=lg(c),m=this._maxWidth*t.size/e,y=t.distanceFieldType==="none"?hp:up;let g=null,_=0,x=0,b=0,T=-1,S=0,C=0,A=0,I=0;for(let J=0;J<d.length;J++){const F=d[J],V=ro(F);if(/(?:\s)/.test(F)&&(T=J,S=_,I++),F==="\r"||F===`
`){l.push(_),h.push(-1),x=Math.max(x,_),++b,++C,n.x=0,n.y+=t.lineHeight,g=null,I=0;continue}const nt=t.chars[V];if(!nt)continue;g&&nt.kerning[g]&&(n.x+=nt.kerning[g]);const ft=cp.pop()||{texture:tt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Bt};ft.texture=nt.texture,ft.line=b,ft.charCode=V,ft.position.x=Math.round(n.x+nt.xOffset+this._letterSpacing/2),ft.position.y=Math.round(n.y+nt.yOffset),ft.prevSpaces=I,s.push(ft),_=ft.position.x+Math.max(nt.xAdvance-nt.xOffset,nt.texture.orig.width),n.x+=nt.xAdvance+this._letterSpacing,A=Math.max(A,nt.yOffset+nt.texture.height),g=V,T!==-1&&m>0&&n.x>m&&(++C,xs(s,1+T-C,1+J-T),J=T,T=-1,l.push(S),h.push(s.length>0?s[s.length-1].prevSpaces:0),x=Math.max(x,S),b++,n.x=0,n.y+=t.lineHeight,g=null,I=0)}const U=d[d.length-1];U!=="\r"&&U!==`
`&&(/(?:\s)/.test(U)&&(_=S),l.push(_),x=Math.max(x,_),h.push(-1));const W=[];for(let J=0;J<=b;J++){let F=0;this._align==="right"?F=x-l[J]:this._align==="center"?F=(x-l[J])/2:this._align==="justify"&&(F=h[J]<0?0:(x-l[J])/h[J]),W.push(F)}const j=s.length,G={},q=[],it=this._activePagesMeshData;y.push(...it);for(let J=0;J<j;J++){const F=s[J].texture,V=F.baseTexture.uid;if(!G[V]){let nt=y.pop();if(!nt){const ot=new Go;let B,K;t.distanceFieldType==="none"?(B=new Rs(tt.EMPTY),K=dt.NORMAL):(B=new Rs(tt.EMPTY,{program:Ur.from(I1,E1),uniforms:{uFWidth:0}}),K=dt.NORMAL_NPM);const k=new Cs(ot,B);k.blendMode=K,nt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:k,vertices:null,uvs:null,indices:null}}nt.index=0,nt.indexCount=0,nt.vertexCount=0,nt.uvsCount=0,nt.total=0;const{_textureCache:ft}=this;ft[V]=ft[V]||new tt(F.baseTexture),nt.mesh.texture=ft[V],nt.mesh.tint=this._tintColor.value,q.push(nt),G[V]=nt}G[V].total++}for(let J=0;J<it.length;J++)q.includes(it[J])||this.removeChild(it[J].mesh);for(let J=0;J<q.length;J++)q[J].mesh.parent!==this&&this.addChild(q[J].mesh);this._activePagesMeshData=q;for(const J in G){const F=G[J],V=F.total;if(!(((mt=F.indices)==null?void 0:mt.length)>6*V)||F.vertices.length<Cs.BATCHABLE_SIZE*2)F.vertices=new Float32Array(4*2*V),F.uvs=new Float32Array(4*2*V),F.indices=new Uint16Array(6*V);else{const nt=F.total,ft=F.vertices;for(let ot=nt*4*2;ot<ft.length;ot++)ft[ot]=0}F.mesh.size=6*V}for(let J=0;J<j;J++){const F=s[J];let V=F.position.x+W[F.line]*(this._align==="justify"?F.prevSpaces:1);this._roundPixels&&(V=Math.round(V));const nt=V*i,ft=F.position.y*i,ot=F.texture,B=G[ot.baseTexture.uid],K=ot.frame,k=ot._uvs,z=B.index++;B.indices[z*6+0]=0+z*4,B.indices[z*6+1]=1+z*4,B.indices[z*6+2]=2+z*4,B.indices[z*6+3]=0+z*4,B.indices[z*6+4]=2+z*4,B.indices[z*6+5]=3+z*4,B.vertices[z*8+0]=nt,B.vertices[z*8+1]=ft,B.vertices[z*8+2]=nt+K.width*i,B.vertices[z*8+3]=ft,B.vertices[z*8+4]=nt+K.width*i,B.vertices[z*8+5]=ft+K.height*i,B.vertices[z*8+6]=nt,B.vertices[z*8+7]=ft+K.height*i,B.uvs[z*8+0]=k.x0,B.uvs[z*8+1]=k.y0,B.uvs[z*8+2]=k.x1,B.uvs[z*8+3]=k.y1,B.uvs[z*8+4]=k.x2,B.uvs[z*8+5]=k.y2,B.uvs[z*8+6]=k.x3,B.uvs[z*8+7]=k.y3}this._textWidth=x*i,this._textHeight=(n.y+t.lineHeight)*i;for(const J in G){const F=G[J];if(this.anchor.x!==0||this.anchor.y!==0){let ot=0;const B=this._textWidth*this.anchor.x,K=this._textHeight*this.anchor.y;for(let k=0;k<F.total;k++)F.vertices[ot++]-=B,F.vertices[ot++]-=K,F.vertices[ot++]-=B,F.vertices[ot++]-=K,F.vertices[ot++]-=B,F.vertices[ot++]-=K,F.vertices[ot++]-=B,F.vertices[ot++]-=K}this._maxLineHeight=A*i;const V=F.mesh.geometry.getBuffer("aVertexPosition"),nt=F.mesh.geometry.getBuffer("aTextureCoord"),ft=F.mesh.geometry.getIndex();V.data=F.vertices,nt.data=F.uvs,ft.data=F.indices,V.update(),nt.update(),ft.update()}for(let J=0;J<s.length;J++)cp.push(s[J]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:i,size:n}=ni.available[this._fontName];if(i!=="none"){const{a:s,b:l,c:h,d:c}=this.worldTransform,d=Math.sqrt(s*s+l*l),m=Math.sqrt(h*h+c*c),y=(Math.abs(d)+Math.abs(m))/2,g=this.fontSize/n,_=t._view.resolution;for(const x of this._activePagesMeshData)x.mesh.shader.uniforms.uFWidth=y*e*g*_}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=ni.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!ni.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??ni.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i=ni.available[this._fontName].distanceFieldType==="none"?hp:up;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(n=>e[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=tt.EMPTY});for(const n in e)e[n].destroy(),delete e[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};cg.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let C1=cg;const dp={loader:et.LoadParser,resolver:et.ResolveParser,cache:et.CacheParser,detection:et.DetectionParser};ct.handle(et.Asset,r=>{const t=r.ref;Object.entries(dp).filter(([e])=>!!t[e]).forEach(([e,i])=>ct.add(Object.assign(t[e],{extension:t[e].extension??i})))},r=>{const t=r.ref;Object.keys(dp).filter(e=>!!t[e]).forEach(e=>ct.remove(t[e]))});class R1{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function kn(r,t){if(Array.isArray(t)){for(const e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}function On(r,t){const e=r.split("?")[0],i=Ye.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const rr=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(i=>typeof i=="string"||e?t(i):i):r),P1=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r};function fg(r,t,e,i,n){const s=t[e];for(let l=0;l<s.length;l++){const h=s[l];e<t.length-1?fg(r.replace(i[e],h),t,e+1,i,n):n.push(r.replace(i[e],h))}}function N1(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const n=[];e.forEach(s=>{const l=s.substring(1,s.length-1).split(",");n.push(l)}),fg(r,n,0,e,i)}else i.push(r);return i}const xo=r=>!Array.isArray(r);class M1{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=rr(t);let n;for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];if(c.test(e)){n=c.getCacheableAssets(i,e);break}}n||(n={},i.forEach(h=>{n[h]=e}));const s=Object.keys(n),l={cacheKeys:s,keys:i};if(i.forEach(h=>{this._cacheMap.set(h,l)}),s.forEach(h=>{this._cache.has(h)&&this._cache.get(h)!==e&&console.warn("[Cache] already has key:",h),this._cache.set(h,n[h])}),e instanceof tt){const h=e;i.forEach(c=>{h.baseTexture!==tt.EMPTY.baseTexture&&wt.addToCache(h.baseTexture,c),tt.addToCache(h,c)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Bi=new M1;class F1{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var l,h;let n=null,s=null;if(e.loadParser&&(s=this._parserHash[e.loadParser],s||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!s){for(let c=0;c<this.parsers.length;c++){const d=this.parsers[c];if(d.load&&((l=d.test)!=null&&l.call(d,t,e,this))){s=d;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await s.load(t,e,this),i.parser=s;for(let c=0;c<this.parsers.length;c++){const d=this.parsers[c];d.parse&&d.parse&&await((h=d.testParse)==null?void 0:h.call(d,n,e,this))&&(n=await d.parse(n,e,this)||n,i.parser=d)}return n})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const n={},s=xo(t),l=rr(t,d=>({alias:[d],src:d})),h=l.length,c=l.map(async d=>{const m=Ye.toAbsolute(d.src);if(!n[d.src])try{this.promiseCache[m]||(this.promiseCache[m]=this._getLoadPromiseAndParser(m,d)),n[d.src]=await this.promiseCache[m].promise,e&&e(++i/h)}catch(y){throw delete this.promiseCache[m],delete n[d.src],new Error(`[Loader.load] Failed to load ${m}.
${y}`)}});return await Promise.all(c),s?n[l[0].src]:n}async unload(t){const e=rr(t,i=>({alias:[i],src:i})).map(async i=>{var l,h;const n=Ye.toAbsolute(i.src),s=this.promiseCache[n];if(s){const c=await s.promise;delete this.promiseCache[n],(h=(l=s.parser)==null?void 0:l.unload)==null||h.call(l,c,i,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var di=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(di||{});const k1=".json",O1="application/json",B1={extension:{type:et.LoadParser,priority:di.Low},name:"loadJson",test(r){return kn(r,O1)||On(r,k1)},async load(r){return await(await lt.ADAPTER.fetch(r)).json()}};ct.add(B1);const L1=".txt",D1="text/plain",U1={name:"loadTxt",extension:{type:et.LoadParser,priority:di.Low},test(r){return kn(r,D1)||On(r,L1)},async load(r){return await(await lt.ADAPTER.fetch(r)).text()}};ct.add(U1);const G1=["normal","bold","100","200","300","400","500","600","700","800","900"],z1=[".ttf",".otf",".woff",".woff2"],H1=["font/ttf","font/otf","font/woff","font/woff2"],$1=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function j1(r){const t=Ye.extname(r),e=Ye.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let i=e.length>0;for(const s of e)if(!s.match($1)){i=!1;break}let n=e.join(" ");return i||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const V1=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function W1(r){return V1.test(r)?r:encodeURI(r)}const X1={extension:{type:et.LoadParser,priority:di.Low},name:"loadWebFont",test(r){return kn(r,H1)||On(r,z1)},async load(r,t){var i,n,s;const e=lt.ADAPTER.getFontFaceSet();if(e){const l=[],h=((i=t.data)==null?void 0:i.family)??j1(r),c=((s=(n=t.data)==null?void 0:n.weights)==null?void 0:s.filter(m=>G1.includes(m)))??["normal"],d=t.data??{};for(let m=0;m<c.length;m++){const y=c[m],g=new FontFace(h,`url(${W1(r)})`,{...d,weight:y});await g.load(),e.add(g),l.push(g)}return l.length===1?l[0]:l}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>lt.ADAPTER.getFontFaceSet().delete(t))}};ct.add(X1);const Y1=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let En=null,Fu=class{constructor(){En||(En=URL.createObjectURL(new Blob([Y1],{type:"application/javascript"}))),this.worker=new Worker(En)}};Fu.revokeObjectURL=function(){En&&(URL.revokeObjectURL(En),En=null)};const q1=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let In=null;class pg{constructor(){In||(In=URL.createObjectURL(new Blob([q1],{type:"application/javascript"}))),this.worker=new Worker(In)}}pg.revokeObjectURL=function(){In&&(URL.revokeObjectURL(In),In=null)};let fp=0,$h;class Q1{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Fu;e.addEventListener("message",i=>{e.terminate(),Fu.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){$h===void 0&&($h=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<$h&&(this._createdWorkers++,t=new pg().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((n,s)=>{this.queue.push({id:t,arguments:e,resolve:n,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[fp]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:fp++,id:i})}}const pp=new Q1;function ec(r,t,e){r.resource.internal=!0;const i=new tt(r),n=()=>{delete t.promiseCache[e],Bi.has(e)&&Bi.remove(e)};return i.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),n())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),i}const K1=[".jpeg",".jpg",".png",".webp",".avif"],Z1=["image/jpeg","image/png","image/webp","image/avif"];async function J1(r){const t=await lt.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const zo={name:"loadTextures",extension:{type:et.LoadParser,priority:di.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return kn(r,Z1)||On(r,K1)},async load(r,t,e){var h;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let n;i?this.config.preferWorkers&&await pp.isImageBitmapSupported()?n=await pp.loadImageBitmap(r):n=await J1(r):n=await new Promise((c,d)=>{const m=new Image;m.crossOrigin=this.config.crossOrigin,m.src=r,m.complete?c(m):(m.onload=()=>c(m),m.onerror=y=>d(y))});const s={...t.data};s.resolution??(s.resolution=Nn(r)),i&&((h=s.resourceOptions)==null?void 0:h.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const l=new wt(n,s);return l.resource.src=r,ec(l,e,r)},unload(r){r.destroy(!0)}};ct.add(zo);const tw=".svg",ew="image/svg+xml",rw={extension:{type:et.LoadParser,priority:di.High},name:"loadSVG",test(r){return kn(r,ew)||On(r,tw)},async testParse(r){return Eu.test(r)},async parse(r,t,e){var s;const i=new Eu(r,(s=t==null?void 0:t.data)==null?void 0:s.resourceOptions);await i.load();const n=new wt(i,{resolution:Nn(r),...t==null?void 0:t.data});return n.resource.src=t.src,ec(n,e,t.src)},async load(r,t){return(await lt.ADAPTER.fetch(r)).text()},unload:zo.unload};ct.add(rw);const iw=[".mp4",".m4v",".webm",".ogv"],nw=["video/mp4","video/webm","video/ogg"],sw={name:"loadVideo",extension:{type:et.LoadParser,priority:di.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return kn(r,nw)||On(r,iw)},async load(r,t,e){var l;let i;const n=await(await lt.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(n);try{const h={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(l=t==null?void 0:t.data)==null?void 0:l.resourceOptions,autoLoad:!0},c=new ng(s,h);await c.load();const d=new wt(c,{alphaMode:await Fx(),resolution:Nn(r),...t==null?void 0:t.data});d.resource.src=r,i=ec(d,e,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(h){throw URL.revokeObjectURL(s),h}return i},unload(r){r.destroy(!0)}};ct.add(sw);class aw{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,name:i,src:n,srcs:s}=t;return rr(e||i||n||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(h=>(h==null?void 0:h.src)??(h==null?void 0:h.srcs)??h):l!=null&&l.src||l!=null&&l.srcs?l.src??l.srcs:l,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(n=>{const s=n.src??n.srcs,l=n.alias??n.name;let h;if(typeof l=="string"){const c=this._createBundleAssetId(t,l);i.push(c),h=[l,c]}else{const c=l.map(d=>this._createBundleAssetId(t,d));i.push(...c),h=[...l,...c]}this.add({...n,alias:h,src:s})}):Object.keys(e).forEach(n=>{const s=[n,this._createBundleAssetId(t,n)];if(typeof e[n]=="string")this.add({alias:s,src:e[n]});else if(Array.isArray(e[n]))this.add({alias:s,src:e[n]});else{const l=e[n],h=l.src??l.srcs;this.add({...l,alias:s,src:Array.isArray(h)?h:[h]})}i.push(...s)}),this._bundles[t]=i}add(t,e,i,n,s){const l=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(It("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),l.push({alias:t,src:e,data:i,format:n,loadParser:s})):Array.isArray(t)?l.push(...t):l.push(t);let h;h=c=>{this.hasKey(c)&&console.warn(`[Resolver] already has key: ${c} overwriting`)},rr(l).forEach(c=>{const{src:d,srcs:m}=c;let{data:y,format:g,loadParser:_}=c;const x=rr(d||m).map(S=>typeof S=="string"?N1(S):Array.isArray(S)?S:[S]),b=this.getAlias(c);Array.isArray(b)?b.forEach(h):h(b);const T=[];x.forEach(S=>{S.forEach(C=>{let A={};if(typeof C!="object"){A.src=C;for(let I=0;I<this._parsers.length;I++){const U=this._parsers[I];if(U.test(C)){A=U.parse(C);break}}}else y=C.data??y,g=C.format??g,_=C.loadParser??_,A={...A,...C};if(!b)throw new Error(`[Resolver] alias is undefined for this asset: ${A.src}`);A=this.buildResolvedAsset(A,{aliases:b,data:y,format:g,loadParser:_}),T.push(A)})}),b.forEach(S=>{this._assetMap[S]=T})})}resolveBundle(t){const e=xo(t);t=rr(t);const i={};return t.forEach(n=>{const s=this._bundles[n];if(s){const l=this.resolve(s),h={};for(const c in l){const d=l[c];h[this._extractAssetIdFromBundle(n,c)]=d}i[n]=h}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const n in e)i[n]=e[n].src;return i}return e.src}resolve(t){const e=xo(t);t=rr(t);const i={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const l=s[0],h=this._getPreferredOrder(s);h==null||h.priority.forEach(c=>{h.params[c].forEach(d=>{const m=s.filter(y=>y[c]?y[c]===d:!1);m.length&&(s=m)})}),this._resolverHash[n]=s[0]??l}else this._resolverHash[n]=this.buildResolvedAsset({alias:[n],src:n},{});i[n]=this._resolverHash[n]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],n=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:i,data:n,loadParser:s,format:l}=e;return(this._basePath||this._rootPath)&&(t.src=Ye.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=s??t.loadParser,t.format=l??t.format??Ye.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class ow{constructor(){this._detections=[],this._initialized=!1,this.resolver=new aw,this.loader=new F1,this.cache=Bi,this._backgroundLoader=new R1(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,l;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let h=t.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const e=((s=t.texturePreference)==null?void 0:s.resolution)??1,i=typeof e=="number"?[e]:e,n=await this._detectFormats({preferredFormats:(l=t.texturePreference)==null?void 0:l.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,i,n,s){this.resolver.add(t,e,i,n,s)}async load(t,e){this._initialized||await this.init();const i=xo(t),n=rr(t).map(h=>{if(typeof h!="string"){const c=this.resolver.getAlias(h);return c.some(d=>!this.resolver.hasKey(d))&&this.add(h),Array.isArray(c)?c[0]:c}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),s=this.resolver.resolve(n),l=await this._mapLoadToResolve(s,e);return i?l[n[0]]:l}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const n=this.resolver.resolveBundle(t),s={},l=Object.keys(n);let h=0,c=0;const d=()=>{e==null||e(++h/c)},m=l.map(y=>{const g=n[y];return c+=Object.keys(g).length,this._mapLoadToResolve(g,d).then(_=>{s[y]=_})});return await Promise.all(m),i?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Bi.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Bi.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const l={};return i.forEach((h,c)=>{const d=s[h.src],m=[h.src];h.alias&&m.push(...h.alias),l[n[c]]=d,Bi.set(m,d)}),l}async unload(t){this._initialized||await this.init();const e=rr(t).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=rr(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Bi.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,n)=>e.indexOf(i)===n),e}get detections(){return this._detections}get preferWorkers(){return zo.config.preferWorkers}set preferWorkers(t){It("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const Ua=new ow;ct.handleByList(et.LoadParser,Ua.loader.parsers).handleByList(et.ResolveParser,Ua.resolver.parsers).handleByList(et.CacheParser,Ua.cache.parsers).handleByList(et.DetectionParser,Ua.detections);const lw={extension:et.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof tt),getCacheableAssets:(r,t)=>{const e={};return r.forEach(i=>{t.forEach((n,s)=>{e[i+(s===0?"":s+1)]=n})}),e}};ct.add(lw);async function mg(r){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const hw={extension:{type:et.DetectionParser,priority:1},test:async()=>mg("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};ct.add(hw);const uw={extension:{type:et.DetectionParser,priority:0},test:async()=>mg("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};ct.add(uw);const mp=["png","jpg","jpeg"],cw={extension:{type:et.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...mp],remove:async r=>r.filter(t=>!mp.includes(t))};ct.add(cw);const dw="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function rc(r){return dw?!1:document.createElement("video").canPlayType(r)!==""}const fw={extension:{type:et.DetectionParser,priority:0},test:async()=>rc("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")};ct.add(fw);const pw={extension:{type:et.DetectionParser,priority:0},test:async()=>rc("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")};ct.add(pw);const mw={extension:{type:et.DetectionParser,priority:0},test:async()=>rc("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")};ct.add(mw);const gw={extension:et.ResolveParser,test:zo.test,parse:r=>{var t;return{resolution:parseFloat(((t=lt.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:Ye.extname(r).slice(1),src:r}}};ct.add(gw);const yw=[".xml",".fnt"],vw={extension:{type:et.LoadParser,priority:di.Normal},name:"loadBitmapFont",test(r){return yw.includes(Ye.extname(r).toLowerCase())},async testParse(r){return eo.test(r)||Mu.test(r)},async parse(r,t,e){const i=eo.test(r)?eo.parse(r):Mu.parse(r),{src:n}=t,{page:s}=i,l=[];for(let d=0;d<s.length;++d){const m=s[d].file;let y=Ye.join(Ye.dirname(n),m);y=P1(y,n),l.push(y)}const h=await e.load(l),c=l.map(d=>h[d]);return ni.install(i,c,!0)},async load(r,t){return(await lt.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};ct.add(vw);const bo={build(r){const t=r.points;let e,i,n,s,l,h;if(r.type===fe.CIRC){const x=r.shape;e=x.x,i=x.y,l=h=x.radius,n=s=0}else if(r.type===fe.ELIP){const x=r.shape;e=x.x,i=x.y,l=x.width,h=x.height,n=s=0}else{const x=r.shape,b=x.width/2,T=x.height/2;e=x.x+b,i=x.y+T,l=h=Math.max(0,Math.min(x.radius,Math.min(b,T))),n=b-l,s=T-h}if(!(l>=0&&h>=0&&n>=0&&s>=0)){t.length=0;return}const c=Math.ceil(2.3*Math.sqrt(l+h)),d=c*8+(n?4:0)+(s?4:0);if(t.length=d,d===0)return;if(c===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=i+s,t[2]=t[4]=e-n,t[5]=t[7]=i-s;return}let m=0,y=c*4+(n?2:0)+2,g=y,_=d;{const x=n+l,b=s,T=e+x,S=e-x,C=i+b;if(t[m++]=T,t[m++]=C,t[--y]=C,t[--y]=S,s){const A=i-b;t[g++]=S,t[g++]=A,t[--_]=A,t[--_]=T}}for(let x=1;x<c;x++){const b=Math.PI/2*(x/c),T=n+Math.cos(b)*l,S=s+Math.sin(b)*h,C=e+T,A=e-T,I=i+S,U=i-S;t[m++]=C,t[m++]=I,t[--y]=I,t[--y]=A,t[g++]=A,t[g++]=U,t[--_]=U,t[--_]=C}{const x=n,b=s+h,T=e+x,S=e-x,C=i+b,A=i-b;t[m++]=T,t[m++]=C,t[--_]=A,t[--_]=T,n&&(t[m++]=S,t[m++]=C,t[--_]=A,t[--_]=S)}},triangulate(r,t){const e=r.points,i=t.points,n=t.indices;if(e.length===0)return;let s=i.length/2;const l=s;let h,c;if(r.type!==fe.RREC){const m=r.shape;h=m.x,c=m.y}else{const m=r.shape;h=m.x+m.width/2,c=m.y+m.height/2}const d=r.matrix;i.push(r.matrix?d.a*h+d.c*c+d.tx:h,r.matrix?d.b*h+d.d*c+d.ty:c),s++,i.push(e[0],e[1]);for(let m=2;m<e.length;m+=2)i.push(e[m],e[m+1]),n.push(s++,l,s);n.push(l+1,l,s)}};function gp(r,t=!1){const e=r.length;if(e<6)return;let i=0;for(let n=0,s=r[e-2],l=r[e-1];n<e;n+=2){const h=r[n],c=r[n+1];i+=(h-s)*(c+l),s=h,l=c}if(!t&&i>0||t&&i<=0){const n=e/2;for(let s=n+n%2;s<e;s+=2){const l=e-s-2,h=e-s-1,c=s,d=s+1;[r[l],r[c]]=[r[c],r[l]],[r[h],r[d]]=[r[d],r[h]]}}}const gg={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points;const i=r.holes,n=t.points,s=t.indices;if(e.length>=6){gp(e,!1);const l=[];for(let d=0;d<i.length;d++){const m=i[d];gp(m.points,!0),l.push(e.length/2),e=e.concat(m.points)}const h=E0(e,l,2);if(!h)return;const c=n.length/2;for(let d=0;d<h.length;d+=3)s.push(h[d]+c),s.push(h[d+1]+c),s.push(h[d+2]+c);for(let d=0;d<e.length;d++)n.push(e[d])}}},_w={build(r){const t=r.shape,e=t.x,i=t.y,n=t.width,s=t.height,l=r.points;l.length=0,n>=0&&s>=0&&l.push(e,i,e+n,i,e+n,i+s,e,i+s)},triangulate(r,t){const e=r.points,i=t.points;if(e.length===0)return;const n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},xw={build(r){bo.build(r)},triangulate(r,t){bo.triangulate(r,t)}};var je=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(je||{}),oi=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(oi||{});const Mn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class yp{static curveTo(t,e,i,n,s,l){const h=l[l.length-2],c=l[l.length-1]-e,d=h-t,m=n-e,y=i-t,g=Math.abs(c*y-d*m);if(g<1e-8||s===0)return(l[l.length-2]!==t||l[l.length-1]!==e)&&l.push(t,e),null;const _=c*c+d*d,x=m*m+y*y,b=c*m+d*y,T=s*Math.sqrt(_)/g,S=s*Math.sqrt(x)/g,C=T*b/_,A=S*b/x,I=T*y+S*d,U=T*m+S*c,W=d*(S+C),j=c*(S+C),G=y*(T+A),q=m*(T+A),it=Math.atan2(j-U,W-I),mt=Math.atan2(q-U,G-I);return{cx:I+t,cy:U+e,radius:s,startAngle:it,endAngle:mt,anticlockwise:d*m>y*c}}static arc(t,e,i,n,s,l,h,c,d){const m=h-l,y=Mn._segmentsCount(Math.abs(m)*s,Math.ceil(Math.abs(m)/co)*40),g=m/(y*2),_=g*2,x=Math.cos(g),b=Math.sin(g),T=y-1,S=T%1/T;for(let C=0;C<=T;++C){const A=C+S*C,I=g+l+_*A,U=Math.cos(I),W=-Math.sin(I);d.push((x*U+b*W)*s+i,(x*-W+b*U)*s+n)}}}class bw{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class ic{static curveLength(t,e,i,n,s,l,h,c){let d=0,m=0,y=0,g=0,_=0,x=0,b=0,T=0,S=0,C=0,A=0,I=t,U=e;for(let W=1;W<=10;++W)m=W/10,y=m*m,g=y*m,_=1-m,x=_*_,b=x*_,T=b*t+3*x*m*i+3*_*y*s+g*h,S=b*e+3*x*m*n+3*_*y*l+g*c,C=I-T,A=U-S,I=T,U=S,d+=Math.sqrt(C*C+A*A);return d}static curveTo(t,e,i,n,s,l,h){const c=h[h.length-2],d=h[h.length-1];h.length-=2;const m=Mn._segmentsCount(ic.curveLength(c,d,t,e,i,n,s,l));let y=0,g=0,_=0,x=0,b=0;h.push(c,d);for(let T=1,S=0;T<=m;++T)S=T/m,y=1-S,g=y*y,_=g*y,x=S*S,b=x*S,h.push(_*c+3*g*S*t+3*y*x*i+b*s,_*d+3*g*S*e+3*y*x*n+b*l)}}function vp(r,t,e,i,n,s,l,h){const c=r-e*n,d=t-i*n,m=r+e*s,y=t+i*s;let g,_;l?(g=i,_=-e):(g=-i,_=e);const x=c+g,b=d+_,T=m+g,S=y+_;return h.push(x,b,T,S),2}function Si(r,t,e,i,n,s,l,h){const c=e-r,d=i-t;let m=Math.atan2(c,d),y=Math.atan2(n-r,s-t);h&&m<y?m+=Math.PI*2:!h&&m>y&&(y+=Math.PI*2);let g=m;const _=y-m,x=Math.abs(_),b=Math.sqrt(c*c+d*d),T=(15*x*Math.sqrt(b)/Math.PI>>0)+1,S=_/T;if(g+=S,h){l.push(r,t,e,i);for(let C=1,A=g;C<T;C++,A+=S)l.push(r,t,r+Math.sin(A)*b,t+Math.cos(A)*b);l.push(r,t,n,s)}else{l.push(e,i,r,t);for(let C=1,A=g;C<T;C++,A+=S)l.push(r+Math.sin(A)*b,t+Math.cos(A)*b,r,t);l.push(n,s,r,t)}return T*2}function ww(r,t){const e=r.shape;let i=r.points||e.points.slice();const n=t.closePointEps;if(i.length===0)return;const s=r.lineStyle,l=new Bt(i[0],i[1]),h=new Bt(i[i.length-2],i[i.length-1]),c=e.type!==fe.POLY||e.closeStroke,d=Math.abs(l.x-h.x)<n&&Math.abs(l.y-h.y)<n;if(c){i=i.slice(),d&&(i.pop(),i.pop(),h.set(i[i.length-2],i[i.length-1]));const ot=(l.x+h.x)*.5,B=(h.y+l.y)*.5;i.unshift(ot,B),i.push(ot,B)}const m=t.points,y=i.length/2;let g=i.length;const _=m.length/2,x=s.width/2,b=x*x,T=s.miterLimit*s.miterLimit;let S=i[0],C=i[1],A=i[2],I=i[3],U=0,W=0,j=-(C-I),G=S-A,q=0,it=0,mt=Math.sqrt(j*j+G*G);j/=mt,G/=mt,j*=x,G*=x;const J=s.alignment,F=(1-J)*2,V=J*2;c||(s.cap===oi.ROUND?g+=Si(S-j*(F-V)*.5,C-G*(F-V)*.5,S-j*F,C-G*F,S+j*V,C+G*V,m,!0)+2:s.cap===oi.SQUARE&&(g+=vp(S,C,j,G,F,V,!0,m))),m.push(S-j*F,C-G*F,S+j*V,C+G*V);for(let ot=1;ot<y-1;++ot){S=i[(ot-1)*2],C=i[(ot-1)*2+1],A=i[ot*2],I=i[ot*2+1],U=i[(ot+1)*2],W=i[(ot+1)*2+1],j=-(C-I),G=S-A,mt=Math.sqrt(j*j+G*G),j/=mt,G/=mt,j*=x,G*=x,q=-(I-W),it=A-U,mt=Math.sqrt(q*q+it*it),q/=mt,it/=mt,q*=x,it*=x;const B=A-S,K=C-I,k=A-U,z=W-I,ht=B*k+K*z,_t=K*k-z*B,yt=_t<0;if(Math.abs(_t)<.001*Math.abs(ht)){m.push(A-j*F,I-G*F,A+j*V,I+G*V),ht>=0&&(s.join===je.ROUND?g+=Si(A,I,A-j*F,I-G*F,A-q*F,I-it*F,m,!1)+4:g+=2,m.push(A-q*V,I-it*V,A+q*F,I+it*F));continue}const Nt=(-j+S)*(-G+I)-(-j+A)*(-G+C),Ct=(-q+U)*(-it+I)-(-q+A)*(-it+W),Mt=(B*Ct-k*Nt)/_t,ie=(z*Nt-K*Ct)/_t,ue=(Mt-A)*(Mt-A)+(ie-I)*(ie-I),jt=A+(Mt-A)*F,vt=I+(ie-I)*F,kt=A-(Mt-A)*V,At=I-(ie-I)*V,ke=Math.min(B*B+K*K,k*k+z*z),Oe=yt?F:V,pi=ke+Oe*Oe*b,Vo=ue<=pi;let $i=s.join;if($i===je.MITER&&ue/b>T&&($i=je.BEVEL),Vo)switch($i){case je.MITER:{m.push(jt,vt,kt,At);break}case je.BEVEL:{yt?m.push(jt,vt,A+j*V,I+G*V,jt,vt,A+q*V,I+it*V):m.push(A-j*F,I-G*F,kt,At,A-q*F,I-it*F,kt,At),g+=2;break}case je.ROUND:{yt?(m.push(jt,vt,A+j*V,I+G*V),g+=Si(A,I,A+j*V,I+G*V,A+q*V,I+it*V,m,!0)+4,m.push(jt,vt,A+q*V,I+it*V)):(m.push(A-j*F,I-G*F,kt,At),g+=Si(A,I,A-j*F,I-G*F,A-q*F,I-it*F,m,!1)+4,m.push(A-q*F,I-it*F,kt,At));break}}else{switch(m.push(A-j*F,I-G*F,A+j*V,I+G*V),$i){case je.MITER:{yt?m.push(kt,At,kt,At):m.push(jt,vt,jt,vt),g+=2;break}case je.ROUND:{yt?g+=Si(A,I,A+j*V,I+G*V,A+q*V,I+it*V,m,!0)+2:g+=Si(A,I,A-j*F,I-G*F,A-q*F,I-it*F,m,!1)+2;break}}m.push(A-q*F,I-it*F,A+q*V,I+it*V),g+=2}}S=i[(y-2)*2],C=i[(y-2)*2+1],A=i[(y-1)*2],I=i[(y-1)*2+1],j=-(C-I),G=S-A,mt=Math.sqrt(j*j+G*G),j/=mt,G/=mt,j*=x,G*=x,m.push(A-j*F,I-G*F,A+j*V,I+G*V),c||(s.cap===oi.ROUND?g+=Si(A-j*(F-V)*.5,I-G*(F-V)*.5,A-j*F,I-G*F,A+j*V,I+G*V,m,!1)+2:s.cap===oi.SQUARE&&(g+=vp(A,I,j,G,F,V,!1,m)));const nt=t.indices,ft=Mn.epsilon*Mn.epsilon;for(let ot=_;ot<g+_-2;++ot)S=m[ot*2],C=m[ot*2+1],A=m[(ot+1)*2],I=m[(ot+1)*2+1],U=m[(ot+2)*2],W=m[(ot+2)*2+1],!(Math.abs(S*(I-W)+A*(W-C)+U*(C-I))<ft)&&nt.push(ot,ot+1,ot+2)}function Tw(r,t){let e=0;const i=r.shape,n=r.points||i.points,s=i.type!==fe.POLY||i.closeStroke;if(n.length===0)return;const l=t.points,h=t.indices,c=n.length/2,d=l.length/2;let m=d;for(l.push(n[0],n[1]),e=1;e<c;e++)l.push(n[e*2],n[e*2+1]),h.push(m,m+1),m++;s&&h.push(m,d)}function _p(r,t){r.lineStyle.native?Tw(r,t):ww(r,t)}class nc{static curveLength(t,e,i,n,s,l){const h=t-2*i+s,c=e-2*n+l,d=2*i-2*t,m=2*n-2*e,y=4*(h*h+c*c),g=4*(h*d+c*m),_=d*d+m*m,x=2*Math.sqrt(y+g+_),b=Math.sqrt(y),T=2*y*b,S=2*Math.sqrt(_),C=g/b;return(T*x+b*g*(x-S)+(4*_*y-g*g)*Math.log((2*b+C+x)/(C+S)))/(4*T)}static curveTo(t,e,i,n,s){const l=s[s.length-2],h=s[s.length-1],c=Mn._segmentsCount(nc.curveLength(l,h,t,e,i,n));let d=0,m=0;for(let y=1;y<=c;++y){const g=y/c;d=l+(t-l)*g,m=h+(e-h)*g,s.push(d+(t+(i-t)*g-d)*g,m+(e+(n-e)*g-m)*g)}}}const jh={[fe.POLY]:gg,[fe.CIRC]:bo,[fe.ELIP]:bo,[fe.RECT]:_w,[fe.RREC]:xw},xp=[],Ga=[];class wo{constructor(t,e=null,i=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new wo(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const un=new Bt,yg=class vg extends Tm{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new yo,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Ga.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),xp.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,n=null){const s=new wo(t,e,i,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const i=new wo(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let i=0;i<e.length;++i){const n=e[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,un):un.copyFrom(t),n.shape.contains(un.x,un.y))){let s=!1;if(n.holes){for(let l=0;l<n.holes.length;l++)if(n.holes[l].shape.contains(un.x,un.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let i=null,n=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],n=i.style);for(let c=this.shapeIndex;c<e.length;c++){this.shapeIndex++;const d=e[c],m=d.fillStyle,y=d.lineStyle;jh[d.type].build(d),d.matrix&&this.transformPoints(d.points,d.matrix),(m.visible||y.visible)&&this.processHoles(d.holes);for(let g=0;g<2;g++){const _=g===0?m:y;if(!_.visible)continue;const x=_.texture.baseTexture,b=this.indices.length,T=this.points.length/2;x.wrapMode=zr.REPEAT,g===0?this.processFill(d):this.processLine(d);const S=this.points.length/2-T;S!==0&&(i&&!this._compareStyles(n,_)&&(i.end(b,T),i=null),i||(i=xp.pop()||new bw,i.begin(_,b,T),this.batches.push(i),n=_),this.addUvs(this.points,t,_.texture,T,S,_.matrix))}}const s=this.indices.length,l=this.points.length/2;if(i&&i.end(s,l),this.batches.length===0){this.batchable=!0;return}const h=l>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&h===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=h?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const i=this.graphicsData[t],n=i.fillStyle,s=i.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,i=t.length;e<i;e++){const n=t[e];for(let s=0;s<n.size;s++){const l=n.start+s;this.indicesUint16[l]=this.indicesUint16[l]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<vg.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++wt._globalBatch;for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].texArray.clear(),Ga.push(this.drawCalls[y]);this.drawCalls.length=0;const e=this.colors,i=this.textureIds;let n=Ga.pop();n||(n=new gu,n.texArray=new xu),n.texArray.count=0,n.start=0,n.size=0,n.type=ir.TRIANGLES;let s=0,l=null,h=0,c=!1,d=ir.TRIANGLES,m=0;this.drawCalls.push(n);for(let y=0;y<this.batches.length;y++){const g=this.batches[y],_=8,x=g.style,b=x.texture.baseTexture;c!==!!x.native&&(c=!!x.native,d=c?ir.LINES:ir.TRIANGLES,l=null,s=_,t++),l!==b&&(l=b,b._batchEnabled!==t&&(s===_&&(t++,s=0,n.size>0&&(n=Ga.pop(),n||(n=new gu,n.texArray=new xu),this.drawCalls.push(n)),n.start=m,n.size=0,n.texArray.count=0,n.type=d),b.touched=1,b._batchEnabled=t,b._batchLocation=s,b.wrapMode=zr.REPEAT,n.texArray.elements[n.texArray.count++]=b,s++)),n.size+=g.size,m+=g.size,h=b._batchLocation,this.addColors(e,x.color,x.alpha,g.attribSize,g.attribStart),this.addTextureIds(i,h,g.attribSize,g.attribStart)}wt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,s=new ArrayBuffer(t.length*3*4),l=new Float32Array(s),h=new Uint32Array(s);let c=0;for(let d=0;d<t.length/2;d++)l[c++]=t[d*2],l[c++]=t[d*2+1],l[c++]=e[d*2],l[c++]=e[d*2+1],h[c++]=i[d],l[c++]=n[d];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?gg.triangulate(t,this):jh[t.type].triangulate(t,this)}processLine(t){_p(t,this);for(let e=0;e<t.holes.length;e++)_p(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const i=t[e];jh[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){const n=t[i*2],s=t[i*2+1];t[i*2]=e.a*n+e.c*s+e.tx,t[i*2+1]=e.b*n+e.d*s+e.ty}}addColors(t,e,i,n,s=0){const l=Xt.shared.setValue(e).toLittleEndianNumber(),h=Xt.shared.setValue(l).toPremultiplied(i);t.length=Math.max(t.length,s+n);for(let c=0;c<n;c++)t[s+c]=h}addTextureIds(t,e,i,n=0){t.length=Math.max(t.length,n+i);for(let s=0;s<i;s++)t[n+s]=e}addUvs(t,e,i,n,s,l=null){let h=0;const c=e.length,d=i.frame;for(;h<s;){let y=t[(n+h)*2],g=t[(n+h)*2+1];if(l){const _=l.a*y+l.c*g+l.tx;g=l.b*y+l.d*g+l.ty,y=_}h++,e.push(y/d.width,g/d.height)}const m=i.baseTexture;(d.width<m.width||d.height<m.height)&&this.adjustUvs(e,i,c,s)}adjustUvs(t,e,i,n){const s=e.baseTexture,l=1e-6,h=i+n*2,c=e.frame,d=c.width/s.width,m=c.height/s.height;let y=c.x/c.width,g=c.y/c.height,_=Math.floor(t[i]+l),x=Math.floor(t[i+1]+l);for(let b=i+2;b<h;b+=2)_=Math.min(_,Math.floor(t[b]+l)),x=Math.min(x,Math.floor(t[b+1]+l));y-=_,g-=x;for(let b=i;b<h;b+=2)t[b]=(t[b]+y)*d,t[b+1]=(t[b+1]+g)*m}};yg.BATCHABLE_SIZE=100;let Aw=yg;class Ho{constructor(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Ho;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class sc extends Ho{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=oi.BUTT,this.join=je.MITER,this.miterLimit=10}clone(){const t=new sc;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=oi.BUTT,this.join=je.MITER,this.miterLimit=10}}const Vh={},ku=class io extends Fe{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ho,this._lineStyle=new sc,this._matrix=null,this._holeMode=!1,this.state=Rr.for2d(),this._geometry=t||new Aw,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Xt(16777215),this.blendMode=dt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new io(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i,n=.5,s=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:i,alignment:n,native:s}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:tt.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:oi.BUTT,join:je.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Di,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Di,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,n=i[i.length-2],s=i[i.length-1];return(n!==t||s!==e)&&i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),nc.curveTo(t,e,i,n,s),this}bezierCurveTo(t,e,i,n,s,l){return this._initCurve(),ic.curveTo(t,e,i,n,s,l,this.currentPath.points),this}arcTo(t,e,i,n,s){this._initCurve(t,e);const l=this.currentPath.points,h=yp.curveTo(t,e,i,n,s,l);if(h){const{cx:c,cy:d,radius:m,startAngle:y,endAngle:g,anticlockwise:_}=h;this.arc(c,d,m,y,g,_)}return this}arc(t,e,i,n,s,l=!1){if(n===s)return this;if(!l&&s<=n?s+=co:l&&n<=s&&(n+=co),s-n===0)return this;const h=t+Math.cos(n)*i,c=e+Math.sin(n)*i,d=this._geometry.closePointEps;let m=this.currentPath?this.currentPath.points:null;if(m){const y=Math.abs(m[m.length-2]-h),g=Math.abs(m[m.length-1]-c);y<d&&g<d||m.push(h,c)}else this.moveTo(h,c),m=this.currentPath.points;return yp.arc(h,c,t,e,i,n,s,l,m),this}beginFill(t=0,e){return this.beginTextureFill({texture:tt.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Xt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:tt.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,n){return this.drawShape(new Tt(t,e,i,n))}drawRoundedRect(t,e,i,n,s){return this.drawShape(new Oo(t,e,i,n,s))}drawCircle(t,e,i){return this.drawShape(new Fo(t,e,i))}drawEllipse(t,e,i,n){return this.drawShape(new ko(t,e,i,n))}drawPolygon(...t){let e,i=!0;const n=t[0];n.points?(i=n.closeStroke,e=n.points):Array.isArray(t[0])?e=t[0]:e=t;const s=new Di(e);return s.closeStroke=i,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===fe.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let n=0;n<i;n++){const s=t.batches[n],l=s.style.color,h=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),c=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),d=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),m={vertexData:h,blendMode:e,indices:d,uvs:c,_batchRGB:Xt.shared.setValue(l).toRgbArray(),_tintRGB:l,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=m}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){const n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}}_renderDirect(t){const e=this._resolveDirectShader(t),i=this._geometry,n=this.worldAlpha,s=e.uniforms,l=i.drawCalls;s.translationMatrix=this.transform.worldTransform,Xt.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let h=0,c=l.length;h<c;h++)this._renderDrawCallDirect(t,i.drawCalls[h])}_renderDrawCallDirect(t,e){const{texArray:i,type:n,size:s,start:l}=e,h=i.count;for(let c=0;c<h;c++)t.texture.bind(i.elements[c],c);t.geometry.draw(n,s,l)}_resolveDirectShader(t){let e=this.shader;const i=this.pluginName;if(!e){if(!Vh[i]){const{maxTextures:n}=t.plugins[i],s=new Int32Array(n);for(let c=0;c<n;c++)s[c]=c;const l={tint:new Float32Array([1,1,1,1]),translationMatrix:new $t,default:ar.from({uSamplers:s},!0)},h=t.plugins[i]._shader.program;Vh[i]=new Er(h,l)}e=Vh[i]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:i,maxX:n,maxY:s}=t.bounds;this._bounds.addFrame(this.transform,e,i,n,s)}containsPoint(t){return this.worldTransform.applyInverse(t,io._TEMP_POINT),this._geometry.containsPoint(io._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Xt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,i=e.a,n=e.b,s=e.c,l=e.d,h=e.tx,c=e.ty,d=this._geometry.points,m=this.vertexData;let y=0;for(let g=0;g<d.length;g+=2){const _=d[g],x=d[g+1];m[y++]=i*_+s*x+h,m[y++]=l*x+n*_+c}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};ku.curves=Mn,ku._TEMP_POINT=new Bt;let Wh=ku;class Sw extends Go{constructor(t=100,e=100,i=10,n=10){super(),this.segWidth=i,this.segHeight=n,this.width=t,this.height=e,this.build()}build(){const t=this.segWidth*this.segHeight,e=[],i=[],n=[],s=this.segWidth-1,l=this.segHeight-1,h=this.width/s,c=this.height/l;for(let m=0;m<t;m++){const y=m%this.segWidth,g=m/this.segWidth|0;e.push(y*h,g*c),i.push(y/s,g/l)}const d=s*l;for(let m=0;m<d;m++){const y=m%s,g=m/s|0,_=g*this.segWidth+y,x=g*this.segWidth+y+1,b=(g+1)*this.segWidth+y,T=(g+1)*this.segWidth+y+1;n.push(_,x,b,x,T,b)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class Ew extends Go{constructor(t=200,e,i=0){super(new Float32Array(e.length*4),new Float32Array(e.length*4),new Uint16Array((e.length-1)*6)),this.points=e,this._width=t,this.textureScale=i,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),n.data=new Uint16Array((t.length-1)*6));const s=i.data,l=n.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let h=0,c=t[0];const d=this._width*this.textureScale,m=t.length;for(let g=0;g<m;g++){const _=g*4;if(this.textureScale>0){const x=c.x-t[g].x,b=c.y-t[g].y,T=Math.sqrt(x*x+b*b);c=t[g],h+=T/d}else h=g/(m-1);s[_]=h,s[_+1]=0,s[_+2]=h,s[_+3]=1}let y=0;for(let g=0;g<m-1;g++){const _=g*2;l[y++]=_,l[y++]=_+1,l[y++]=_+2,l[y++]=_+2,l[y++]=_+1,l[y++]=_+3}i.update(),n.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e=t[0],i,n=0,s=0;const l=this.buffers[0].data,h=t.length,c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let d=0;d<h;d++){const m=t[d],y=d*4;d<t.length-1?i=t[d+1]:i=m,s=-(i.x-e.x),n=i.y-e.y;const g=Math.sqrt(n*n+s*s);g<1e-6?(n=0,s=0):(n/=g,s/=g,n*=c,s*=c),l[y]=m.x+n,l[y+1]=m.y+s,l[y+2]=m.x-n,l[y+3]=m.y-s,e=m}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class Iw extends Cs{constructor(t,e,i){const n=new Sw(t.width,t.height,e,i),s=new Rs(tt.WHITE);super(n,s),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:e,height:i}=this.shader.texture;this.autoResize&&(t.width!==e||t.height!==i)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const za=10;class Cw extends Iw{constructor(t,e,i,n,s){var l,h,c,d;super(tt.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=e??((l=t.defaultBorders)==null?void 0:l.left)??za,this._rightWidth=n??((h=t.defaultBorders)==null?void 0:h.right)??za,this._topHeight=i??((c=t.defaultBorders)==null?void 0:c.top)??za,this._bottomHeight=s??((d=t.defaultBorders)==null?void 0:d.bottom)??za,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,n=this._height>i?1:this._height/i;return Math.min(e,n)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const i=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class Rw extends Cs{constructor(t=tt.EMPTY,e,i,n,s){const l=new Go(e,i,n);l.getBuffer("aVertexPosition").static=!1;const h=new Rs(t);super(l,h,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class Pw extends Cs{constructor(t,e,i=0){const n=new Ew(t.height,e,i),s=new Rs(t);i>0&&(t.baseTexture.wrapMode=zr.REPEAT),super(n,s),this.autoUpdate=!0}_render(t){const e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),super._render(t)}}class Nw extends Fe{constructor(t=1500,e,i=16384,n=!1){super();const s=16384;i>s&&(i=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=dt.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tintColor=new Xt(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const e=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class bp{constructor(t,e,i){this.geometry=new ui,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||pt.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new Kt(Vx(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let l=0;l<this.dynamicProperties.length;++l){const h=this.dynamicProperties[l];h.offset=e,e+=h.size,this.dynamicStride+=h.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Kt(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let l=0;l<this.staticProperties.length;++l){const h=this.staticProperties[l];h.offset=n,n+=h.size,this.staticStride+=h.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Kt(this.staticData,!0,!1);for(let l=0;l<this.dynamicProperties.length;++l){const h=this.dynamicProperties[l];t.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===pt.UNSIGNED_BYTE,h.type,this.dynamicStride*4,h.offset*4)}for(let l=0;l<this.staticProperties.length;++l){const h=this.staticProperties[l];t.addAttribute(h.attributeName,this.staticBuffer,0,h.type===pt.UNSIGNED_BYTE,h.type,this.staticStride*4,h.offset*4)}}uploadDynamic(t,e,i){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(t,e,i,s.type===pt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(t,e,i,s.type===pt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var Mw=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Fw=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class _g extends Lo{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new $t,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:pt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Er.from(Fw,Mw,{}),this.state=Rr.for2d()}render(t){const e=t.children,i=t._maxSize,n=t._batchSize,s=this.renderer;let l=e.length;if(l===0)return;l>i&&!t.autoResize&&(l=i);let h=t._buffers;h||(h=t._buffers=this.generateBuffers(t));const c=e[0]._texture.baseTexture,d=c.alphaMode>0;this.state.blendMode=_m(t.blendMode,d),s.state.set(this.state);const m=s.gl,y=t.worldTransform.copyTo(this.tempMatrix);y.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=y.toArray(!0),this.shader.uniforms.uColor=Xt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,d).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=c,this.renderer.shader.bind(this.shader);let g=!1;for(let _=0,x=0;_<l;_+=n,x+=1){let b=l-_;b>n&&(b=n),x>=h.length&&h.push(this._generateOneMoreBuffer(t));const T=h[x];T.uploadDynamic(e,_,b);const S=t._bufferUpdateIDs[x]||0;g=g||T._updateID<S,g&&(T._updateID=t._updateID,T.uploadStatic(e,_,b)),s.geometry.bind(T.geometry),m.drawElements(m.TRIANGLES,b*6,m.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,n=t._batchSize,s=t._properties;for(let l=0;l<i;l+=n)e.push(new bp(this.properties,s,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new bp(this.properties,i,e)}uploadVertices(t,e,i,n,s,l){let h=0,c=0,d=0,m=0;for(let y=0;y<i;++y){const g=t[e+y],_=g._texture,x=g.scale.x,b=g.scale.y,T=_.trim,S=_.orig;T?(c=T.x-g.anchor.x*S.width,h=c+T.width,m=T.y-g.anchor.y*S.height,d=m+T.height):(h=S.width*(1-g.anchor.x),c=S.width*-g.anchor.x,d=S.height*(1-g.anchor.y),m=S.height*-g.anchor.y),n[l]=c*x,n[l+1]=m*b,n[l+s]=h*x,n[l+s+1]=m*b,n[l+s*2]=h*x,n[l+s*2+1]=d*b,n[l+s*3]=c*x,n[l+s*3+1]=d*b,l+=s*4}}uploadPosition(t,e,i,n,s,l){for(let h=0;h<i;h++){const c=t[e+h].position;n[l]=c.x,n[l+1]=c.y,n[l+s]=c.x,n[l+s+1]=c.y,n[l+s*2]=c.x,n[l+s*2+1]=c.y,n[l+s*3]=c.x,n[l+s*3+1]=c.y,l+=s*4}}uploadRotation(t,e,i,n,s,l){for(let h=0;h<i;h++){const c=t[e+h].rotation;n[l]=c,n[l+s]=c,n[l+s*2]=c,n[l+s*3]=c,l+=s*4}}uploadUvs(t,e,i,n,s,l){for(let h=0;h<i;++h){const c=t[e+h]._texture._uvs;c?(n[l]=c.x0,n[l+1]=c.y0,n[l+s]=c.x1,n[l+s+1]=c.y1,n[l+s*2]=c.x2,n[l+s*2+1]=c.y2,n[l+s*3]=c.x3,n[l+s*3+1]=c.y3,l+=s*4):(n[l]=0,n[l+1]=0,n[l+s]=0,n[l+s+1]=0,n[l+s*2]=0,n[l+s*2+1]=0,n[l+s*3]=0,n[l+s*3+1]=0,l+=s*4)}}uploadTint(t,e,i,n,s,l){for(let h=0;h<i;++h){const c=t[e+h],d=Xt.shared.setValue(c._tintRGB).toPremultiplied(c.alpha,c.texture.baseTexture.alphaMode>0);n[l]=d,n[l+s]=d,n[l+s*2]=d,n[l+s*3]=d,l+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}_g.extension={name:"particle",type:et.RendererPlugin};ct.add(_g);class Ps extends Hi{constructor(t,e=!0){super(t[0]instanceof tt?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ne.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ne.shared.add(this.update,this,Is.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){let n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let i=0;i<t.length;++i)e.push(tt.from(t[i]));return new Ps(e)}static fromImages(t){const e=[];for(let i=0;i<t.length;++i)e.push(tt.from(t[i]));return new Ps(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof tt)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ne.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ne.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const ls=new Bt;class ac extends Hi{constructor(t,e=100,i=100){super(t),this.tileTransform=new Bo,this._width=e,this._height=i,this.uvMatrix=this.texture.uvMatrix||new Ju(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const e=this._texture;!e||!e.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Tt),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,ls);const e=this._width,i=this._height,n=-e*this.anchor._x;if(ls.x>=n&&ls.x<n+e){const s=-i*this.anchor._y;if(ls.y>=s&&ls.y<s+i)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){const i=t instanceof tt?t:tt.from(t,e);return new ac(i,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var kw=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Ow=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Bw=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,wp=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Lw=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Ha=new $t;class xg extends Lo{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Fm,this.state=Rr.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Er.from(wp,Lw,e),this.shader=t.context.webGLVersion>1?Er.from(Ow,kw,e):Er.from(wp,Bw,e)}render(t){const e=this.renderer,i=this.quad;let n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,l=t.uvRespectAnchor?t.anchor.y:0;n=i.uvs,n[0]=n[6]=-s,n[1]=n[3]=-l,n[2]=n[4]=1-s,n[5]=n[7]=1-l,i.invalidate();const h=t._texture,c=h.baseTexture,d=c.alphaMode>0,m=t.tileTransform.localTransform,y=t.uvMatrix;let g=c.isPowerOfTwo&&h.frame.width===c.width&&h.frame.height===c.height;g&&(c._glTextures[e.CONTEXT_UID]?g=c.wrapMode!==zr.CLAMP:c.wrapMode===zr.CLAMP&&(c.wrapMode=zr.REPEAT));const _=g?this.simpleShader:this.shader,x=h.width,b=h.height,T=t._width,S=t._height;Ha.set(m.a*x/T,m.b*x/S,m.c*b/T,m.d*b/S,m.tx/T,m.ty/S),Ha.invert(),g?Ha.prepend(y.mapCoord):(_.uniforms.uMapCoord=y.mapCoord.toArray(!0),_.uniforms.uClampFrame=y.uClampFrame,_.uniforms.uClampOffset=y.uClampOffset),_.uniforms.uTransform=Ha.toArray(!0),_.uniforms.uColor=Xt.shared.setValue(t.tint).premultiply(t.worldAlpha,d).toArray(_.uniforms.uColor),_.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),_.uniforms.uSampler=h,e.shader.bind(_),e.geometry.bind(i),this.state.blendMode=_m(t.blendMode,d),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}xg.extension={name:"tilingSprite",type:et.RendererPlugin};ct.add(xg);const bg=class Ou{constructor(t){this.stage=new Fe,t=Object.assign({forceCanvas:!1},t),this.renderer=s1(t),Ou._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const i=Ou._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};bg._plugins=[];let $o=bg;ct.handleByList(et.Application,$o._plugins);class wg{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;e=n,i=s}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}wg.extension=et.Application;ct.add(wg);var Tg={exports:{}},Dw="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Uw=Dw,Gw=Uw;function Ag(){}function Sg(){}Sg.resetWarningCache=Ag;var zw=function(){function r(i,n,s,l,h,c){if(c!==Gw){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function t(){return r}var e={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:t,element:r,elementType:r,instanceOf:t,node:r,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Sg,resetWarningCache:Ag};return e.PropTypes=e,e};Tg.exports=zw();var Hw=Tg.exports;const Ot=$u(Hw);function Me(r){return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(r)}function Eg(r){var t=function(e,i){if(Me(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,i||"default");if(Me(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}(r,"string");return Me(t)==="symbol"?t:String(t)}function Qt(r,t,e){return(t=Eg(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Xh(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=r[e];return i}function jr(r){return function(t){if(Array.isArray(t))return Xh(t)}(r)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(r)||function(t,e){if(t){if(typeof t=="string")return Xh(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Xh(t,e):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yt(r,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),n=2;n<e;n++)i[n-2]=arguments[n]}var $w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vw=function(r){return r==null};function ps(r){var t=[];if(r===void 0)return t;if(typeof r=="string")t=r.split(",");else if(typeof r=="number")t=[r];else if(Array.isArray(r))t=jr(r);else{if(r===null||Me(r)!=="object")return t;t=[r&&(r==null?void 0:r.x)||0,r&&(r==null?void 0:r.y)||0]}return t.filter(function(e){return!Vw(e)&&!isNaN(e)}).map(Number)}function Tp(r,t){if(r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function Yh(r){return r instanceof Bt||r instanceof Ar}var To=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function qh(r,t,e){if(Yh(r[t])&&Yh(e))r[t].copyFrom(e);else if(Yh(r[t])){var i=ps(e);Yt(i!==void 0&&i.length>0&&i.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",t,JSON.stringify(e),Me(e)),r[t].set(i.shift(),i.shift())}else r[t]=e}var cn,Ig=function(r){var t,e=r;if(!Array.isArray(e)){if(t=r,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");e=Object.keys(r)}var i={};return e.forEach(function(n){i[n]=!0}),function(n){return i[n]!==void 0}},Cg=function(r){return function(){return!r.apply(void 0,arguments)}},Bu="children",Ww=(Qt(cn={},Bu,!0),Qt(cn,"parent",!0),Qt(cn,"worldAlpha",!0),Qt(cn,"worldTransform",!0),Qt(cn,"worldVisible",!0),cn),Lu={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Ir=function(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=function(h){return requestAnimationFrame(function(){var c,d;h==null||(c=h.__reactpixi)===null||c===void 0||(d=c.root)===null||d===void 0||d.emit("__REACT_PIXI_REQUEST_RENDER__")})},n=function(h,c){if(e.hasOwnProperty(h))return Yt(c.typeofs.some(function(d){return Me(e[h])===d})||c.instanceofs.some(function(d){return e[h]instanceof d}),"".concat(r," ").concat(h," prop is invalid")),e[h]};if(e.texture)return Yt(e.texture instanceof tt,"".concat(r," texture needs to be typeof `Texture`")),e.texture;var s=n("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||n("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||n("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,tt]});Yt(!!s,"".concat(r," could not get texture from props"));var l=tt.from(s);return l.__reactpixi={root:t},l.once("update",i),l.once("loaded",i),l.valid&&i(l),l},Xw=Cg(Ig([].concat(jr(Object.keys(Ww)),jr(To))));function Cr(r,t,e){var i=!1;if(Yt(Gi.prototype.isPrototypeOf(r),"instance needs to be typeof `DisplayObject`, got `%s`",Me(r)),!e.ignoreEvents)for(var n=typeof r.removeListener=="function",s=typeof r.on=="function",l=0;l<To.length;l++){var h=To[l];t[h]!==e[h]&&(i=!0,typeof t[h]=="function"&&n&&r.removeListener(h,t[h]),typeof e[h]=="function"&&s&&r.on(h,e[h]))}var c=Object.keys(e||{});if(e.overwriteProps){for(var d=0;d<c.length;d++){var m=c[d];t[m]!==e[m]&&(i=!0,qh(r,m,e[m]))}return i}for(var y=c.filter(Xw),g=0;g<y.length;g++){var _=y[g],x=e[_];e[_]!==t[_]&&(i=!0),x!==void 0?qh(r,_,x):_ in Lu?(console.warn("setting default value: ".concat(_,", from: ").concat(r[_]," to: ").concat(x," for"),r),i=!0,qh(r,_,Lu[_])):console.warn("ignoring prop: ".concat(_,", from ").concat(r[_]," to ").concat(x," for"),r)}return i}var Yw=function(r,t){var e=t.text,i=t.style;return new C1(e,i)},qw=function(){return new Fe};function fi(r,t){if(r==null)return{};var e,i,n=function(l,h){if(l==null)return{};var c,d,m={},y=Object.keys(l);for(d=0;d<y.length;d++)c=y[d],h.indexOf(c)>=0||(m[c]=l[c]);return m}(r,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)e=s[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(n[e]=r[e])}return n}var Qw=["draw","geometry"],Kw=function(r,t){var e=t.geometry;Yt(!e||e instanceof Wh,"Graphics geometry needs to be a `Graphics`");var i=e?new Wh(e.geometry):new Wh;return i.applyProps=function(n,s,l){var h=l.draw;l.geometry;var c=Cr(n,s,fi(l,Qw));return s.draw!==h&&typeof h=="function"&&(c=!0,h.call(i,i)),c},i},Zw=["image","texture"],Jw=function(r,t){var e=t.leftWidth,i=e===void 0?10:e,n=t.topHeight,s=n===void 0?10:n,l=t.rightWidth,h=l===void 0?10:l,c=t.bottomHeight,d=c===void 0?10:c,m=Ir("NineSlicePlane",r,t),y=new Cw(m,i,s,h,d);return y.applyProps=function(g,_,x){var b=x.image,T=x.texture,S=Cr(g,_,fi(x,Zw));return(b||T)&&(T!==_.texture&&(S=!0),g.texture=Ir("NineSlicePlane",r,x)),S},y};function Ap(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function $a(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ap(Object(e),!0).forEach(function(i){Qt(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ap(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var tT=function(r,t){var e=t.maxSize,i=e===void 0?1500:e,n=t.batchSize,s=n===void 0?16384:n,l=t.autoResize,h=l!==void 0&&l,c=$a($a({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),d=$a($a({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),m=new Nw(i,c,s,h);return m.willUnmount=function(y,g,_){y.destroy(d)},m},eT=["image","texture"],rT=function(r,t){var e=new Hi(Ir("Sprite",r,t));return e.applyProps=function(i,n,s){var l=s.image,h=s.texture,c=Cr(i,n,fi(s,eT));return(h&&n.texture!==s.texture||l&&n.image!==s.image)&&(n.texture!==s.texture&&(c=!0),i.texture=Ir("Sprite",r,s)),c},e},iT=["textures","isPlaying","initialFrame","images"],nT=function(r,t){var e=t.textures,i=t.images,n=t.isPlaying,s=n===void 0||n,l=t.initialFrame,h=function(d){return d.map(function(m){return Yt(m instanceof tt||(m==null?void 0:m.texture),"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),m})},c=i?Ps.fromImages(i):new Ps(h(e));return c[s?"gotoAndPlay":"gotoAndStop"](l||0),c.applyProps=function(d,m,y){var g=y.textures,_=y.isPlaying,x=y.initialFrame,b=y.images,T=Cr(d,m,fi(y,iT));if(b&&m.images!==b){for(var S=[],C=0;C<b.length;++C)S.push(tt.from(b[C]));d.textures=S,T=!0}if(g&&m.textures!==g&&(d.textures=h(g),T=!0),_!==m.isPlaying||x!==m.initialFrame){var A=typeof x=="number"?x:c.currentFrame||0;c[_?"gotoAndPlay":"gotoAndStop"](A),T=!0}return T},c},sT=function(r,t){var e=t.text,i=e===void 0?"":e,n=t.style,s=n===void 0?{}:n,l=t.isSprite,h=new v1(i,s);return l?(h.updateText(),new Hi(h.texture)):h},aT=["tileScale","tilePosition","image","texture"],oT=function(r,t){var e=t.width,i=e===void 0?100:e,n=t.height,s=n===void 0?100:n,l=Ir("TilingSprite",r,t),h=new ac(l,i,s);return h.applyProps=function(c,d,m){var y=m.tileScale,g=m.tilePosition,_=m.image,x=m.texture,b=Cr(c,d,fi(m,aT));if(g){var T,S=ps(g);(T=c.tilePosition).set.apply(T,jr(S)),b=!Tp(ps(d.tilePosition),S)||b}if(y){var C,A=ps(y);(C=c.tileScale).set.apply(C,jr(A)),b=!Tp(ps(d.tileScale),A)||b}return(_||x)&&(x!==d.texture&&(b=!0),c.texture=Ir("Sprite",r,m)),b},h},lT=["image","texture"],hT=function(r,t){var e=Ir("Mesh",r,t),i=t.vertices,n=t.uvs,s=t.indices,l=t.drawMode,h=l===void 0?ir.TRIANGLES:l,c=new Rw(e,i,n,s,h);return c.applyProps=function(d,m,y){var g=y.image,_=y.texture,x=Cr(d,m,fi(y,lT));return(g||_)&&(_!==m.texture&&(x=!0),d.texture=Ir("Mesh",r,y)),x},c},uT=["image","texture"],cT=function(r,t){var e=Ir("SimpleRope",r,t),i=t.points,n=new Pw(e,i);return n.applyProps=function(s,l,h){var c=h.image,d=h.texture,m=fi(h,uT);Yt(Array.isArray(h.points),"SimpleRope points needs to be %s","Array<Point>");var y=Cr(s,l,m);return(c||d)&&(d!==l.texture&&(y=!0),s.texture=Ir("SimpleRope",r,h)),y},n},dT=Object.freeze({__proto__:null,BitmapText:Yw,Container:qw,Graphics:Kw,NineSlicePlane:Jw,ParticleContainer:tT,Sprite:rT,Text:sT,TilingSprite:oT,SimpleMesh:hT,SimpleRope:cT,AnimatedSprite:nT});function Sp(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function Ep(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Sp(Object(e),!0).forEach(function(i){Qt(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Sp(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Se={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},fT=Object.keys(Se).reduce(function(r,t){return Ep(Ep({},r),{},Qt({},t,dT[t]))},{}),Rg={};function pT(r,t){return Yt(!!r,"Expect type to be defined, got `%s`",r),Yt(!Se[r],"Component `%s` could not be created, already exists in default components.",r),Rg[r]=t,r}var Ip,Cp,Rp,Pp,Du={},Uu={},mT={get exports(){return Uu},set exports(r){Uu=r}},Np={};function gT(){return Cp||(Cp=1,mT.exports=(Ip||(Ip=1,function(r){function t(B,K){var k=B.length;B.push(K);t:for(;0<k;){var z=k-1>>>1,ht=B[z];if(!(0<n(ht,K)))break t;B[z]=K,B[k]=ht,k=z}}function e(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var K=B[0],k=B.pop();if(k!==K){B[0]=k;t:for(var z=0,ht=B.length,_t=ht>>>1;z<_t;){var yt=2*(z+1)-1,Nt=B[yt],Ct=yt+1,Mt=B[Ct];if(0>n(Nt,k))Ct<ht&&0>n(Mt,Nt)?(B[z]=Mt,B[Ct]=k,z=Ct):(B[z]=Nt,B[yt]=k,z=yt);else{if(!(Ct<ht&&0>n(Mt,k)))break t;B[z]=Mt,B[Ct]=k,z=Ct}}}return K}function n(B,K){var k=B.sortIndex-K.sortIndex;return k!==0?k:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,h=l.now();r.unstable_now=function(){return l.now()-h}}var c=[],d=[],m=1,y=null,g=3,_=!1,x=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(B){for(var K=e(d);K!==null;){if(K.callback===null)i(d);else{if(!(K.startTime<=B))break;i(d),K.sortIndex=K.expirationTime,t(c,K)}K=e(d)}}function I(B){if(b=!1,A(B),!x)if(e(c)!==null)x=!0,ft(U);else{var K=e(d);K!==null&&ot(I,K.startTime-B)}}function U(B,K){x=!1,b&&(b=!1,S(q),q=-1),_=!0;var k=g;try{for(A(K),y=e(c);y!==null&&(!(y.expirationTime>K)||B&&!J());){var z=y.callback;if(typeof z=="function"){y.callback=null,g=y.priorityLevel;var ht=z(y.expirationTime<=K);K=r.unstable_now(),typeof ht=="function"?y.callback=ht:y===e(c)&&i(c),A(K)}else i(c);y=e(c)}if(y!==null)var _t=!0;else{var yt=e(d);yt!==null&&ot(I,yt.startTime-K),_t=!1}return _t}finally{y=null,g=k,_=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var W,j=!1,G=null,q=-1,it=5,mt=-1;function J(){return!(r.unstable_now()-mt<it)}function F(){if(G!==null){var B=r.unstable_now();mt=B;var K=!0;try{K=G(!0,B)}finally{K?W():(j=!1,G=null)}}else j=!1}if(typeof C=="function")W=function(){C(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,nt=V.port2;V.port1.onmessage=F,W=function(){nt.postMessage(null)}}else W=function(){T(F,0)};function ft(B){G=B,j||(j=!0,W())}function ot(B,K){q=T(function(){B(r.unstable_now())},K)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_continueExecution=function(){x||_||(x=!0,ft(U))},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return e(c)},r.unstable_next=function(B){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var k=g;g=K;try{return B()}finally{g=k}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var k=g;g=B;try{return K()}finally{g=k}},r.unstable_scheduleCallback=function(B,K,k){var z=r.unstable_now();switch(k=typeof k=="object"&&k!==null&&typeof(k=k.delay)=="number"&&0<k?z+k:z,B){case 1:var ht=-1;break;case 2:ht=250;break;case 5:ht=1073741823;break;case 4:ht=1e4;break;default:ht=5e3}return B={id:m++,callback:K,priorityLevel:B,startTime:k,expirationTime:ht=k+ht,sortIndex:-1},k>z?(B.sortIndex=k,t(d,B),e(c)===null&&B===e(d)&&(b?(S(q),q=-1):b=!0,ot(I,k-z))):(B.sortIndex=ht,t(c,B),x||_||(x=!0,ft(U))),B},r.unstable_shouldYield=J,r.unstable_wrapCallback=function(B){var K=g;return function(){var k=g;g=K;try{return B.apply(this,arguments)}finally{g=k}}}}(Np)),Np)),Uu}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function yT(){return Pp||(Pp=1,Rp=function(r){var t={},e=Gr,i=gT(),n=Object.assign;function s(a){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+a,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),_=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),I=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:typeof(a=I&&a[I]||a["@@iterator"])=="function"?a:null}function W(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case d:return"Fragment";case c:return"Portal";case y:return"Profiler";case m:return"StrictMode";case b:return"Suspense";case T:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case _:return(a.displayName||"Context")+".Consumer";case g:return(a._context.displayName||"Context")+".Provider";case x:var o=a.render;return(a=a.displayName)||(a=(a=o.displayName||o.name||"")!==""?"ForwardRef("+a+")":"ForwardRef"),a;case S:return(o=a.displayName||null)!==null?o:W(a.type)||"Memo";case C:o=a._payload,a=a._init;try{return W(a(o))}catch{}}return null}function j(a){var o=a.type;switch(a.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=(a=o.render).displayName||a.name||"",o.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(o);case 8:return o===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function G(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do 4098&(o=a).flags&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function q(a){if(G(a)!==a)throw Error(s(188))}function it(a){var o=a.alternate;if(!o){if((o=G(a))===null)throw Error(s(188));return o!==a?null:a}for(var u=a,f=o;;){var p=u.return;if(p===null)break;var v=p.alternate;if(v===null){if((f=p.return)!==null){u=f;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===u)return q(p),a;if(v===f)return q(p),o;v=v.sibling}throw Error(s(188))}if(u.return!==f.return)u=p,f=v;else{for(var w=!1,E=p.child;E;){if(E===u){w=!0,u=p,f=v;break}if(E===f){w=!0,f=p,u=v;break}E=E.sibling}if(!w){for(E=v.child;E;){if(E===u){w=!0,u=v,f=p;break}if(E===f){w=!0,f=v,u=p;break}E=E.sibling}if(!w)throw Error(s(189))}}if(u.alternate!==f)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?a:o}function mt(a){return(a=it(a))!==null?J(a):null}function J(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var o=J(a);if(o!==null)return o;a=a.sibling}return null}function F(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var o=F(a);if(o!==null)return o}a=a.sibling}return null}var V,nt=Array.isArray,ft=r.getPublicInstance,ot=r.getRootHostContext,B=r.getChildHostContext,K=r.prepareForCommit,k=r.resetAfterCommit,z=r.createInstance,ht=r.appendInitialChild,_t=r.finalizeInitialChildren,yt=r.prepareUpdate,Nt=r.shouldSetTextContent,Ct=r.createTextInstance,Mt=r.scheduleTimeout,ie=r.cancelTimeout,ue=r.noTimeout,jt=r.isPrimaryRenderer,vt=r.supportsMutation,kt=r.supportsPersistence,At=r.supportsHydration,ke=r.getInstanceFromNode,Oe=r.preparePortalMount,pi=r.getCurrentEventPriority,Vo=r.detachDeletedInstance,$i=r.supportsMicrotasks,Dg=r.scheduleMicrotask,Bn=r.supportsTestSelectors,Ug=r.findFiberRoot,Gg=r.getBoundingRect,zg=r.getTextContent,Ln=r.isHiddenSubtree,Hg=r.matchAccessibilityRole,$g=r.setFocusIfFocusable,jg=r.setupIntersectionObserver,Vg=r.appendChild,Wg=r.appendChildToContainer,Xg=r.commitTextUpdate,Yg=r.commitMount,qg=r.commitUpdate,Qg=r.insertBefore,Kg=r.insertInContainerBefore,Zg=r.removeChild,Jg=r.removeChildFromContainer,oc=r.resetTextContent,ty=r.hideInstance,ey=r.hideTextInstance,ry=r.unhideInstance,iy=r.unhideTextInstance,ny=r.clearContainer,sy=r.cloneInstance,lc=r.createContainerChildSet,hc=r.appendChildToContainerChildSet,ay=r.finalizeContainerChildren,Wo=r.replaceContainerChildren,uc=r.cloneHiddenInstance,cc=r.cloneHiddenTextInstance,oy=r.canHydrateInstance,ly=r.canHydrateTextInstance,hy=r.canHydrateSuspenseInstance,dc=r.isSuspenseInstancePending,Xo=r.isSuspenseInstanceFallback,uy=r.getSuspenseInstanceFallbackErrorDetails,cy=r.registerSuspenseInstanceRetry,Os=r.getNextHydratableSibling,dy=r.getFirstHydratableChild,fy=r.getFirstHydratableChildWithinContainer,py=r.getFirstHydratableChildWithinSuspenseInstance,my=r.hydrateInstance,gy=r.hydrateTextInstance,yy=r.hydrateSuspenseInstance,vy=r.getNextHydratableInstanceAfterSuspenseInstance,_y=r.commitHydratedContainer,xy=r.commitHydratedSuspenseInstance,by=r.clearSuspenseBoundary,wy=r.clearSuspenseBoundaryFromContainer,Ty=r.shouldDeleteUnhydratedTailInstances,Ay=r.didNotMatchHydratedContainerTextInstance,Sy=r.didNotMatchHydratedTextInstance;function Dn(a){if(V===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);V=o&&o[1]||""}return`
`+V+a}var Yo=!1;function qo(a,o){if(!a||Yo)return"";Yo=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(M){var f=M}Reflect.construct(a,[],o)}else{try{o.call()}catch(M){f=M}a.call(o.prototype)}else{try{throw Error()}catch(M){f=M}a()}}catch(M){if(M&&f&&typeof M.stack=="string"){for(var p=M.stack.split(`
`),v=f.stack.split(`
`),w=p.length-1,E=v.length-1;1<=w&&0<=E&&p[w]!==v[E];)E--;for(;1<=w&&0<=E;w--,E--)if(p[w]!==v[E]){if(w!==1||E!==1)do if(w--,0>--E||p[w]!==v[E]){var P=`
`+p[w].replace(" at new "," at ");return a.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",a.displayName)),P}while(1<=w&&0<=E);break}}}finally{Yo=!1,Error.prepareStackTrace=u}return(a=a?a.displayName||a.name:"")?Dn(a):""}var Ey=Object.prototype.hasOwnProperty,Qo=[],ji=-1;function Vr(a){return{current:a}}function Lt(a){0>ji||(a.current=Qo[ji],Qo[ji]=null,ji--)}function Ft(a,o){ji++,Qo[ji]=a.current,a.current=o}var Wr={},pe=Vr(Wr),be=Vr(!1),mi=Wr;function Vi(a,o){var u=a.type.contextTypes;if(!u)return Wr;var f=a.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var p,v={};for(p in u)v[p]=o[p];return f&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,a.__reactInternalMemoizedMaskedChildContext=v),v}function Ee(a){return(a=a.childContextTypes)!=null}function Ko(){Lt(be),Lt(pe)}function fc(a,o,u){if(pe.current!==Wr)throw Error(s(168));Ft(pe,o),Ft(be,u)}function pc(a,o,u){var f=a.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;for(var p in f=f.getChildContext())if(!(p in o))throw Error(s(108,j(a)||"Unknown",p));return n({},u,f)}function Bs(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Wr,mi=pe.current,Ft(pe,a),Ft(be,be.current),!0}function mc(a,o,u){var f=a.stateNode;if(!f)throw Error(s(169));u?(a=pc(a,o,mi),f.__reactInternalMemoizedMergedChildContext=a,Lt(be),Lt(pe),Ft(pe,a)):Lt(be),Ft(be,u)}var qe=Math.clz32?Math.clz32:function(a){return(a>>>=0)===0?32:31-(Iy(a)/Cy|0)|0},Iy=Math.log,Cy=Math.LN2,Zo=64,Jo=4194304;function Un(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&a;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&a;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ls(a,o){var u=a.pendingLanes;if(u===0)return 0;var f=0,p=a.suspendedLanes,v=a.pingedLanes,w=268435455&u;if(w!==0){var E=w&~p;E!==0?f=Un(E):(v&=w)!==0&&(f=Un(v))}else(w=u&~p)!==0?f=Un(w):v!==0&&(f=Un(v));if(f===0)return 0;if(o!==0&&o!==f&&!(o&p)&&((p=f&-f)>=(v=o&-o)||p===16&&4194240&v))return o;if(4&f&&(f|=16&u),(o=a.entangledLanes)!==0)for(a=a.entanglements,o&=f;0<o;)p=1<<(u=31-qe(o)),f|=a[u],o&=~p;return f}function Ry(a,o){switch(a){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;default:return-1}}function tl(a){return(a=-1073741825&a.pendingLanes)!==0?a:1073741824&a?1073741824:0}function gc(){var a=Zo;return!(4194240&(Zo<<=1))&&(Zo=64),a}function el(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function Gn(a,o,u){a.pendingLanes|=o,o!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),(a=a.eventTimes)[o=31-qe(o)]=u}function rl(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var f=31-qe(u),p=1<<f;p&o|a[f]&o&&(a[f]|=o),u&=~p}}var St=0;function yc(a){return 1<(a&=-a)?4<a?268435455&a?16:536870912:4:1}var il=i.unstable_scheduleCallback,vc=i.unstable_cancelCallback,Py=i.unstable_shouldYield,Ny=i.unstable_requestPaint,ne=i.unstable_now,nl=i.unstable_ImmediatePriority,My=i.unstable_UserBlockingPriority,_c=i.unstable_NormalPriority,Fy=i.unstable_IdlePriority,Ds=null,or=null,Qe=typeof Object.is=="function"?Object.is:function(a,o){return a===o&&(a!==0||1/a==1/o)||a!=a&&o!=o},Pr=null,Us=!1,sl=!1;function xc(a){Pr===null?Pr=[a]:Pr.push(a)}function lr(){if(!sl&&Pr!==null){sl=!0;var a=0,o=St;try{var u=Pr;for(St=1;a<u.length;a++){var f=u[a];do f=f(!0);while(f!==null)}Pr=null,Us=!1}catch(p){throw Pr!==null&&(Pr=Pr.slice(a+1)),il(nl,lr),p}finally{St=o,sl=!1}}return null}var Wi=[],Xi=0,Gs=null,zs=0,Be=[],Le=0,gi=null,hr=1,Nr="";function yi(a,o){Wi[Xi++]=zs,Wi[Xi++]=Gs,Gs=a,zs=o}function bc(a,o,u){Be[Le++]=hr,Be[Le++]=Nr,Be[Le++]=gi,gi=a;var f=hr;a=Nr;var p=32-qe(f)-1;f&=~(1<<p),u+=1;var v=32-qe(o)+p;if(30<v){var w=p-p%5;v=(f&(1<<w)-1).toString(32),f>>=w,p-=w,hr=1<<32-qe(o)+p|u<<p|f,Nr=v+a}else hr=1<<v|u<<p|f,Nr=a}function al(a){a.return!==null&&(yi(a,1),bc(a,1,0))}function ol(a){for(;a===Gs;)Gs=Wi[--Xi],Wi[Xi]=null,zs=Wi[--Xi],Wi[Xi]=null;for(;a===gi;)gi=Be[--Le],Be[Le]=null,Nr=Be[--Le],Be[Le]=null,hr=Be[--Le],Be[Le]=null}var Ie=null,De=null,Dt=!1,zn=!1,Ke=null;function wc(a,o){var u=$e(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=a,(o=a.deletions)===null?(a.deletions=[u],a.flags|=16):o.push(u)}function Tc(a,o){switch(a.tag){case 5:return(o=oy(o,a.type,a.pendingProps))!==null&&(a.stateNode=o,Ie=a,De=dy(o),!0);case 6:return(o=ly(o,a.pendingProps))!==null&&(a.stateNode=o,Ie=a,De=null,!0);case 13:if((o=hy(o))!==null){var u=gi!==null?{id:hr,overflow:Nr}:null;return a.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},(u=$e(18,null,null,0)).stateNode=o,u.return=a,a.child=u,Ie=a,De=null,!0}return!1;default:return!1}}function ll(a){return(1&a.mode)!=0&&(128&a.flags)==0}function hl(a){if(Dt){var o=De;if(o){var u=o;if(!Tc(a,o)){if(ll(a))throw Error(s(418));o=Os(u);var f=Ie;o&&Tc(a,o)?wc(f,u):(a.flags=-4097&a.flags|2,Dt=!1,Ie=a)}}else{if(ll(a))throw Error(s(418));a.flags=-4097&a.flags|2,Dt=!1,Ie=a}}}function Ac(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ie=a}function Hs(a){if(!At||a!==Ie)return!1;if(!Dt)return Ac(a),Dt=!0,!1;if(a.tag!==3&&(a.tag!==5||Ty(a.type)&&!Nt(a.type,a.memoizedProps))){var o=De;if(o){if(ll(a))throw Sc(),Error(s(418));for(;o;)wc(a,o),o=Os(o)}}if(Ac(a),a.tag===13){if(!At)throw Error(s(316));if(!(a=(a=a.memoizedState)!==null?a.dehydrated:null))throw Error(s(317));De=vy(a)}else De=Ie?Os(a.stateNode):null;return!0}function Sc(){for(var a=De;a;)a=Os(a)}function Yi(){At&&(De=Ie=null,zn=Dt=!1)}function ul(a){Ke===null?Ke=[a]:Ke.push(a)}var ky=l.ReactCurrentBatchConfig;function $s(a,o){if(Qe(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var p=u[f];if(!Ey.call(o,p)||!Qe(a[p],o[p]))return!1}return!0}function Oy(a){switch(a.tag){case 5:return Dn(a.type);case 16:return Dn("Lazy");case 13:return Dn("Suspense");case 19:return Dn("SuspenseList");case 0:case 2:case 15:return a=qo(a.type,!1);case 11:return a=qo(a.type.render,!1);case 1:return a=qo(a.type,!0);default:return""}}function Ze(a,o){if(a&&a.defaultProps){for(var u in o=n({},o),a=a.defaultProps)o[u]===void 0&&(o[u]=a[u]);return o}return o}var js=Vr(null),Vs=null,qi=null,cl=null;function dl(){cl=qi=Vs=null}function Ec(a,o,u){jt?(Ft(js,o._currentValue),o._currentValue=u):(Ft(js,o._currentValue2),o._currentValue2=u)}function fl(a){var o=js.current;Lt(js),jt?a._currentValue=o:a._currentValue2=o}function pl(a,o,u){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===u)break;a=a.return}}function Qi(a,o){Vs=a,cl=qi=null,(a=a.dependencies)!==null&&a.firstContext!==null&&(a.lanes&o&&(we=!0),a.firstContext=null)}function Ue(a){var o=jt?a._currentValue:a._currentValue2;if(cl!==a)if(a={context:a,memoizedValue:o,next:null},qi===null){if(Vs===null)throw Error(s(308));qi=a,Vs.dependencies={lanes:0,firstContext:a}}else qi=qi.next=a;return o}var vi=null;function ml(a){vi===null?vi=[a]:vi.push(a)}function Ic(a,o,u,f){var p=o.interleaved;return p===null?(u.next=u,ml(o)):(u.next=p.next,p.next=u),o.interleaved=u,ur(a,f)}function ur(a,o){a.lanes|=o;var u=a.alternate;for(u!==null&&(u.lanes|=o),u=a,a=a.return;a!==null;)a.childLanes|=o,(u=a.alternate)!==null&&(u.childLanes|=o),u=a,a=a.return;return u.tag===3?u.stateNode:null}var Xr=!1;function gl(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cc(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Mr(a,o){return{eventTime:a,lane:o,tag:0,payload:null,callback:null,next:null}}function Yr(a,o,u){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(2&bt)!=0){var p=f.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),f.pending=o,ur(a,u)}return(p=f.interleaved)===null?(o.next=o,ml(f)):(o.next=p.next,p.next=o),f.interleaved=o,ur(a,u)}function Ws(a,o,u){if((o=o.updateQueue)!==null&&(o=o.shared,(4194240&u)!=0)){var f=o.lanes;u|=f&=a.pendingLanes,o.lanes=u,rl(a,u)}}function Rc(a,o){var u=a.updateQueue,f=a.alternate;if(f!==null&&u===(f=f.updateQueue)){var p=null,v=null;if((u=u.firstBaseUpdate)!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?p=v=w:v=v.next=w,u=u.next}while(u!==null);v===null?p=v=o:v=v.next=o}else p=v=o;return u={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:f.shared,effects:f.effects},void(a.updateQueue=u)}(a=u.lastBaseUpdate)===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}function Xs(a,o,u,f){var p=a.updateQueue;Xr=!1;var v=p.firstBaseUpdate,w=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var P=E,M=P.next;P.next=null,w===null?v=M:w.next=M,w=P;var L=a.alternate;L!==null&&(E=(L=L.updateQueue).lastBaseUpdate)!==w&&(E===null?L.firstBaseUpdate=M:E.next=M,L.lastBaseUpdate=P)}if(v!==null){var X=p.baseState;for(w=0,L=M=P=null,E=v;;){var O=E.lane,$=E.eventTime;if((f&O)===O){L!==null&&(L=L.next={eventTime:$,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});t:{var rt=a,gt=E;switch(O=o,$=u,gt.tag){case 1:if(typeof(rt=gt.payload)=="function"){X=rt.call($,X,O);break t}X=rt;break t;case 3:rt.flags=-65537&rt.flags|128;case 0:if((O=typeof(rt=gt.payload)=="function"?rt.call($,X,O):rt)==null)break t;X=n({},X,O);break t;case 2:Xr=!0}}E.callback!==null&&E.lane!==0&&(a.flags|=64,(O=p.effects)===null?p.effects=[E]:O.push(E))}else $={eventTime:$,lane:O,tag:E.tag,payload:E.payload,callback:E.callback,next:null},L===null?(M=L=$,P=X):L=L.next=$,w|=O;if((E=E.next)===null){if((E=p.shared.pending)===null)break;E=(O=E).next,O.next=null,p.lastBaseUpdate=O,p.shared.pending=null}}if(L===null&&(P=X),p.baseState=P,p.firstBaseUpdate=M,p.lastBaseUpdate=L,(o=p.shared.interleaved)!==null){p=o;do w|=p.lane,p=p.next;while(p!==o)}else v===null&&(p.shared.lanes=0);xi|=w,a.lanes=w,a.memoizedState=X}}function Pc(a,o,u){if(a=o.effects,o.effects=null,a!==null)for(o=0;o<a.length;o++){var f=a[o],p=f.callback;if(p!==null){if(f.callback=null,f=u,typeof p!="function")throw Error(s(191,p));p.call(f)}}}var Nc=new e.Component().refs;function yl(a,o,u,f){u=(u=u(f,o=a.memoizedState))==null?o:n({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var Ys={isMounted:function(a){return!!(a=a._reactInternals)&&G(a)===a},enqueueSetState:function(a,o,u){a=a._reactInternals;var f=ye(),p=Zr(a),v=Mr(f,p);v.payload=o,u!=null&&(v.callback=u),(o=Yr(a,v,p))!==null&&(He(o,a,p,f),Ws(o,a,p))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var f=ye(),p=Zr(a),v=Mr(f,p);v.tag=1,v.payload=o,u!=null&&(v.callback=u),(o=Yr(a,v,p))!==null&&(He(o,a,p,f),Ws(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=ye(),f=Zr(a),p=Mr(u,f);p.tag=2,o!=null&&(p.callback=o),(o=Yr(a,p,f))!==null&&(He(o,a,f,u),Ws(o,a,f))}};function Mc(a,o,u,f,p,v,w){return typeof(a=a.stateNode).shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,v,w):!o.prototype||!o.prototype.isPureReactComponent||!$s(u,f)||!$s(p,v)}function Fc(a,o,u){var f=!1,p=Wr,v=o.contextType;return typeof v=="object"&&v!==null?v=Ue(v):(p=Ee(o)?mi:pe.current,v=(f=(f=o.contextTypes)!=null)?Vi(a,p):Wr),o=new o(u,v),a.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ys,a.stateNode=o,o._reactInternals=a,f&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=p,a.__reactInternalMemoizedMaskedChildContext=v),o}function kc(a,o,u,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==a&&Ys.enqueueReplaceState(o,o.state,null)}function vl(a,o,u,f){var p=a.stateNode;p.props=u,p.state=a.memoizedState,p.refs=Nc,gl(a);var v=o.contextType;typeof v=="object"&&v!==null?p.context=Ue(v):(v=Ee(o)?mi:pe.current,p.context=Vi(a,v)),p.state=a.memoizedState,typeof(v=o.getDerivedStateFromProps)=="function"&&(yl(a,o,v,u),p.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Ys.enqueueReplaceState(p,p.state,null),Xs(a,u,p,f),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308)}function Hn(a,o,u){if((a=u.ref)!==null&&typeof a!="function"&&typeof a!="object"){if(u._owner){if(u=u._owner){if(u.tag!==1)throw Error(s(309));var f=u.stateNode}if(!f)throw Error(s(147,a));var p=f,v=""+a;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(w){var E=p.refs;E===Nc&&(E=p.refs={}),w===null?delete E[v]:E[v]=w},o._stringRef=v,o)}if(typeof a!="string")throw Error(s(284));if(!u._owner)throw Error(s(290,a))}return a}function qs(a,o){throw a=Object.prototype.toString.call(o),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a))}function Oc(a){return(0,a._init)(a._payload)}function Bc(a){function o(D,R){if(a){var N=D.deletions;N===null?(D.deletions=[R],D.flags|=16):N.push(R)}}function u(D,R){if(!a)return null;for(;R!==null;)o(D,R),R=R.sibling;return null}function f(D,R){for(D=new Map;R!==null;)R.key!==null?D.set(R.key,R):D.set(R.index,R),R=R.sibling;return D}function p(D,R){return(D=ti(D,R)).index=0,D.sibling=null,D}function v(D,R,N){return D.index=N,a?(N=D.alternate)!==null?(N=N.index)<R?(D.flags|=2,R):N:(D.flags|=2,R):(D.flags|=1048576,R)}function w(D){return a&&D.alternate===null&&(D.flags|=2),D}function E(D,R,N,H){return R===null||R.tag!==6?((R=nh(N,D.mode,H)).return=D,R):((R=p(R,N)).return=D,R)}function P(D,R,N,H){var ut=N.type;return ut===d?L(D,R,N.props.children,H,N.key):R!==null&&(R.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===C&&Oc(ut)===R.type)?((H=p(R,N.props)).ref=Hn(D,R,N),H.return=D,H):((H=ba(N.type,N.key,N.props,null,D.mode,H)).ref=Hn(D,R,N),H.return=D,H)}function M(D,R,N,H){return R===null||R.tag!==4||R.stateNode.containerInfo!==N.containerInfo||R.stateNode.implementation!==N.implementation?((R=sh(N,D.mode,H)).return=D,R):((R=p(R,N.children||[])).return=D,R)}function L(D,R,N,H,ut){return R===null||R.tag!==7?((R=Ti(N,D.mode,H,ut)).return=D,R):((R=p(R,N)).return=D,R)}function X(D,R,N){if(typeof R=="string"&&R!==""||typeof R=="number")return(R=nh(""+R,D.mode,N)).return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case h:return(N=ba(R.type,R.key,R.props,null,D.mode,N)).ref=Hn(D,null,R),N.return=D,N;case c:return(R=sh(R,D.mode,N)).return=D,R;case C:return X(D,(0,R._init)(R._payload),N)}if(nt(R)||U(R))return(R=Ti(R,D.mode,N,null)).return=D,R;qs(D,R)}return null}function O(D,R,N,H){var ut=R!==null?R.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return ut!==null?null:E(D,R,""+N,H);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case h:return N.key===ut?P(D,R,N,H):null;case c:return N.key===ut?M(D,R,N,H):null;case C:return O(D,R,(ut=N._init)(N._payload),H)}if(nt(N)||U(N))return ut!==null?null:L(D,R,N,H,null);qs(D,N)}return null}function $(D,R,N,H,ut){if(typeof H=="string"&&H!==""||typeof H=="number")return E(R,D=D.get(N)||null,""+H,ut);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case h:return P(R,D=D.get(H.key===null?N:H.key)||null,H,ut);case c:return M(R,D=D.get(H.key===null?N:H.key)||null,H,ut);case C:return $(D,R,N,(0,H._init)(H._payload),ut)}if(nt(H)||U(H))return L(R,D=D.get(N)||null,H,ut,null);qs(R,H)}return null}function rt(D,R,N,H){for(var ut=null,Rt=null,st=R,Et=R=0,de=null;st!==null&&Et<N.length;Et++){st.index>Et?(de=st,st=null):de=st.sibling;var Pt=O(D,st,N[Et],H);if(Pt===null){st===null&&(st=de);break}a&&st&&Pt.alternate===null&&o(D,st),R=v(Pt,R,Et),Rt===null?ut=Pt:Rt.sibling=Pt,Rt=Pt,st=de}if(Et===N.length)return u(D,st),Dt&&yi(D,Et),ut;if(st===null){for(;Et<N.length;Et++)(st=X(D,N[Et],H))!==null&&(R=v(st,R,Et),Rt===null?ut=st:Rt.sibling=st,Rt=st);return Dt&&yi(D,Et),ut}for(st=f(D,st);Et<N.length;Et++)(de=$(st,D,Et,N[Et],H))!==null&&(a&&de.alternate!==null&&st.delete(de.key===null?Et:de.key),R=v(de,R,Et),Rt===null?ut=de:Rt.sibling=de,Rt=de);return a&&st.forEach(function(ei){return o(D,ei)}),Dt&&yi(D,Et),ut}function gt(D,R,N,H){var ut=U(N);if(typeof ut!="function")throw Error(s(150));if((N=ut.call(N))==null)throw Error(s(151));for(var Rt=ut=null,st=R,Et=R=0,de=null,Pt=N.next();st!==null&&!Pt.done;Et++,Pt=N.next()){st.index>Et?(de=st,st=null):de=st.sibling;var ei=O(D,st,Pt.value,H);if(ei===null){st===null&&(st=de);break}a&&st&&ei.alternate===null&&o(D,st),R=v(ei,R,Et),Rt===null?ut=ei:Rt.sibling=ei,Rt=ei,st=de}if(Pt.done)return u(D,st),Dt&&yi(D,Et),ut;if(st===null){for(;!Pt.done;Et++,Pt=N.next())(Pt=X(D,Pt.value,H))!==null&&(R=v(Pt,R,Et),Rt===null?ut=Pt:Rt.sibling=Pt,Rt=Pt);return Dt&&yi(D,Et),ut}for(st=f(D,st);!Pt.done;Et++,Pt=N.next())(Pt=$(st,D,Et,Pt.value,H))!==null&&(a&&Pt.alternate!==null&&st.delete(Pt.key===null?Et:Pt.key),R=v(Pt,R,Et),Rt===null?ut=Pt:Rt.sibling=Pt,Rt=Pt);return a&&st.forEach(function(s0){return o(D,s0)}),Dt&&yi(D,Et),ut}return function D(R,N,H,ut){if(typeof H=="object"&&H!==null&&H.type===d&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case h:t:{for(var Rt=H.key,st=N;st!==null;){if(st.key===Rt){if((Rt=H.type)===d){if(st.tag===7){u(R,st.sibling),(N=p(st,H.props.children)).return=R,R=N;break t}}else if(st.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===C&&Oc(Rt)===st.type){u(R,st.sibling),(N=p(st,H.props)).ref=Hn(R,st,H),N.return=R,R=N;break t}u(R,st);break}o(R,st),st=st.sibling}H.type===d?((N=Ti(H.props.children,R.mode,ut,H.key)).return=R,R=N):((ut=ba(H.type,H.key,H.props,null,R.mode,ut)).ref=Hn(R,N,H),ut.return=R,R=ut)}return w(R);case c:t:{for(st=H.key;N!==null;){if(N.key===st){if(N.tag===4&&N.stateNode.containerInfo===H.containerInfo&&N.stateNode.implementation===H.implementation){u(R,N.sibling),(N=p(N,H.children||[])).return=R,R=N;break t}u(R,N);break}o(R,N),N=N.sibling}(N=sh(H,R.mode,ut)).return=R,R=N}return w(R);case C:return D(R,N,(st=H._init)(H._payload),ut)}if(nt(H))return rt(R,N,H,ut);if(U(H))return gt(R,N,H,ut);qs(R,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,N!==null&&N.tag===6?(u(R,N.sibling),(N=p(N,H)).return=R,R=N):(u(R,N),(N=nh(H,R.mode,ut)).return=R,R=N),w(R)):u(R,N)}}var Ki=Bc(!0),Lc=Bc(!1),$n={},Ge=Vr($n),jn=Vr($n),Zi=Vr($n);function cr(a){if(a===$n)throw Error(s(174));return a}function _l(a,o){Ft(Zi,o),Ft(jn,a),Ft(Ge,$n),a=ot(o),Lt(Ge),Ft(Ge,a)}function Ji(){Lt(Ge),Lt(jn),Lt(Zi)}function Dc(a){var o=cr(Zi.current),u=cr(Ge.current);u!==(o=B(u,a.type,o))&&(Ft(jn,a),Ft(Ge,o))}function xl(a){jn.current===a&&(Lt(Ge),Lt(jn))}var Vt=Vr(0);function Qs(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&((u=u.dehydrated)===null||dc(u)||Xo(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(128&o.flags)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var bl=[];function wl(){for(var a=0;a<bl.length;a++){var o=bl[a];jt?o._workInProgressVersionPrimary=null:o._workInProgressVersionSecondary=null}bl.length=0}var Ks=l.ReactCurrentDispatcher,Tl=l.ReactCurrentBatchConfig,_i=0,Gt=null,se=null,ae=null,Zs=!1,Vn=!1,Wn=0,By=0;function me(){throw Error(s(321))}function Al(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!Qe(a[u],o[u]))return!1;return!0}function Sl(a,o,u,f,p,v){if(_i=v,Gt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ks.current=a===null||a.memoizedState===null?Gy:zy,a=u(f,p),Vn){v=0;do{if(Vn=!1,Wn=0,25<=v)throw Error(s(301));v+=1,ae=se=null,o.updateQueue=null,Ks.current=Hy,a=u(f,p)}while(Vn)}if(Ks.current=ea,o=se!==null&&se.next!==null,_i=0,ae=se=Gt=null,Zs=!1,o)throw Error(s(300));return a}function El(){var a=Wn!==0;return Wn=0,a}function dr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ae===null?Gt.memoizedState=ae=a:ae=ae.next=a,ae}function ze(){if(se===null){var a=Gt.alternate;a=a!==null?a.memoizedState:null}else a=se.next;var o=ae===null?Gt.memoizedState:ae.next;if(o!==null)ae=o,se=a;else{if(a===null)throw Error(s(310));a={memoizedState:(se=a).memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},ae===null?Gt.memoizedState=ae=a:ae=ae.next=a}return ae}function Xn(a,o){return typeof o=="function"?o(a):o}function Il(a){var o=ze(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var f=se,p=f.baseQueue,v=u.pending;if(v!==null){if(p!==null){var w=p.next;p.next=v.next,v.next=w}f.baseQueue=p=v,u.pending=null}if(p!==null){v=p.next,f=f.baseState;var E=w=null,P=null,M=v;do{var L=M.lane;if((_i&L)===L)P!==null&&(P=P.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),f=M.hasEagerState?M.eagerState:a(f,M.action);else{var X={lane:L,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};P===null?(E=P=X,w=f):P=P.next=X,Gt.lanes|=L,xi|=L}M=M.next}while(M!==null&&M!==v);P===null?w=f:P.next=E,Qe(f,o.memoizedState)||(we=!0),o.memoizedState=f,o.baseState=w,o.baseQueue=P,u.lastRenderedState=f}if((a=u.interleaved)!==null){p=a;do v=p.lane,Gt.lanes|=v,xi|=v,p=p.next;while(p!==a)}else p===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Cl(a){var o=ze(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var f=u.dispatch,p=u.pending,v=o.memoizedState;if(p!==null){u.pending=null;var w=p=p.next;do v=a(v,w.action),w=w.next;while(w!==p);Qe(v,o.memoizedState)||(we=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,f]}function Uc(){}function Gc(a,o){var u=Gt,f=ze(),p=o(),v=!Qe(f.memoizedState,p);if(v&&(f.memoizedState=p,we=!0),f=f.queue,Rl($c.bind(null,u,f,a),[a]),f.getSnapshot!==o||v||ae!==null&&1&ae.memoizedState.tag){if(u.flags|=2048,Yn(9,Hc.bind(null,u,f,p,o),void 0,null),oe===null)throw Error(s(349));30&_i||zc(u,o,p)}return p}function zc(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},(o=Gt.updateQueue)===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.stores=[a]):(u=o.stores)===null?o.stores=[a]:u.push(a)}function Hc(a,o,u,f){o.value=u,o.getSnapshot=f,jc(o)&&Vc(a)}function $c(a,o,u){return u(function(){jc(o)&&Vc(a)})}function jc(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!Qe(a,u)}catch{return!0}}function Vc(a){var o=ur(a,1);o!==null&&He(o,a,1,-1)}function Wc(a){var o=dr();return typeof a=="function"&&(a=a()),o.memoizedState=o.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:a},o.queue=a,a=a.dispatch=Uy.bind(null,Gt,a),[o.memoizedState,a]}function Yn(a,o,u,f){return a={tag:a,create:o,destroy:u,deps:f,next:null},(o=Gt.updateQueue)===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.lastEffect=a.next=a):(u=o.lastEffect)===null?o.lastEffect=a.next=a:(f=u.next,u.next=a,a.next=f,o.lastEffect=a),a}function Xc(){return ze().memoizedState}function Js(a,o,u,f){var p=dr();Gt.flags|=a,p.memoizedState=Yn(1|o,u,void 0,f===void 0?null:f)}function ta(a,o,u,f){var p=ze();f=f===void 0?null:f;var v=void 0;if(se!==null){var w=se.memoizedState;if(v=w.destroy,f!==null&&Al(f,w.deps))return void(p.memoizedState=Yn(o,u,v,f))}Gt.flags|=a,p.memoizedState=Yn(1|o,u,v,f)}function Yc(a,o){return Js(8390656,8,a,o)}function Rl(a,o){return ta(2048,8,a,o)}function qc(a,o){return ta(4,2,a,o)}function Qc(a,o){return ta(4,4,a,o)}function Kc(a,o){return typeof o=="function"?(a=a(),o(a),function(){o(null)}):o!=null?(a=a(),o.current=a,function(){o.current=null}):void 0}function Zc(a,o,u){return u=u!=null?u.concat([a]):null,ta(4,4,Kc.bind(null,o,a),u)}function Pl(){}function Jc(a,o){var u=ze();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Al(o,f[1])?f[0]:(u.memoizedState=[a,o],a)}function td(a,o){var u=ze();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Al(o,f[1])?f[0]:(a=a(),u.memoizedState=[a,o],a)}function ed(a,o,u){return 21&_i?(Qe(u,o)||(u=gc(),Gt.lanes|=u,xi|=u,a.baseState=!0),o):(a.baseState&&(a.baseState=!1,we=!0),a.memoizedState=u)}function Ly(a,o){var u=St;St=u!==0&&4>u?u:4,a(!0);var f=Tl.transition;Tl.transition={};try{a(!1),o()}finally{St=u,Tl.transition=f}}function rd(){return ze().memoizedState}function Dy(a,o,u){var f=Zr(a);u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},id(a)?nd(o,u):(u=Ic(a,o,u,f))!==null&&(He(u,a,f,ye()),sd(u,o,f))}function Uy(a,o,u){var f=Zr(a),p={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(id(a))nd(o,p);else{var v=a.alternate;if(a.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer)!==null)try{var w=o.lastRenderedState,E=v(w,u);if(p.hasEagerState=!0,p.eagerState=E,Qe(E,w)){var P=o.interleaved;return P===null?(p.next=p,ml(o)):(p.next=P.next,P.next=p),void(o.interleaved=p)}}catch{}(u=Ic(a,o,p,f))!==null&&(He(u,a,f,p=ye()),sd(u,o,f))}}function id(a){var o=a.alternate;return a===Gt||o!==null&&o===Gt}function nd(a,o){Vn=Zs=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function sd(a,o,u){if(4194240&u){var f=o.lanes;u|=f&=a.pendingLanes,o.lanes=u,rl(a,u)}}var ea={readContext:Ue,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},Gy={readContext:Ue,useCallback:function(a,o){return dr().memoizedState=[a,o===void 0?null:o],a},useContext:Ue,useEffect:Yc,useImperativeHandle:function(a,o,u){return u=u!=null?u.concat([a]):null,Js(4194308,4,Kc.bind(null,o,a),u)},useLayoutEffect:function(a,o){return Js(4194308,4,a,o)},useInsertionEffect:function(a,o){return Js(4,2,a,o)},useMemo:function(a,o){var u=dr();return o=o===void 0?null:o,a=a(),u.memoizedState=[a,o],a},useReducer:function(a,o,u){var f=dr();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:o},f.queue=a,a=a.dispatch=Dy.bind(null,Gt,a),[f.memoizedState,a]},useRef:function(a){return a={current:a},dr().memoizedState=a},useState:Wc,useDebugValue:Pl,useDeferredValue:function(a){return dr().memoizedState=a},useTransition:function(){var a=Wc(!1),o=a[0];return a=Ly.bind(null,a[1]),dr().memoizedState=a,[o,a]},useMutableSource:function(){},useSyncExternalStore:function(a,o,u){var f=Gt,p=dr();if(Dt){if(u===void 0)throw Error(s(407));u=u()}else{if(u=o(),oe===null)throw Error(s(349));30&_i||zc(f,o,u)}p.memoizedState=u;var v={value:u,getSnapshot:o};return p.queue=v,Yc($c.bind(null,f,v,a),[a]),f.flags|=2048,Yn(9,Hc.bind(null,f,v,u,o),void 0,null),u},useId:function(){var a=dr(),o=oe.identifierPrefix;if(Dt){var u=Nr;o=":"+o+"R"+(u=(hr&~(1<<32-qe(hr)-1)).toString(32)+u),0<(u=Wn++)&&(o+="H"+u.toString(32)),o+=":"}else o=":"+o+"r"+(u=By++).toString(32)+":";return a.memoizedState=o},unstable_isNewReconciler:!1},zy={readContext:Ue,useCallback:Jc,useContext:Ue,useEffect:Rl,useImperativeHandle:Zc,useInsertionEffect:qc,useLayoutEffect:Qc,useMemo:td,useReducer:Il,useRef:Xc,useState:function(){return Il(Xn)},useDebugValue:Pl,useDeferredValue:function(a){return ed(ze(),se.memoizedState,a)},useTransition:function(){return[Il(Xn)[0],ze().memoizedState]},useMutableSource:Uc,useSyncExternalStore:Gc,useId:rd,unstable_isNewReconciler:!1},Hy={readContext:Ue,useCallback:Jc,useContext:Ue,useEffect:Rl,useImperativeHandle:Zc,useInsertionEffect:qc,useLayoutEffect:Qc,useMemo:td,useReducer:Cl,useRef:Xc,useState:function(){return Cl(Xn)},useDebugValue:Pl,useDeferredValue:function(a){var o=ze();return se===null?o.memoizedState=a:ed(o,se.memoizedState,a)},useTransition:function(){return[Cl(Xn)[0],ze().memoizedState]},useMutableSource:Uc,useSyncExternalStore:Gc,useId:rd,unstable_isNewReconciler:!1};function tn(a,o){try{var u="",f=o;do u+=Oy(f),f=f.return;while(f);var p=u}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:a,source:o,stack:p,digest:null}}function Nl(a,o,u){return{value:a,source:null,stack:u??null,digest:o??null}}function Ml(a,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var $y=typeof WeakMap=="function"?WeakMap:Map;function ad(a,o,u){(u=Mr(-1,u)).tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){ma||(ma=!0,Kl=f),Ml(0,o)},u}function od(a,o,u){(u=Mr(-1,u)).tag=3;var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=o.value;u.payload=function(){return f(p)},u.callback=function(){Ml(0,o)}}var v=a.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Ml(0,o),typeof f!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),u}function ld(a,o,u){var f=a.pingCache;if(f===null){f=a.pingCache=new $y;var p=new Set;f.set(o,p)}else(p=f.get(o))===void 0&&(p=new Set,f.set(o,p));p.has(u)||(p.add(u),a=Zy.bind(null,a,o,u),o.then(a,a))}function hd(a){do{var o;if((o=a.tag===13)&&(o=(o=a.memoizedState)===null||o.dehydrated!==null),o)return a;a=a.return}while(a!==null);return null}function ud(a,o,u,f,p){return 1&a.mode?(a.flags|=65536,a.lanes=p,a):(a===o?a.flags|=65536:(a.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:((o=Mr(-1,1)).tag=2,Yr(u,o,1))),u.lanes|=1),a)}var jy=l.ReactCurrentOwner,we=!1;function Te(a,o,u,f){o.child=a===null?Lc(o,null,u,f):Ki(o,a.child,u,f)}function cd(a,o,u,f,p){u=u.render;var v=o.ref;return Qi(o,p),f=Sl(a,o,u,f,v,p),u=El(),a===null||we?(Dt&&u&&al(o),o.flags|=1,Te(a,o,f,p),o.child):(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~p,Fr(a,o,p))}function dd(a,o,u,f,p){if(a===null){var v=u.type;return typeof v!="function"||ih(v)||v.defaultProps!==void 0||u.compare!==null||u.defaultProps!==void 0?((a=ba(u.type,null,f,o,o.mode,p)).ref=o.ref,a.return=o,o.child=a):(o.tag=15,o.type=v,fd(a,o,v,f,p))}if(v=a.child,(a.lanes&p)==0){var w=v.memoizedProps;if((u=(u=u.compare)!==null?u:$s)(w,f)&&a.ref===o.ref)return Fr(a,o,p)}return o.flags|=1,(a=ti(v,f)).ref=o.ref,a.return=o,o.child=a}function fd(a,o,u,f,p){if(a!==null){var v=a.memoizedProps;if($s(v,f)&&a.ref===o.ref){if(we=!1,o.pendingProps=f=v,(a.lanes&p)==0)return o.lanes=a.lanes,Fr(a,o,p);131072&a.flags&&(we=!0)}}return Fl(a,o,u,f,p)}function pd(a,o,u){var f=o.pendingProps,p=f.children,v=a!==null?a.memoizedState:null;if(f.mode==="hidden")if(!(1&o.mode))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(rn,Ce),Ce|=u;else{if(!(1073741824&u))return a=v!==null?v.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:a,cachePool:null,transitions:null},o.updateQueue=null,Ft(rn,Ce),Ce|=a,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,Ft(rn,Ce),Ce|=f}else v!==null?(f=v.baseLanes|u,o.memoizedState=null):f=u,Ft(rn,Ce),Ce|=f;return Te(a,o,p,u),o.child}function md(a,o){var u=o.ref;(a===null&&u!==null||a!==null&&a.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Fl(a,o,u,f,p){var v=Ee(u)?mi:pe.current;return v=Vi(o,v),Qi(o,p),u=Sl(a,o,u,f,v,p),f=El(),a===null||we?(Dt&&f&&al(o),o.flags|=1,Te(a,o,u,p),o.child):(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~p,Fr(a,o,p))}function gd(a,o,u,f,p){if(Ee(u)){var v=!0;Bs(o)}else v=!1;if(Qi(o,p),o.stateNode===null)sa(a,o),Fc(o,u,f),vl(o,u,f,p),f=!0;else if(a===null){var w=o.stateNode,E=o.memoizedProps;w.props=E;var P=w.context,M=u.contextType;typeof M=="object"&&M!==null?M=Ue(M):M=Vi(o,M=Ee(u)?mi:pe.current);var L=u.getDerivedStateFromProps,X=typeof L=="function"||typeof w.getSnapshotBeforeUpdate=="function";X||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==f||P!==M)&&kc(o,w,f,M),Xr=!1;var O=o.memoizedState;w.state=O,Xs(o,f,w,p),P=o.memoizedState,E!==f||O!==P||be.current||Xr?(typeof L=="function"&&(yl(o,u,L,f),P=o.memoizedState),(E=Xr||Mc(o,u,E,f,O,P,M))?(X||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=P),w.props=f,w.state=P,w.context=M,f=E):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{w=o.stateNode,Cc(a,o),E=o.memoizedProps,M=o.type===o.elementType?E:Ze(o.type,E),w.props=M,X=o.pendingProps,O=w.context,typeof(P=u.contextType)=="object"&&P!==null?P=Ue(P):P=Vi(o,P=Ee(u)?mi:pe.current);var $=u.getDerivedStateFromProps;(L=typeof $=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==X||O!==P)&&kc(o,w,f,P),Xr=!1,O=o.memoizedState,w.state=O,Xs(o,f,w,p);var rt=o.memoizedState;E!==X||O!==rt||be.current||Xr?(typeof $=="function"&&(yl(o,u,$,f),rt=o.memoizedState),(M=Xr||Mc(o,u,M,f,O,rt,P)||!1)?(L||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,rt,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,rt,P)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||E===a.memoizedProps&&O===a.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&O===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=rt),w.props=f,w.state=rt,w.context=P,f=M):(typeof w.componentDidUpdate!="function"||E===a.memoizedProps&&O===a.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&O===a.memoizedState||(o.flags|=1024),f=!1)}return kl(a,o,u,f,v,p)}function kl(a,o,u,f,p,v){md(a,o);var w=(128&o.flags)!=0;if(!f&&!w)return p&&mc(o,u,!1),Fr(a,o,v);f=o.stateNode,jy.current=o;var E=w&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,a!==null&&w?(o.child=Ki(o,a.child,null,v),o.child=Ki(o,null,E,v)):Te(a,o,E,v),o.memoizedState=f.state,p&&mc(o,u,!0),o.child}function yd(a){var o=a.stateNode;o.pendingContext?fc(0,o.pendingContext,o.pendingContext!==o.context):o.context&&fc(0,o.context,!1),_l(a,o.containerInfo)}function vd(a,o,u,f,p){return Yi(),ul(p),o.flags|=256,Te(a,o,u,f),o.child}var qn,Qn,ra,ia,Ol={dehydrated:null,treeContext:null,retryLane:0};function Bl(a){return{baseLanes:a,cachePool:null,transitions:null}}function _d(a,o,u){var f,p=o.pendingProps,v=Vt.current,w=!1,E=(128&o.flags)!=0;if((f=E)||(f=(a===null||a.memoizedState!==null)&&(2&v)!=0),f?(w=!0,o.flags&=-129):a!==null&&a.memoizedState===null||(v|=1),Ft(Vt,1&v),a===null)return hl(o),(a=o.memoizedState)!==null&&(a=a.dehydrated)!==null?(1&o.mode?Xo(a)?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(E=p.children,a=p.fallback,w?(p=o.mode,w=o.child,E={mode:"hidden",children:E},!(1&p)&&w!==null?(w.childLanes=0,w.pendingProps=E):w=wa(E,p,0,null),a=Ti(a,p,u,null),w.return=o,a.return=o,w.sibling=a,o.child=w,o.child.memoizedState=Bl(u),o.memoizedState=Ol,a):Ll(o,E));if((v=a.memoizedState)!==null&&(f=v.dehydrated)!==null)return function(M,L,X,O,$,rt,gt){if(X)return 256&L.flags?(L.flags&=-257,na(M,L,gt,O=Nl(Error(s(422))))):L.memoizedState!==null?(L.child=M.child,L.flags|=128,null):(rt=O.fallback,$=L.mode,O=wa({mode:"visible",children:O.children},$,0,null),(rt=Ti(rt,$,gt,null)).flags|=2,O.return=L,rt.return=L,O.sibling=rt,L.child=O,1&L.mode&&Ki(L,M.child,null,gt),L.child.memoizedState=Bl(gt),L.memoizedState=Ol,rt);if(!(1&L.mode))return na(M,L,gt,null);if(Xo($))return O=uy($).digest,rt=Error(s(419)),O=Nl(rt,O,void 0),na(M,L,gt,O);if(X=(gt&M.childLanes)!=0,we||X){if((O=oe)!==null){switch(gt&-gt){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}($=$&(O.suspendedLanes|gt)?0:$)!==0&&$!==rt.retryLane&&(rt.retryLane=$,ur(M,$),He(O,M,$,-1))}return rh(),na(M,L,gt,O=Nl(Error(s(421))))}return dc($)?(L.flags|=128,L.child=M.child,L=Jy.bind(null,M),cy($,L),null):(M=rt.treeContext,At&&(De=py($),Ie=L,Dt=!0,Ke=null,zn=!1,M!==null&&(Be[Le++]=hr,Be[Le++]=Nr,Be[Le++]=gi,hr=M.id,Nr=M.overflow,gi=L)),L=Ll(L,O.children),L.flags|=4096,L)}(a,o,E,p,f,v,u);if(w){w=p.fallback,E=o.mode,f=(v=a.child).sibling;var P={mode:"hidden",children:p.children};return!(1&E)&&o.child!==v?((p=o.child).childLanes=0,p.pendingProps=P,o.deletions=null):(p=ti(v,P)).subtreeFlags=14680064&v.subtreeFlags,f!==null?w=ti(f,w):(w=Ti(w,E,u,null)).flags|=2,w.return=o,p.return=o,p.sibling=w,o.child=p,p=w,w=o.child,E=(E=a.child.memoizedState)===null?Bl(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},w.memoizedState=E,w.childLanes=a.childLanes&~u,o.memoizedState=Ol,p}return a=(w=a.child).sibling,p=ti(w,{mode:"visible",children:p.children}),!(1&o.mode)&&(p.lanes=u),p.return=o,p.sibling=null,a!==null&&((u=o.deletions)===null?(o.deletions=[a],o.flags|=16):u.push(a)),o.child=p,o.memoizedState=null,p}function Ll(a,o){return(o=wa({mode:"visible",children:o},a.mode,0,null)).return=a,a.child=o}function na(a,o,u,f){return f!==null&&ul(f),Ki(o,a.child,null,u),(a=Ll(o,o.pendingProps.children)).flags|=2,o.memoizedState=null,a}function xd(a,o,u){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),pl(a.return,o,u)}function Dl(a,o,u,f,p){var v=a.memoizedState;v===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:p}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=p)}function bd(a,o,u){var f=o.pendingProps,p=f.revealOrder,v=f.tail;if(Te(a,o,f.children,u),(2&(f=Vt.current))!=0)f=1&f|2,o.flags|=128;else{if(a!==null&&128&a.flags)t:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&xd(a,u,o);else if(a.tag===19)xd(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break t;for(;a.sibling===null;){if(a.return===null||a.return===o)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}if(Ft(Vt,f),(1&o.mode)==0)o.memoizedState=null;else switch(p){case"forwards":for(u=o.child,p=null;u!==null;)(a=u.alternate)!==null&&Qs(a)===null&&(p=u),u=u.sibling;(u=p)===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),Dl(o,!1,p,u,v);break;case"backwards":for(u=null,p=o.child,o.child=null;p!==null;){if((a=p.alternate)!==null&&Qs(a)===null){o.child=p;break}a=p.sibling,p.sibling=u,u=p,p=a}Dl(o,!0,u,null,v);break;case"together":Dl(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function sa(a,o){!(1&o.mode)&&a!==null&&(a.alternate=null,o.alternate=null,o.flags|=2)}function Fr(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),xi|=o.lanes,(u&o.childLanes)==0)return null;if(a!==null&&o.child!==a.child)throw Error(s(153));if(o.child!==null){for(u=ti(a=o.child,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,(u=u.sibling=ti(a,a.pendingProps)).return=o;u.sibling=null}return o.child}function fr(a){a.flags|=4}function wd(a,o){if(a!==null&&a.child===o.child)return!0;if(16&o.flags)return!1;for(a=o.child;a!==null;){if(12854&a.flags||12854&a.subtreeFlags)return!1;a=a.sibling}return!0}if(vt)qn=function(a,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)ht(a,u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Qn=function(){},ra=function(a,o,u,f,p){if((a=a.memoizedProps)!==f){var v=o.stateNode,w=cr(Ge.current);u=yt(v,u,a,f,p,w),(o.updateQueue=u)&&fr(o)}},ia=function(a,o,u,f){u!==f&&fr(o)};else if(kt){qn=function(a,o,u,f){for(var p=o.child;p!==null;){if(p.tag===5){var v=p.stateNode;u&&f&&(v=uc(v,p.type,p.memoizedProps,p)),ht(a,v)}else if(p.tag===6)v=p.stateNode,u&&f&&(v=cc(v,p.memoizedProps,p)),ht(a,v);else if(p.tag!==4){if(p.tag===22&&p.memoizedState!==null)(v=p.child)!==null&&(v.return=p),qn(a,p,!0,!0);else if(p.child!==null){p.child.return=p,p=p.child;continue}}if(p===o)break;for(;p.sibling===null;){if(p.return===null||p.return===o)return;p=p.return}p.sibling.return=p.return,p=p.sibling}};var Td=function(a,o,u,f){for(var p=o.child;p!==null;){if(p.tag===5){var v=p.stateNode;u&&f&&(v=uc(v,p.type,p.memoizedProps,p)),hc(a,v)}else if(p.tag===6)v=p.stateNode,u&&f&&(v=cc(v,p.memoizedProps,p)),hc(a,v);else if(p.tag!==4){if(p.tag===22&&p.memoizedState!==null)(v=p.child)!==null&&(v.return=p),Td(a,p,!0,!0);else if(p.child!==null){p.child.return=p,p=p.child;continue}}if(p===o)break;for(;p.sibling===null;){if(p.return===null||p.return===o)return;p=p.return}p.sibling.return=p.return,p=p.sibling}};Qn=function(a,o){var u=o.stateNode;if(!wd(a,o)){a=u.containerInfo;var f=lc(a);Td(f,o,!1,!1),u.pendingChildren=f,fr(o),ay(a,f)}},ra=function(a,o,u,f,p){var v=a.stateNode,w=a.memoizedProps;if((a=wd(a,o))&&w===f)o.stateNode=v;else{var E=o.stateNode,P=cr(Ge.current),M=null;w!==f&&(M=yt(E,u,w,f,p,P)),a&&M===null?o.stateNode=v:(v=sy(v,M,u,w,f,o,a,E),_t(v,u,f,p,P)&&fr(o),o.stateNode=v,a?fr(o):qn(v,o,!1,!1))}},ia=function(a,o,u,f){u!==f?(a=cr(Zi.current),u=cr(Ge.current),o.stateNode=Ct(f,a,u,o),fr(o)):o.stateNode=a.stateNode}}else Qn=function(){},ra=function(){},ia=function(){};function Kn(a,o){if(!Dt)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function _e(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,f=0;if(o)for(var p=a.child;p!==null;)u|=p.lanes|p.childLanes,f|=14680064&p.subtreeFlags,f|=14680064&p.flags,p.return=a,p=p.sibling;else for(p=a.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=a,p=p.sibling;return a.subtreeFlags|=f,a.childLanes=u,o}function Vy(a,o,u){var f=o.pendingProps;switch(ol(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(o),null;case 1:case 17:return Ee(o.type)&&Ko(),_e(o),null;case 3:return u=o.stateNode,Ji(),Lt(be),Lt(pe),wl(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),a!==null&&a.child!==null||(Hs(o)?fr(o):a===null||a.memoizedState.isDehydrated&&!(256&o.flags)||(o.flags|=1024,Ke!==null&&(th(Ke),Ke=null))),Qn(a,o),_e(o),null;case 5:xl(o),u=cr(Zi.current);var p=o.type;if(a!==null&&o.stateNode!=null)ra(a,o,p,f,u),a.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(s(166));return _e(o),null}if(a=cr(Ge.current),Hs(o)){if(!At)throw Error(s(175));a=my(o.stateNode,o.type,o.memoizedProps,u,a,o,!zn),o.updateQueue=a,a!==null&&fr(o)}else{var v=z(p,f,u,a,o);qn(v,o,!1,!1),o.stateNode=v,_t(v,p,f,u,a)&&fr(o)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return _e(o),null;case 6:if(a&&o.stateNode!=null)ia(a,o,a.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(s(166));if(a=cr(Zi.current),u=cr(Ge.current),Hs(o)){if(!At)throw Error(s(176));if(a=o.stateNode,u=o.memoizedProps,(f=gy(a,u,o,!zn))&&(p=Ie)!==null)switch(p.tag){case 3:Ay(p.stateNode.containerInfo,a,u,(1&p.mode)!=0);break;case 5:Sy(p.type,p.memoizedProps,p.stateNode,a,u,(1&p.mode)!=0)}f&&fr(o)}else o.stateNode=Ct(f,a,u,o)}return _e(o),null;case 13:if(Lt(Vt),f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Dt&&De!==null&&1&o.mode&&!(128&o.flags))Sc(),Yi(),o.flags|=98560,p=!1;else if(p=Hs(o),f!==null&&f.dehydrated!==null){if(a===null){if(!p)throw Error(s(318));if(!At)throw Error(s(344));if(!(p=(p=o.memoizedState)!==null?p.dehydrated:null))throw Error(s(317));yy(p,o)}else Yi(),!(128&o.flags)&&(o.memoizedState=null),o.flags|=4;_e(o),p=!1}else Ke!==null&&(th(Ke),Ke=null),p=!0;if(!p)return 65536&o.flags?o:null}return 128&o.flags?(o.lanes=u,o):((u=f!==null)!=(a!==null&&a.memoizedState!==null)&&u&&(o.child.flags|=8192,1&o.mode&&(a===null||1&Vt.current?te===0&&(te=3):rh())),o.updateQueue!==null&&(o.flags|=4),_e(o),null);case 4:return Ji(),Qn(a,o),a===null&&Oe(o.stateNode.containerInfo),_e(o),null;case 10:return fl(o.type._context),_e(o),null;case 19:if(Lt(Vt),(p=o.memoizedState)===null)return _e(o),null;if(f=(128&o.flags)!=0,(v=p.rendering)===null)if(f)Kn(p,!1);else{if(te!==0||a!==null&&128&a.flags)for(a=o.child;a!==null;){if((v=Qs(a))!==null){for(o.flags|=128,Kn(p,!1),(a=v.updateQueue)!==null&&(o.updateQueue=a,o.flags|=4),o.subtreeFlags=0,a=u,u=o.child;u!==null;)p=a,(f=u).flags&=14680066,(v=f.alternate)===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,p=v.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),u=u.sibling;return Ft(Vt,1&Vt.current|2),o.child}a=a.sibling}p.tail!==null&&ne()>Ql&&(o.flags|=128,f=!0,Kn(p,!1),o.lanes=4194304)}else{if(!f)if((a=Qs(v))!==null){if(o.flags|=128,f=!0,(a=a.updateQueue)!==null&&(o.updateQueue=a,o.flags|=4),Kn(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Dt)return _e(o),null}else 2*ne()-p.renderingStartTime>Ql&&u!==1073741824&&(o.flags|=128,f=!0,Kn(p,!1),o.lanes=4194304);p.isBackwards?(v.sibling=o.child,o.child=v):((a=p.last)!==null?a.sibling=v:o.child=v,p.last=v)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=ne(),o.sibling=null,a=Vt.current,Ft(Vt,f?1&a|2:1&a),o):(_e(o),null);case 22:case 23:return eh(),u=o.memoizedState!==null,a!==null&&a.memoizedState!==null!==u&&(o.flags|=8192),u&&1&o.mode?1073741824&Ce&&(_e(o),vt&&6&o.subtreeFlags&&(o.flags|=8192)):_e(o),null;case 24:case 25:return null}throw Error(s(156,o.tag))}function Wy(a,o){switch(ol(o),o.tag){case 1:return Ee(o.type)&&Ko(),65536&(a=o.flags)?(o.flags=-65537&a|128,o):null;case 3:return Ji(),Lt(be),Lt(pe),wl(),65536&(a=o.flags)&&!(128&a)?(o.flags=-65537&a|128,o):null;case 5:return xl(o),null;case 13:if(Lt(Vt),(a=o.memoizedState)!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Yi()}return 65536&(a=o.flags)?(o.flags=-65537&a|128,o):null;case 19:return Lt(Vt),null;case 4:return Ji(),null;case 10:return fl(o.type._context),null;case 22:case 23:return eh(),null;default:return null}}var aa=!1,ge=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,Z=null;function en(a,o){var u=a.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ut(a,o,f)}else u.current=null}function Ad(a,o,u){try{u()}catch(f){Ut(a,o,f)}}var Sd=!1;function Zn(a,o,u){var f=o.updateQueue;if((f=f!==null?f.lastEffect:null)!==null){var p=f=f.next;do{if((p.tag&a)===a){var v=p.destroy;p.destroy=void 0,v!==void 0&&Ad(o,u,v)}p=p.next}while(p!==f)}}function oa(a,o){if((o=(o=o.updateQueue)!==null?o.lastEffect:null)!==null){var u=o=o.next;do{if((u.tag&a)===a){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function Ul(a){var o=a.ref;if(o!==null){var u=a.stateNode;a.tag===5?a=ft(u):a=u,typeof o=="function"?o(a):o.current=a}}function Ed(a){var o=a.alternate;o!==null&&(a.alternate=null,Ed(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode)!==null&&Vo(o),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Id(a){return a.tag===5||a.tag===3||a.tag===4}function Cd(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Id(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(2&a.flags||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(2&a.flags))return a.stateNode}}function Gl(a,o,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?Kg(u,a,o):Wg(u,a);else if(f!==4&&(a=a.child)!==null)for(Gl(a,o,u),a=a.sibling;a!==null;)Gl(a,o,u),a=a.sibling}function zl(a,o,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?Qg(u,a,o):Vg(u,a);else if(f!==4&&(a=a.child)!==null)for(zl(a,o,u),a=a.sibling;a!==null;)zl(a,o,u),a=a.sibling}var xe=null,pr=!1;function mr(a,o,u){for(u=u.child;u!==null;)Hl(a,o,u),u=u.sibling}function Hl(a,o,u){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Ds,u)}catch{}switch(u.tag){case 5:ge||en(u,o);case 6:if(vt){var f=xe,p=pr;xe=null,mr(a,o,u),pr=p,(xe=f)!==null&&(pr?Jg(xe,u.stateNode):Zg(xe,u.stateNode))}else mr(a,o,u);break;case 18:vt&&xe!==null&&(pr?wy(xe,u.stateNode):by(xe,u.stateNode));break;case 4:vt?(f=xe,p=pr,xe=u.stateNode.containerInfo,pr=!0,mr(a,o,u),xe=f,pr=p):(kt&&(f=u.stateNode.containerInfo,p=lc(f),Wo(f,p)),mr(a,o,u));break;case 0:case 11:case 14:case 15:if(!ge&&(f=u.updateQueue)!==null&&(f=f.lastEffect)!==null){p=f=f.next;do{var v=p,w=v.destroy;v=v.tag,w!==void 0&&(2&v||4&v)&&Ad(u,o,w),p=p.next}while(p!==f)}mr(a,o,u);break;case 1:if(!ge&&(en(u,o),typeof(f=u.stateNode).componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(E){Ut(u,o,E)}mr(a,o,u);break;case 21:mr(a,o,u);break;case 22:1&u.mode?(ge=(f=ge)||u.memoizedState!==null,mr(a,o,u),ge=f):mr(a,o,u);break;default:mr(a,o,u)}}function Rd(a){var o=a.updateQueue;if(o!==null){a.updateQueue=null;var u=a.stateNode;u===null&&(u=a.stateNode=new Xy),o.forEach(function(f){var p=t0.bind(null,a,f);u.has(f)||(u.add(f),f.then(p,p))})}}function Je(a,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];try{var v=a,w=o;if(vt){var E=w;t:for(;E!==null;){switch(E.tag){case 5:xe=E.stateNode,pr=!1;break t;case 3:case 4:xe=E.stateNode.containerInfo,pr=!0;break t}E=E.return}if(xe===null)throw Error(s(160));Hl(v,w,p),xe=null,pr=!1}else Hl(v,w,p);var P=p.alternate;P!==null&&(P.return=null),p.return=null}catch(M){Ut(p,o,M)}}if(12854&o.subtreeFlags)for(o=o.child;o!==null;)Pd(o,a),o=o.sibling}function Pd(a,o){var u=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Je(o,a),gr(a),4&f){try{Zn(3,a,a.return),oa(3,a)}catch(O){Ut(a,a.return,O)}try{Zn(5,a,a.return)}catch(O){Ut(a,a.return,O)}}break;case 1:Je(o,a),gr(a),512&f&&u!==null&&en(u,u.return);break;case 5:if(Je(o,a),gr(a),512&f&&u!==null&&en(u,u.return),vt){if(32&a.flags){var p=a.stateNode;try{oc(p)}catch(O){Ut(a,a.return,O)}}if(4&f&&(p=a.stateNode)!=null){var v=a.memoizedProps;if(u=u!==null?u.memoizedProps:v,f=a.type,o=a.updateQueue,a.updateQueue=null,o!==null)try{qg(p,o,f,u,v,a)}catch(O){Ut(a,a.return,O)}}}break;case 6:if(Je(o,a),gr(a),4&f&&vt){if(a.stateNode===null)throw Error(s(162));p=a.stateNode,v=a.memoizedProps,u=u!==null?u.memoizedProps:v;try{Xg(p,u,v)}catch(O){Ut(a,a.return,O)}}break;case 3:if(Je(o,a),gr(a),4&f){if(vt&&At&&u!==null&&u.memoizedState.isDehydrated)try{_y(o.containerInfo)}catch(O){Ut(a,a.return,O)}if(kt){p=o.containerInfo,v=o.pendingChildren;try{Wo(p,v)}catch(O){Ut(a,a.return,O)}}}break;case 4:if(Je(o,a),gr(a),4&f&&kt){p=(v=a.stateNode).containerInfo,v=v.pendingChildren;try{Wo(p,v)}catch(O){Ut(a,a.return,O)}}break;case 13:Je(o,a),gr(a),8192&(p=a.child).flags&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(ql=ne())),4&f&&Rd(a);break;case 22:var w=u!==null&&u.memoizedState!==null;if(1&a.mode?(ge=(u=ge)||w,Je(o,a),ge=u):Je(o,a),gr(a),8192&f){if(u=a.memoizedState!==null,(a.stateNode.isHidden=u)&&!w&&(1&a.mode)!=0)for(Z=a,f=a.child;f!==null;){for(o=Z=f;Z!==null;){var E=(w=Z).child;switch(w.tag){case 0:case 11:case 14:case 15:Zn(4,w,w.return);break;case 1:en(w,w.return);var P=w.stateNode;if(typeof P.componentWillUnmount=="function"){var M=w,L=w.return;try{var X=M;P.props=X.memoizedProps,P.state=X.memoizedState,P.componentWillUnmount()}catch(O){Ut(M,L,O)}}break;case 5:en(w,w.return);break;case 22:if(w.memoizedState!==null){Fd(o);continue}}E!==null?(E.return=w,Z=E):Fd(o)}f=f.sibling}if(vt){t:if(f=null,vt)for(o=a;;){if(o.tag===5){if(f===null){f=o;try{p=o.stateNode,u?ty(p):ry(o.stateNode,o.memoizedProps)}catch(O){Ut(a,a.return,O)}}}else if(o.tag===6){if(f===null)try{v=o.stateNode,u?ey(v):iy(v,o.memoizedProps)}catch(O){Ut(a,a.return,O)}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break t;for(;o.sibling===null;){if(o.return===null||o.return===a)break t;f===o&&(f=null),o=o.return}f===o&&(f=null),o.sibling.return=o.return,o=o.sibling}}}break;case 19:Je(o,a),gr(a),4&f&&Rd(a);break;case 21:break;default:Je(o,a),gr(a)}}function gr(a){var o=a.flags;if(2&o){try{if(vt){t:{for(var u=a.return;u!==null;){if(Id(u)){var f=u;break t}u=u.return}throw Error(s(160))}switch(f.tag){case 5:var p=f.stateNode;32&f.flags&&(oc(p),f.flags&=-33),zl(a,Cd(a),p);break;case 3:case 4:var v=f.stateNode.containerInfo;Gl(a,Cd(a),v);break;default:throw Error(s(161))}}}catch(w){Ut(a,a.return,w)}a.flags&=-3}4096&o&&(a.flags&=-4097)}function Yy(a,o,u){Z=a,Nd(a)}function Nd(a,o,u){for(var f=(1&a.mode)!=0;Z!==null;){var p=Z,v=p.child;if(p.tag===22&&f){var w=p.memoizedState!==null||aa;if(!w){var E=p.alternate,P=E!==null&&E.memoizedState!==null||ge;E=aa;var M=ge;if(aa=w,(ge=P)&&!M)for(Z=p;Z!==null;)P=(w=Z).child,w.tag===22&&w.memoizedState!==null?kd(p):P!==null?(P.return=w,Z=P):kd(p);for(;v!==null;)Z=v,Nd(v),v=v.sibling;Z=p,aa=E,ge=M}Md(a)}else 8772&p.subtreeFlags&&v!==null?(v.return=p,Z=v):Md(a)}}function Md(a){for(;Z!==null;){var o=Z;if(8772&o.flags){var u=o.alternate;try{if(8772&o.flags)switch(o.tag){case 0:case 11:case 15:ge||oa(5,o);break;case 1:var f=o.stateNode;if(4&o.flags&&!ge)if(u===null)f.componentDidMount();else{var p=o.elementType===o.type?u.memoizedProps:Ze(o.type,u.memoizedProps);f.componentDidUpdate(p,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&Pc(o,v,f);break;case 3:var w=o.updateQueue;if(w!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=ft(o.child.stateNode);break;case 1:u=o.child.stateNode}Pc(o,w,u)}break;case 5:var E=o.stateNode;u===null&&4&o.flags&&Yg(E,o.type,o.memoizedProps,o);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(At&&o.memoizedState===null){var P=o.alternate;if(P!==null){var M=P.memoizedState;if(M!==null){var L=M.dehydrated;L!==null&&xy(L)}}}break;default:throw Error(s(163))}ge||512&o.flags&&Ul(o)}catch(X){Ut(o,o.return,X)}}if(o===a){Z=null;break}if((u=o.sibling)!==null){u.return=o.return,Z=u;break}Z=o.return}}function Fd(a){for(;Z!==null;){var o=Z;if(o===a){Z=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Z=u;break}Z=o.return}}function kd(a){for(;Z!==null;){var o=Z;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{oa(4,o)}catch(P){Ut(o,u,P)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var p=o.return;try{f.componentDidMount()}catch(P){Ut(o,p,P)}}var v=o.return;try{Ul(o)}catch(P){Ut(o,v,P)}break;case 5:var w=o.return;try{Ul(o)}catch(P){Ut(o,w,P)}}}catch(P){Ut(o,o.return,P)}if(o===a){Z=null;break}var E=o.sibling;if(E!==null){E.return=o.return,Z=E;break}Z=o.return}}var la=0,ha=1,ua=2,ca=3,da=4;if(typeof Symbol=="function"&&Symbol.for){var Jn=Symbol.for;la=Jn("selector.component"),ha=Jn("selector.has_pseudo_class"),ua=Jn("selector.role"),ca=Jn("selector.test_id"),da=Jn("selector.text")}function $l(a){var o=ke(a);if(o!=null){if(typeof o.memoizedProps["data-testname"]!="string")throw Error(s(364));return o}if((a=Ug(a))===null)throw Error(s(362));return a.stateNode.current}function jl(a,o){switch(o.$$typeof){case la:if(a.type===o.value)return!0;break;case ha:t:{o=o.value,a=[a,0];for(var u=0;u<a.length;){var f=a[u++],p=a[u++],v=o[p];if(f.tag!==5||!Ln(f)){for(;v!=null&&jl(f,v);)v=o[++p];if(p===o.length){o=!0;break t}for(f=f.child;f!==null;)a.push(f,p),f=f.sibling}}o=!1}return o;case ua:if(a.tag===5&&Hg(a.stateNode,o.value))return!0;break;case da:if((a.tag===5||a.tag===6)&&(a=zg(a))!==null&&0<=a.indexOf(o.value))return!0;break;case ca:if(a.tag===5&&typeof(a=a.memoizedProps["data-testname"])=="string"&&a.toLowerCase()===o.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function Vl(a){switch(a.$$typeof){case la:return"<"+(W(a.value)||"Unknown")+">";case ha:return":has("+(Vl(a)||"")+")";case ua:return'[role="'+a.value+'"]';case da:return'"'+a.value+'"';case ca:return'[data-testname="'+a.value+'"]';default:throw Error(s(365))}}function Od(a,o){var u=[];a=[a,0];for(var f=0;f<a.length;){var p=a[f++],v=a[f++],w=o[v];if(p.tag!==5||!Ln(p)){for(;w!=null&&jl(p,w);)w=o[++v];if(v===o.length)u.push(p);else for(p=p.child;p!==null;)a.push(p,v),p=p.sibling}}return u}function Wl(a,o){if(!Bn)throw Error(s(363));a=Od(a=$l(a),o),o=[],a=Array.from(a);for(var u=0;u<a.length;){var f=a[u++];if(f.tag===5)Ln(f)||o.push(f.stateNode);else for(f=f.child;f!==null;)a.push(f),f=f.sibling}return o}var qy=Math.ceil,fa=l.ReactCurrentDispatcher,Xl=l.ReactCurrentOwner,qt=l.ReactCurrentBatchConfig,bt=0,oe=null,Zt=null,ce=0,Ce=0,rn=Vr(0),te=0,ts=null,xi=0,pa=0,Yl=0,es=null,Re=null,ql=0,Ql=1/0,qr=null;function nn(){Ql=ne()+500}var Bd,ma=!1,Kl=null,Qr=null,ga=!1,Kr=null,ya=0,rs=0,Zl=null,va=-1,_a=0;function ye(){return 6&bt?ne():va!==-1?va:va=ne()}function Zr(a){return 1&a.mode?2&bt&&ce!==0?ce&-ce:ky.transition!==null?(_a===0&&(_a=gc()),_a):(a=St)!==0?a:pi():1}function He(a,o,u,f){if(50<rs)throw rs=0,Zl=null,Error(s(185));Gn(a,u,f),2&bt&&a===oe||(a===oe&&(!(2&bt)&&(pa|=u),te===4&&Jr(a,ce)),Ae(a,f),u===1&&bt===0&&!(1&o.mode)&&(nn(),Us&&lr()))}function Ae(a,o){var u=a.callbackNode;(function(p,v){for(var w=p.suspendedLanes,E=p.pingedLanes,P=p.expirationTimes,M=p.pendingLanes;0<M;){var L=31-qe(M),X=1<<L,O=P[L];O===-1?X&w&&!(X&E)||(P[L]=Ry(X,v)):O<=v&&(p.expiredLanes|=X),M&=~X}})(a,o);var f=Ls(a,a===oe?ce:0);if(f===0)u!==null&&vc(u),a.callbackNode=null,a.callbackPriority=0;else if(o=f&-f,a.callbackPriority!==o){if(u!=null&&vc(u),o===1)a.tag===0?function(p){Us=!0,xc(p)}(Dd.bind(null,a)):xc(Dd.bind(null,a)),$i?Dg(function(){!(6&bt)&&lr()}):il(nl,lr),u=null;else{switch(yc(f)){case 1:u=nl;break;case 4:u=My;break;case 16:default:u=_c;break;case 536870912:u=Fy}u=Wd(u,Ld.bind(null,a))}a.callbackPriority=o,a.callbackNode=u}}function Ld(a,o){if(va=-1,_a=0,(6&bt)!=0)throw Error(s(327));var u=a.callbackNode;if(wi()&&a.callbackNode!==u)return null;var f=Ls(a,a===oe?ce:0);if(f===0)return null;if(30&f||f&a.expiredLanes||o)o=xa(a,f);else{o=f;var p=bt;bt|=2;var v=zd();for(oe===a&&ce===o||(qr=null,nn(),bi(a,o));;)try{Ky();break}catch(E){Gd(a,E)}dl(),fa.current=v,bt=p,Zt!==null?o=0:(oe=null,ce=0,o=te)}if(o!==0){if(o===2&&(p=tl(a))!==0&&(f=p,o=Jl(a,p)),o===1)throw u=ts,bi(a,0),Jr(a,f),Ae(a,ne()),u;if(o===6)Jr(a,f);else{if(p=a.current.alternate,(30&f)==0&&!function(E){for(var P=E;;){if(16384&P.flags){var M=P.updateQueue;if(M!==null&&(M=M.stores)!==null)for(var L=0;L<M.length;L++){var X=M[L],O=X.getSnapshot;X=X.value;try{if(!Qe(O(),X))return!1}catch{return!1}}}if(M=P.child,16384&P.subtreeFlags&&M!==null)M.return=P,P=M;else{if(P===E)break;for(;P.sibling===null;){if(P.return===null||P.return===E)return!0;P=P.return}P.sibling.return=P.return,P=P.sibling}}return!0}(p)&&((o=xa(a,f))===2&&(v=tl(a))!==0&&(f=v,o=Jl(a,v)),o===1))throw u=ts,bi(a,0),Jr(a,f),Ae(a,ne()),u;switch(a.finishedWork=p,a.finishedLanes=f,o){case 0:case 1:throw Error(s(345));case 2:case 5:sn(a,Re,qr);break;case 3:if(Jr(a,f),(130023424&f)===f&&10<(o=ql+500-ne())){if(Ls(a,0)!==0)break;if(((p=a.suspendedLanes)&f)!==f){ye(),a.pingedLanes|=a.suspendedLanes&p;break}a.timeoutHandle=Mt(sn.bind(null,a,Re,qr),o);break}sn(a,Re,qr);break;case 4:if(Jr(a,f),(4194240&f)===f)break;for(o=a.eventTimes,p=-1;0<f;){var w=31-qe(f);v=1<<w,(w=o[w])>p&&(p=w),f&=~v}if(f=p,10<(f=(120>(f=ne()-f)?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*qy(f/1960))-f)){a.timeoutHandle=Mt(sn.bind(null,a,Re,qr),f);break}sn(a,Re,qr);break;default:throw Error(s(329))}}}return Ae(a,ne()),a.callbackNode===u?Ld.bind(null,a):null}function Jl(a,o){var u=es;return a.current.memoizedState.isDehydrated&&(bi(a,o).flags|=256),(a=xa(a,o))!==2&&(o=Re,Re=u,o!==null&&th(o)),a}function th(a){Re===null?Re=a:Re.push.apply(Re,a)}function Jr(a,o){for(o&=~Yl,o&=~pa,a.suspendedLanes|=o,a.pingedLanes&=~o,a=a.expirationTimes;0<o;){var u=31-qe(o),f=1<<u;a[u]=-1,o&=~f}}function Dd(a){if(6&bt)throw Error(s(327));wi();var o=Ls(a,0);if(!(1&o))return Ae(a,ne()),null;var u=xa(a,o);if(a.tag!==0&&u===2){var f=tl(a);f!==0&&(o=f,u=Jl(a,f))}if(u===1)throw u=ts,bi(a,0),Jr(a,o),Ae(a,ne()),u;if(u===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=o,sn(a,Re,qr),Ae(a,ne()),null}function Ud(a){Kr!==null&&Kr.tag===0&&!(6&bt)&&wi();var o=bt;bt|=1;var u=qt.transition,f=St;try{if(qt.transition=null,St=1,a)return a()}finally{St=f,qt.transition=u,!(6&(bt=o))&&lr()}}function eh(){Ce=rn.current,Lt(rn)}function bi(a,o){a.finishedWork=null,a.finishedLanes=0;var u=a.timeoutHandle;if(u!==ue&&(a.timeoutHandle=ue,ie(u)),Zt!==null)for(u=Zt.return;u!==null;){var f=u;switch(ol(f),f.tag){case 1:(f=f.type.childContextTypes)!=null&&Ko();break;case 3:Ji(),Lt(be),Lt(pe),wl();break;case 5:xl(f);break;case 4:Ji();break;case 13:case 19:Lt(Vt);break;case 10:fl(f.type._context);break;case 22:case 23:eh()}u=u.return}if(oe=a,Zt=a=ti(a.current,null),ce=Ce=o,te=0,ts=null,Yl=pa=xi=0,Re=es=null,vi!==null){for(o=0;o<vi.length;o++)if((f=(u=vi[o]).interleaved)!==null){u.interleaved=null;var p=f.next,v=u.pending;if(v!==null){var w=v.next;v.next=p,f.next=w}u.pending=f}vi=null}return a}function Gd(a,o){for(;;){var u=Zt;try{if(dl(),Ks.current=ea,Zs){for(var f=Gt.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}Zs=!1}if(_i=0,ae=se=Gt=null,Vn=!1,Wn=0,Xl.current=null,u===null||u.return===null){te=1,ts=o,Zt=null;break}t:{var v=a,w=u.return,E=u,P=o;if(o=ce,E.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var M=P,L=E,X=L.tag;if(!(1&L.mode)&&(X===0||X===11||X===15)){var O=L.alternate;O?(L.updateQueue=O.updateQueue,L.memoizedState=O.memoizedState,L.lanes=O.lanes):(L.updateQueue=null,L.memoizedState=null)}var $=hd(w);if($!==null){$.flags&=-257,ud($,w,E,0,o),1&$.mode&&ld(v,M,o),P=M;var rt=(o=$).updateQueue;if(rt===null){var gt=new Set;gt.add(P),o.updateQueue=gt}else rt.add(P);break t}if(!(1&o)){ld(v,M,o),rh();break t}P=Error(s(426))}else if(Dt&&1&E.mode){var D=hd(w);if(D!==null){!(65536&D.flags)&&(D.flags|=256),ud(D,w,E,0,o),ul(tn(P,E));break t}}v=P=tn(P,E),te!==4&&(te=2),es===null?es=[v]:es.push(v),v=w;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o,Rc(v,ad(0,P,o));break t;case 1:E=P;var R=v.type,N=v.stateNode;if(!(128&v.flags)&&(typeof R.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Qr===null||!Qr.has(N)))){v.flags|=65536,o&=-o,v.lanes|=o,Rc(v,od(v,E,o));break t}}v=v.return}while(v!==null)}$d(u)}catch(H){o=H,Zt===u&&u!==null&&(Zt=u=u.return);continue}break}}function zd(){var a=fa.current;return fa.current=ea,a===null?ea:a}function rh(){te!==0&&te!==3&&te!==2||(te=4),oe===null||!(268435455&xi)&&!(268435455&pa)||Jr(oe,ce)}function xa(a,o){var u=bt;bt|=2;var f=zd();for(oe===a&&ce===o||(qr=null,bi(a,o));;)try{Qy();break}catch(p){Gd(a,p)}if(dl(),bt=u,fa.current=f,Zt!==null)throw Error(s(261));return oe=null,ce=0,te}function Qy(){for(;Zt!==null;)Hd(Zt)}function Ky(){for(;Zt!==null&&!Py();)Hd(Zt)}function Hd(a){var o=Bd(a.alternate,a,Ce);a.memoizedProps=a.pendingProps,o===null?$d(a):Zt=o,Xl.current=null}function $d(a){var o=a;do{var u=o.alternate;if(a=o.return,(32768&o.flags)==0){if((u=Vy(u,o,Ce))!==null)return void(Zt=u)}else{if((u=Wy(u,o))!==null)return u.flags&=32767,void(Zt=u);if(a===null)return te=6,void(Zt=null);a.flags|=32768,a.subtreeFlags=0,a.deletions=null}if((o=o.sibling)!==null)return void(Zt=o);Zt=o=a}while(o!==null);te===0&&(te=5)}function sn(a,o,u){var f=St,p=qt.transition;try{qt.transition=null,St=1,function(v,w,E,P){do wi();while(Kr!==null);if(6&bt)throw Error(s(327));E=v.finishedWork;var M=v.finishedLanes;if(E===null)return null;if(v.finishedWork=null,v.finishedLanes=0,E===v.current)throw Error(s(177));v.callbackNode=null,v.callbackPriority=0;var L=E.lanes|E.childLanes;if(function($,rt){var gt=$.pendingLanes&~rt;$.pendingLanes=rt,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=rt,$.mutableReadLanes&=rt,$.entangledLanes&=rt,rt=$.entanglements;var D=$.eventTimes;for($=$.expirationTimes;0<gt;){var R=31-qe(gt),N=1<<R;rt[R]=0,D[R]=-1,$[R]=-1,gt&=~N}}(v,L),v===oe&&(Zt=oe=null,ce=0),!(2064&E.subtreeFlags)&&!(2064&E.flags)||ga||(ga=!0,Wd(_c,function(){return wi(),null})),L=(15990&E.flags)!=0,(15990&E.subtreeFlags)!=0||L){L=qt.transition,qt.transition=null;var X=St;St=1;var O=bt;bt|=4,Xl.current=null,function($,rt){for(K($.containerInfo),Z=rt;Z!==null;)if(rt=($=Z).child,(1028&$.subtreeFlags)!=0&&rt!==null)rt.return=$,Z=rt;else for(;Z!==null;){$=Z;try{var gt=$.alternate;if(1024&$.flags)switch($.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(gt!==null){var D=gt.memoizedProps,R=gt.memoizedState,N=$.stateNode,H=N.getSnapshotBeforeUpdate($.elementType===$.type?D:Ze($.type,D),R);N.__reactInternalSnapshotBeforeUpdate=H}break;case 3:vt&&ny($.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(ut){Ut($,$.return,ut)}if((rt=$.sibling)!==null){rt.return=$.return,Z=rt;break}Z=$.return}gt=Sd,Sd=!1}(v,E),Pd(E,v),k(v.containerInfo),v.current=E,Yy(E),Ny(),bt=O,St=X,qt.transition=L}else v.current=E;if(ga&&(ga=!1,Kr=v,ya=M),L=v.pendingLanes,L===0&&(Qr=null),function($){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Ds,$,void 0,(128&$.current.flags)==128)}catch{}}(E.stateNode),Ae(v,ne()),w!==null)for(P=v.onRecoverableError,E=0;E<w.length;E++)M=w[E],P(M.value,{componentStack:M.stack,digest:M.digest});if(ma)throw ma=!1,v=Kl,Kl=null,v;1&ya&&v.tag!==0&&wi(),L=v.pendingLanes,1&L?v===Zl?rs++:(rs=0,Zl=v):rs=0,lr()}(a,o,u,f)}finally{qt.transition=p,St=f}return null}function wi(){if(Kr!==null){var a=yc(ya),o=qt.transition,u=St;try{if(qt.transition=null,St=16>a?16:a,Kr===null)var f=!1;else{if(a=Kr,Kr=null,ya=0,(6&bt)!=0)throw Error(s(331));var p=bt;for(bt|=4,Z=a.current;Z!==null;){var v=Z,w=v.child;if(16&Z.flags){var E=v.deletions;if(E!==null){for(var P=0;P<E.length;P++){var M=E[P];for(Z=M;Z!==null;){var L=Z;switch(L.tag){case 0:case 11:case 15:Zn(8,L,v)}var X=L.child;if(X!==null)X.return=L,Z=X;else for(;Z!==null;){var O=(L=Z).sibling,$=L.return;if(Ed(L),L===M){Z=null;break}if(O!==null){O.return=$,Z=O;break}Z=$}}}var rt=v.alternate;if(rt!==null){var gt=rt.child;if(gt!==null){rt.child=null;do{var D=gt.sibling;gt.sibling=null,gt=D}while(gt!==null)}}Z=v}}if(2064&v.subtreeFlags&&w!==null)w.return=v,Z=w;else t:for(;Z!==null;){if(2048&(v=Z).flags)switch(v.tag){case 0:case 11:case 15:Zn(9,v,v.return)}var R=v.sibling;if(R!==null){R.return=v.return,Z=R;break t}Z=v.return}}var N=a.current;for(Z=N;Z!==null;){var H=(w=Z).child;if(2064&w.subtreeFlags&&H!==null)H.return=w,Z=H;else t:for(w=N;Z!==null;){if(2048&(E=Z).flags)try{switch(E.tag){case 0:case 11:case 15:oa(9,E)}}catch(Rt){Ut(E,E.return,Rt)}if(E===w){Z=null;break t}var ut=E.sibling;if(ut!==null){ut.return=E.return,Z=ut;break t}Z=E.return}}if(bt=p,lr(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Ds,a)}catch{}f=!0}return f}finally{St=u,qt.transition=o}}return!1}function jd(a,o,u){a=Yr(a,o=ad(0,o=tn(u,o),1),1),o=ye(),a!==null&&(Gn(a,1,o),Ae(a,o))}function Ut(a,o,u){if(a.tag===3)jd(a,a,u);else for(;o!==null;){if(o.tag===3){jd(o,a,u);break}if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Qr===null||!Qr.has(f))){o=Yr(o,a=od(o,a=tn(u,a),1),1),a=ye(),o!==null&&(Gn(o,1,a),Ae(o,a));break}}o=o.return}}function Zy(a,o,u){var f=a.pingCache;f!==null&&f.delete(o),o=ye(),a.pingedLanes|=a.suspendedLanes&u,oe===a&&(ce&u)===u&&(te===4||te===3&&(130023424&ce)===ce&&500>ne()-ql?bi(a,0):Yl|=u),Ae(a,o)}function Vd(a,o){o===0&&(1&a.mode?(o=Jo,!(130023424&(Jo<<=1))&&(Jo=4194304)):o=1);var u=ye();(a=ur(a,o))!==null&&(Gn(a,o,u),Ae(a,u))}function Jy(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),Vd(a,u)}function t0(a,o){var u=0;switch(a.tag){case 13:var f=a.stateNode,p=a.memoizedState;p!==null&&(u=p.retryLane);break;case 19:f=a.stateNode;break;default:throw Error(s(314))}f!==null&&f.delete(o),Vd(a,u)}function Wd(a,o){return il(a,o)}function e0(a,o,u,f){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $e(a,o,u,f){return new e0(a,o,u,f)}function ih(a){return!(!(a=a.prototype)||!a.isReactComponent)}function ti(a,o){var u=a.alternate;return u===null?((u=$e(a.tag,o,a.key,a.mode)).elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=14680064&a.flags,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u}function ba(a,o,u,f,p,v){var w=2;if(f=a,typeof a=="function")ih(a)&&(w=1);else if(typeof a=="string")w=5;else t:switch(a){case d:return Ti(u.children,p,v,o);case m:w=8,p|=8;break;case y:return(a=$e(12,u,o,2|p)).elementType=y,a.lanes=v,a;case b:return(a=$e(13,u,o,p)).elementType=b,a.lanes=v,a;case T:return(a=$e(19,u,o,p)).elementType=T,a.lanes=v,a;case A:return wa(u,p,v,o);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case g:w=10;break t;case _:w=9;break t;case x:w=11;break t;case S:w=14;break t;case C:w=16,f=null;break t}throw Error(s(130,a==null?a:typeof a,""))}return(o=$e(w,u,o,p)).elementType=a,o.type=f,o.lanes=v,o}function Ti(a,o,u,f){return(a=$e(7,a,f,o)).lanes=u,a}function wa(a,o,u,f){return(a=$e(22,a,f,o)).elementType=A,a.lanes=u,a.stateNode={isHidden:!1},a}function nh(a,o,u){return(a=$e(6,a,null,o)).lanes=u,a}function sh(a,o,u){return(o=$e(4,a.children!==null?a.children:[],a.key,o)).lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}function r0(a,o,u,f,p){this.tag=o,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=el(0),this.expirationTimes=el(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=el(0),this.identifierPrefix=f,this.onRecoverableError=p,At&&(this.mutableSourceEagerHydrationData=null)}function Xd(a,o,u,f,p,v,w,E,P){return a=new r0(a,o,u,E,P),o===1?(o=1,v===!0&&(o|=8)):o=0,v=$e(3,null,null,o),a.current=v,v.stateNode=a,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},gl(v),a}function Yd(a){if(!a)return Wr;t:{if(G(a=a._reactInternals)!==a||a.tag!==1)throw Error(s(170));var o=a;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Ee(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(s(171))}if(a.tag===1){var u=a.type;if(Ee(u))return pc(a,u,o)}return o}function qd(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return(a=mt(o))===null?null:a.stateNode}function Qd(a,o){if((a=a.memoizedState)!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function Ta(a,o){Qd(a,o),(a=a.alternate)&&Qd(a,o)}function i0(a){return(a=mt(a))===null?null:a.stateNode}function n0(){return null}return Bd=function(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps||be.current)we=!0;else{if(!(a.lanes&u)&&!(128&o.flags))return we=!1,function(X,O,$){switch(O.tag){case 3:yd(O),Yi();break;case 5:Dc(O);break;case 1:Ee(O.type)&&Bs(O);break;case 4:_l(O,O.stateNode.containerInfo);break;case 10:Ec(0,O.type._context,O.memoizedProps.value);break;case 13:var rt=O.memoizedState;if(rt!==null)return rt.dehydrated!==null?(Ft(Vt,1&Vt.current),O.flags|=128,null):$&O.child.childLanes?_d(X,O,$):(Ft(Vt,1&Vt.current),(X=Fr(X,O,$))!==null?X.sibling:null);Ft(Vt,1&Vt.current);break;case 19:if(rt=($&O.childLanes)!=0,(128&X.flags)!=0){if(rt)return bd(X,O,$);O.flags|=128}var gt=O.memoizedState;if(gt!==null&&(gt.rendering=null,gt.tail=null,gt.lastEffect=null),Ft(Vt,Vt.current),rt)break;return null;case 22:case 23:return O.lanes=0,pd(X,O,$)}return Fr(X,O,$)}(a,o,u);we=(131072&a.flags)!=0}else we=!1,Dt&&1048576&o.flags&&bc(o,zs,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;sa(a,o),a=o.pendingProps;var p=Vi(o,pe.current);Qi(o,u),p=Sl(null,o,f,a,p,u);var v=El();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ee(f)?(v=!0,Bs(o)):v=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,gl(o),p.updater=Ys,o.stateNode=p,p._reactInternals=o,vl(o,f,a,u),o=kl(null,o,f,!0,v,u)):(o.tag=0,Dt&&v&&al(o),Te(null,o,p,u),o=o.child),o;case 16:f=o.elementType;t:{switch(sa(a,o),a=o.pendingProps,f=(p=f._init)(f._payload),o.type=f,p=o.tag=function(X){if(typeof X=="function")return ih(X)?1:0;if(X!=null){if((X=X.$$typeof)===x)return 11;if(X===S)return 14}return 2}(f),a=Ze(f,a),p){case 0:o=Fl(null,o,f,a,u);break t;case 1:o=gd(null,o,f,a,u);break t;case 11:o=cd(null,o,f,a,u);break t;case 14:o=dd(null,o,f,Ze(f.type,a),u);break t}throw Error(s(306,f,""))}return o;case 0:return f=o.type,p=o.pendingProps,Fl(a,o,f,p=o.elementType===f?p:Ze(f,p),u);case 1:return f=o.type,p=o.pendingProps,gd(a,o,f,p=o.elementType===f?p:Ze(f,p),u);case 3:t:{if(yd(o),a===null)throw Error(s(387));f=o.pendingProps,p=(v=o.memoizedState).element,Cc(a,o),Xs(o,f,null,u);var w=o.memoizedState;if(f=w.element,At&&v.isDehydrated){if(v={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=v,o.memoizedState=v,256&o.flags){o=vd(a,o,f,u,p=tn(Error(s(423)),o));break t}if(f!==p){o=vd(a,o,f,u,p=tn(Error(s(424)),o));break t}for(At&&(De=fy(o.stateNode.containerInfo),Ie=o,Dt=!0,Ke=null,zn=!1),u=Lc(o,null,f,u),o.child=u;u;)u.flags=-3&u.flags|4096,u=u.sibling}else{if(Yi(),f===p){o=Fr(a,o,u);break t}Te(a,o,f,u)}o=o.child}return o;case 5:return Dc(o),a===null&&hl(o),f=o.type,p=o.pendingProps,v=a!==null?a.memoizedProps:null,w=p.children,Nt(f,p)?w=null:v!==null&&Nt(f,v)&&(o.flags|=32),md(a,o),Te(a,o,w,u),o.child;case 6:return a===null&&hl(o),null;case 13:return _d(a,o,u);case 4:return _l(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=Ki(o,null,f,u):Te(a,o,f,u),o.child;case 11:return f=o.type,p=o.pendingProps,cd(a,o,f,p=o.elementType===f?p:Ze(f,p),u);case 7:return Te(a,o,o.pendingProps,u),o.child;case 8:case 12:return Te(a,o,o.pendingProps.children,u),o.child;case 10:t:{if(f=o.type._context,p=o.pendingProps,v=o.memoizedProps,Ec(0,f,w=p.value),v!==null)if(Qe(v.value,w)){if(v.children===p.children&&!be.current){o=Fr(a,o,u);break t}}else for((v=o.child)!==null&&(v.return=o);v!==null;){var E=v.dependencies;if(E!==null){w=v.child;for(var P=E.firstContext;P!==null;){if(P.context===f){if(v.tag===1){(P=Mr(-1,u&-u)).tag=2;var M=v.updateQueue;if(M!==null){var L=(M=M.shared).pending;L===null?P.next=P:(P.next=L.next,L.next=P),M.pending=P}}v.lanes|=u,(P=v.alternate)!==null&&(P.lanes|=u),pl(v.return,u,o),E.lanes|=u;break}P=P.next}}else if(v.tag===10)w=v.type===o.type?null:v.child;else if(v.tag===18){if((w=v.return)===null)throw Error(s(341));w.lanes|=u,(E=w.alternate)!==null&&(E.lanes|=u),pl(w,u,o),w=v.sibling}else w=v.child;if(w!==null)w.return=v;else for(w=v;w!==null;){if(w===o){w=null;break}if((v=w.sibling)!==null){v.return=w.return,w=v;break}w=w.return}v=w}Te(a,o,p.children,u),o=o.child}return o;case 9:return p=o.type,f=o.pendingProps.children,Qi(o,u),f=f(p=Ue(p)),o.flags|=1,Te(a,o,f,u),o.child;case 14:return p=Ze(f=o.type,o.pendingProps),dd(a,o,f,p=Ze(f.type,p),u);case 15:return fd(a,o,o.type,o.pendingProps,u);case 17:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Ze(f,p),sa(a,o),o.tag=1,Ee(f)?(a=!0,Bs(o)):a=!1,Qi(o,u),Fc(o,f,p),vl(o,f,p,u),kl(null,o,f,!0,a,u);case 19:return bd(a,o,u);case 22:return pd(a,o,u)}throw Error(s(156,o.tag))},t.attemptContinuousHydration=function(a){if(a.tag===13){var o=ur(a,134217728);o!==null&&He(o,a,134217728,ye()),Ta(a,134217728)}},t.attemptDiscreteHydration=function(a){if(a.tag===13){var o=ur(a,1);o!==null&&He(o,a,1,ye()),Ta(a,1)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var o=Zr(a),u=ur(a,o);u!==null&&He(u,a,o,ye()),Ta(a,o)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var o=a.stateNode;if(o.current.memoizedState.isDehydrated){var u=Un(o.pendingLanes);u!==0&&(rl(o,1|u),Ae(o,ne()),!(6&bt)&&(nn(),lr()))}break;case 13:Ud(function(){var f=ur(a,1);if(f!==null){var p=ye();He(f,a,1,p)}}),Ta(a,1)}},t.batchedUpdates=function(a,o){var u=bt;bt|=1;try{return a(o)}finally{(bt=u)===0&&(nn(),Us&&lr())}},t.createComponentSelector=function(a){return{$$typeof:la,value:a}},t.createContainer=function(a,o,u,f,p,v,w){return Xd(a,o,!1,null,0,f,0,v,w)},t.createHasPseudoClassSelector=function(a){return{$$typeof:ha,value:a}},t.createHydrationContainer=function(a,o,u,f,p,v,w,E,P){return(a=Xd(u,f,!0,a,0,v,0,E,P)).context=Yd(null),u=a.current,(v=Mr(f=ye(),p=Zr(u))).callback=o??null,Yr(u,v,p),a.current.lanes=p,Gn(a,p,f),Ae(a,f),a},t.createPortal=function(a,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:f==null?null:""+f,children:a,containerInfo:o,implementation:u}},t.createRoleSelector=function(a){return{$$typeof:ua,value:a}},t.createTestNameSelector=function(a){return{$$typeof:ca,value:a}},t.createTextSelector=function(a){return{$$typeof:da,value:a}},t.deferredUpdates=function(a){var o=St,u=qt.transition;try{return qt.transition=null,St=16,a()}finally{St=o,qt.transition=u}},t.discreteUpdates=function(a,o,u,f,p){var v=St,w=qt.transition;try{return qt.transition=null,St=1,a(o,u,f,p)}finally{St=v,qt.transition=w,bt===0&&nn()}},t.findAllNodes=Wl,t.findBoundingRects=function(a,o){if(!Bn)throw Error(s(363));o=Wl(a,o),a=[];for(var u=0;u<o.length;u++)a.push(Gg(o[u]));for(o=a.length-1;0<o;o--)for(var f=(u=a[o]).x,p=f+u.width,v=u.y,w=v+u.height,E=o-1;0<=E;E--)if(o!==E){var P=a[E],M=P.x,L=M+P.width,X=P.y,O=X+P.height;if(f>=M&&v>=X&&p<=L&&w<=O){a.splice(o,1);break}if(!(f!==M||u.width!==P.width||O<v||X>w)){X>v&&(P.height+=X-v,P.y=v),O<w&&(P.height=w-X),a.splice(o,1);break}if(!(v!==X||u.height!==P.height||L<f||M>p)){M>f&&(P.width+=M-f,P.x=f),L<p&&(P.width=p-M),a.splice(o,1);break}}return a},t.findHostInstance=qd,t.findHostInstanceWithNoPortals=function(a){return(a=(a=it(a))!==null?F(a):null)===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return qd(a)},t.flushControlled=function(a){var o=bt;bt|=1;var u=qt.transition,f=St;try{qt.transition=null,St=1,a()}finally{St=f,qt.transition=u,(bt=o)===0&&(nn(),lr())}},t.flushPassiveEffects=wi,t.flushSync=Ud,t.focusWithin=function(a,o){if(!Bn)throw Error(s(363));for(o=Od(a=$l(a),o),o=Array.from(o),a=0;a<o.length;){var u=o[a++];if(!Ln(u)){if(u.tag===5&&$g(u.stateNode))return!0;for(u=u.child;u!==null;)o.push(u),u=u.sibling}}return!1},t.getCurrentUpdatePriority=function(){return St},t.getFindAllNodesFailureDescription=function(a,o){if(!Bn)throw Error(s(363));var u=0,f=[];a=[$l(a),0];for(var p=0;p<a.length;){var v=a[p++],w=a[p++],E=o[w];if((v.tag!==5||!Ln(v))&&(jl(v,E)&&(f.push(Vl(E)),++w>u&&(u=w)),w<o.length))for(v=v.child;v!==null;)a.push(v,w),v=v.sibling}if(u<o.length){for(a=[];u<o.length;u++)a.push(Vl(o[u]));return`findAllNodes was able to match part of the selector:
  `+f.join(" > ")+`

No matching component was found for:
  `+a.join(" > ")}return null},t.getPublicRootInstance=function(a){return(a=a.current).child?a.child.tag===5?ft(a.child.stateNode):a.child.stateNode:null},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:i0,findFiberByHostInstance:a.findFiberByHostInstance||n0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(o.isDisabled||!o.supportsFiber)a=!0;else{try{Ds=o.inject(a),or=o}catch{}a=!!o.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,o,u,f){if(!Bn)throw Error(s(363));a=Wl(a,o);var p=jg(a,u,f).disconnect;return{disconnect:function(){p()}}},t.registerMutableSourceForHydration=function(a,o){var u=o._getVersion;u=u(o._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[o,u]:a.mutableSourceEagerHydrationData.push(o,u)},t.runWithPriority=function(a,o){var u=St;try{return St=a,o()}finally{St=u}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,o,u,f){var p=o.current,v=ye(),w=Zr(p);return u=Yd(u),o.context===null?o.context=u:o.pendingContext=u,(o=Mr(v,w)).payload={element:a},(f=f===void 0?null:f)!==null&&(o.callback=f),(a=Yr(p,o,w))!==null&&(He(a,p,w,v),Ws(a,p,w)),w},t}),Rp}({get exports(){return Du},set exports(r){Du=r}}).exports=yT();var vT=jw(Du),Pg={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},Gu={},ja={get exports(){return Gu},set exports(r){Gu=r}};(function(){var r,t,e,i,n,s;typeof performance<"u"&&performance!==null&&performance.now?ja.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(ja.exports=function(){return(r()-n)/1e6},t=process.hrtime,i=(r=function(){var l;return 1e9*(l=t())[0]+l[1]})(),s=1e9*process.uptime(),n=i-s):Date.now?(ja.exports=function(){return Date.now()-e},e=Date.now()):(ja.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call($w);var Mp,bn={},Ei={};({get exports(){return bn},set exports(r){bn=r}}).exports=(Mp||(Mp=1,Ei.ConcurrentRoot=1,Ei.ContinuousEventPriority=4,Ei.DefaultEventPriority=16,Ei.DiscreteEventPriority=1,Ei.IdleEventPriority=536870912,Ei.LegacyRoot=0),Ei);var _T={};function Qh(r,t){r.addChild&&(r.addChild(t),typeof t.didMount=="function"&&t.didMount(t,r))}function Ng(r,t){var e,i,n;(e=r.willUnmount)===null||e===void 0||e.call(r,r,t),((i=r.config)===null||i===void 0?void 0:i.destroyChildren)!==!1&&(n=r.children)!==null&&n!==void 0&&n.length&&jr(r.children).forEach(function(s){Ng(s,r)})}function Fp(r,t){var e;Ng(t,r),r.removeChild(t);var i=(e=t.config)!==null&&e!==void 0?e:{},n=i.destroy,s=n===void 0||n,l=i.destroyChildren,h=l===void 0||l,c=i.destroyTexture,d=c!==void 0&&c,m=i.destroyBaseTexture,y=m!==void 0&&m;s&&t.destroy({children:h,texture:d,baseTexture:y})}function kp(r,t,e){var i,n;Yt(t!==e,"Cannot insert node before itself"),r.children.indexOf(t)!==-1&&r.removeChild(t);var s=r.getChildIndex(e);r.addChildAt(t,s),(i=r.__reactpixi)===null||i===void 0||(n=i.root)===null||n===void 0||n.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var Op=null,nr=vT({getRootHostContext:function(){return _T},getChildHostContext:function(r){return r},getChildHostContextForEventComponent:function(r){return r},getPublicInstance:function(r){return r},getCurrentEventPriority:function(){return function(){var r,t;if(typeof window>"u")return bn.DefaultEventPriority;switch((r=window)===null||r===void 0||(t=r.event)===null||t===void 0?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return bn.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return bn.ContinuousEventPriority;default:return bn.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(r){var t,e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=fT[r];if(typeof s=="function"&&(t=s(n,i)),!t){var l=Rg[r];l&&((t=l.create(i,{root:n})).didMount=l.didMount?l.didMount.bind(t):void 0,t.willUnmount=l.willUnmount?l.willUnmount.bind(t):void 0,t.applyProps=l.applyProps?l.applyProps.bind(t):void 0,t.config=l.config)}return t&&(t.__reactpixi={root:n},(typeof((e=t)===null||e===void 0?void 0:e.applyProps)=="function"?t.applyProps:Cr)(t,{},i)),t},hideInstance:function(r){r.visible=!1},unhideInstance:function(r,t){var e=t==null||!t.hasOwnProperty("visible")||t.visible;r.visible=e},finalizeInitialChildren:function(r,t,e){return!1},prepareUpdate:function(r,t,e,i,n,s){return Op=function(l,h,c,d){var m=null;for(var y in c)!d.hasOwnProperty(y)&&c.hasOwnProperty(y)&&c[y]!==null&&(y===Bu||(m||(m=[]),m.push(y,null)));for(var g in d){var _=d[g],x=c!==null?c[g]:void 0;!d.hasOwnProperty(g)||_===x||_===null&&x===null||g===Bu||(m||(m=[]),m.push(g,_))}return m}(0,0,e,i)},shouldSetTextContent:function(r,t){return!1},shouldDeprioritizeSubtree:function(r,t){var e=t.alpha===void 0||t.alpha>0,i=t.renderable===void 0||t.renderable===!0,n=t.visible===void 0||t.visible===!0;return!(e&&i&&n)},createTextInstance:function(r,t,e){Yt(!1,'Error trying to add text node "'.concat(r,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(r,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:Gu,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=Qh.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=Qh.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=Qh.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=Fp.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=Fp.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:kp,insertInContainerBefore:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=kp.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(r,t,e,i,n){var s,l,h=r&&r.applyProps;typeof h!="function"&&(h=Cr),(h(r,i,n)||Op)&&((s=r.__reactpixi)===null||s===void 0||(l=s.root)===null||l===void 0||l.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(r,t,e,i,n){},commitTextUpdate:function(r,t,e){},resetTextContent:function(r){},clearContainer:function(r){},getFundamentalComponentInstance:function(r){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(r){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},getInstanceFromNode:function(r){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(r){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(r){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(r){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(r){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(r){}}),xT=Pg.dependencies["react-dom"].replace(/[^0-9.]/g,""),bT=Pg.name;nr.injectIntoDevTools({bundleType:0,version:xT,rendererPackageName:bT,findHostInstanceByFiber:nr.findHostInstance});var li=new Map;function Mg(r){if(Yt(Fe.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `Container`."),li.has(r)){var t=li.get(r).pixiFiberContainer;nr.updateContainer(null,t,void 0,function(){li.delete(r)})}}function Fg(r){Yt(Fe.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `Container`.");var t=li.get(r);if(Yt(!t,"createRoot should only be called once"),!t){var e=nr.createContainer(r);t={pixiFiberContainer:e,reactRoot:{render:function(i){return nr.updateContainer(i,e,void 0),nr.getPublicRootInstance(e)},unmount:function(){Mg(r),li.delete(r)}}},li.set(r,t)}return t.reactRoot}function wT(r,t,e){var i;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),e!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),li.has(t)?i=li.get(t).reactRoot:i=Fg(t),i.render(r)}function TT(r){Mg(r)}function Ns(){return Ns=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ns.apply(this,arguments)}function AT(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function ST(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Eg(i.key),i)}}function Br(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Ao(r,t){return Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Ao(r,t)}function ET(r,t){if(t&&(Me(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Br(r)}function So(r){return So=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},So(r)}var jo=Gr.createContext(null),kg=jo.Provider,Og=jo.Consumer,IT=function(r){var t=Gr.forwardRef(function(e,i){return Gr.createElement(Og,null,function(n){return Gr.createElement(r,Ns({},e,{ref:i,app:n}))})});return t.displayName="withPIXIApp(".concat(r.displayName||r.name,")"),t};function CT(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,i=So(r);if(t){var n=So(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return ET(this,e)}}function Bp(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function Va(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Bp(Object(e),!0).forEach(function(i){Qt(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Bp(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Lp=function(){},Bg={width:Ot.number,height:Ot.number,onMount:Ot.func,onUnmount:Ot.func,raf:Ot.bool,renderOnComponentChange:Ot.bool,children:Ot.node,options:Ot.shape({autoStart:Ot.bool,width:Ot.number,height:Ot.number,useContextAlpha:Ot.bool,backgroundAlpha:Ot.number,autoDensity:Ot.bool,antialias:Ot.bool,preserveDrawingBuffer:Ot.bool,resolution:Ot.number,forceCanvas:Ot.bool,backgroundColor:Ot.number,clearBeforeRender:Ot.bool,powerPreference:Ot.string,sharedTicker:Ot.bool,sharedLoader:Ot.bool,resizeTo:function(r,t){var e=r[t];e&&Yt(e===window||e instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Me(e),", expect `window` or an `HTMLElement`."))},view:function(r,t,e){var i=r[t];i&&Yt(i instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Me(i),", supplied to ").concat(e,", expected `<canvas> Element`"))}})},RT={width:800,height:600,onMount:Lp,onUnmount:Lp,raf:!0,renderOnComponentChange:!0},zu=function(r){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),l&&Ao(s,l)})(n,Gr.Component);var t,e,i=CT(n);function n(){var s;AT(this,n);for(var l=arguments.length,h=new Array(l),c=0;c<l;c++)h[c]=arguments[c];return Qt(Br(s=i.call.apply(i,[this].concat(h))),"_canvas",null),Qt(Br(s),"_mediaQuery",null),Qt(Br(s),"_ticker",null),Qt(Br(s),"_needsUpdate",!0),Qt(Br(s),"app",null),Qt(Br(s),"updateSize",function(){var d=s.props,m=d.width,y=d.height,g=d.options;g!=null&&g.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(m,y)}),Qt(Br(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),Qt(Br(s),"renderStage",function(){var d=s.props,m=d.renderOnComponentChange;!d.raf&&m&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return t=n,(e=[{key:"componentDidMount",value:function(){var s=this.props,l=s.onMount,h=s.width,c=s.height,d=s.options,m=s.raf,y=s.renderOnComponentChange;this.app=new $o(Va(Va({width:h,height:c,view:this._canvas},d),{},{autoDensity:(d==null?void 0:d.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[m?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=nr.createContainer(this.app.stage),nr.updateContainer(this.getChildren(),this.mountNode,this),l(this.app),d!=null&&d.autoDensity&&window.matchMedia&&(d==null?void 0:d.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),y&&!m&&(this._ticker=new Ne,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,l,h){var c,d=this.props,m=d.width,y=d.height,g=d.raf,_=d.renderOnComponentChange,x=d.options;(x==null?void 0:x.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(x==null?void 0:x.resolution)&&(this.app.renderer.resolution=x.resolution,this.resetInteractionManager()),s.height===y&&s.width===m&&((c=s.options)===null||c===void 0?void 0:c.resolution)===(x==null?void 0:x.resolution)||this.updateSize(),s.raf!==g&&this.app.ticker[g?"start":"stop"](),nr.updateContainer(this.getChildren(),this.mountNode,this),s.width===m&&s.height===y&&s.raf===g&&s.renderOnComponentChange===_&&s.options===x||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return Gr.createElement(kg,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,l){console.error("Error occurred in `Stage`."),console.error(s),console.error(l)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),nr.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,l,h=this,c=this.props.options;return c&&c.view?(Yt(c.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):Gr.createElement("canvas",Ns({},(s=this.props,l=[].concat(jr(Object.keys(Bg)),jr(Object.keys(Lu))),Object.keys(s).filter(function(d){return!l.includes(d)}).reduce(function(d,m){return Va(Va({},d),{},Qt({},m,s[m]))},{})),{ref:function(d){return h._canvas=d}}))}}])&&ST(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),n}();zu.propTypes=Bg,zu.defaultProps=RT;var PT=zu;function Lg(){var r=si.useContext(jo);return Yt(r instanceof $o,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),r}function NT(r){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],e=Lg();Yt(typeof r=="function","`useTick` needs a callback function."),Yt(e instanceof $o,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var i=si.useRef(null);si.useEffect(function(){i.current=r},[r]),si.useEffect(function(){if(t){var n=function(s){return i.current.apply(e.ticker,[s,e.ticker])};return e.ticker.add(n),function(){e.ticker&&e.ticker.remove(n)}}},[t])}function MT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hu(r,t,e){return Hu=MT()?Reflect.construct.bind():function(i,n,s){var l=[null];l.push.apply(l,n);var h=new(Function.bind.apply(i,l));return s&&Ao(h,s.prototype),h},Hu.apply(null,arguments)}var FT=["children","apply"];function Dp(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function Wa(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Dp(Object(e),!0).forEach(function(i){Qt(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Dp(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var kT=function(r,t){Yt(Me(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var e=Object.keys(t),i=function(n){var s=n.children,l=n.apply,h=fi(n,FT),c=si.useRef(si.useMemo(function(){return e.map(function(y){var g,_=(h==null||(g=h[y])===null||g===void 0?void 0:g.construct)||[];return Hu(t[y],jr(_))})},[e])),d=si.useMemo(function(){return e.reduce(function(y,g,_){return Wa(Wa({},y),{},Qt({},g,c.current[_]))},{})},[e]),m=si.useMemo(function(){return Object.keys(h).filter(Cg(Ig(e))).reduce(function(y,g){return Wa(Wa({},y),{},Qt({},g,h[g]))},{})},[h,e]);return e.forEach(function(y,g){return Object.assign(c.current[g],h[y])}),l&&function(){for(var y=arguments.length,g=new Array(y),_=0;_<y;_++)g[_]=arguments[_];return g.every(function(x){return typeof x=="function"})}(l)&&l.call(r,d),Gr.createElement(r,Ns({},m,{filters:c.current}),s)};return i.displayName="FilterWrapper",i.propTypes={children:Ot.node,apply:Ot.func},i},OT=Se.BitmapText,BT=Se.Container,LT=Se.Graphics,DT=Se.NineSlicePlane,UT=Se.ParticleContainer,GT=Se.Sprite,zT=Se.AnimatedSprite,HT=Se.Text,$T=Se.TilingSprite,jT=Se.SimpleMesh,VT=Se.SimpleRope;const WT=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:zT,AppConsumer:Og,AppContext:jo,AppProvider:kg,BitmapText:OT,Container:BT,Graphics:LT,NineSlicePlane:DT,ParticleContainer:UT,PixiComponent:pT,PixiFiber:nr,SimpleMesh:jT,SimpleRope:VT,Sprite:GT,Stage:PT,TYPES:Se,Text:HT,TilingSprite:$T,applyDefaultProps:Cr,createRoot:Fg,eventHandlers:To,render:wT,unmountComponentAtNode:TT,useApp:Lg,useTick:NT,withFilters:kT,withPixiApp:IT},Symbol.toStringTag,{value:"Module"})),XT=Up(WT);Gp.exports=XT;var QT=Gp.exports;export{QT as m};
//# sourceMappingURL=pixi-YXKqUbkg.js.map
